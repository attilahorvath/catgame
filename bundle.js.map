{"version":3,"file":"bundle.js","sources":["src/Matrix3.js","src/Shader.js","src/Renderer.js","src/Input.js","src/Sprite.js","src/SpriteBatch.js","shaders/sprite.vert","shaders/sprite.frag","src/TextSegment.js","src/Text.js","src/Grid.js","src/states/Minigame.js","src/minigames/Meowsweeper.js","src/minigames/PawPawToe.js","src/minigames/Sudocat.js","src/minigames/Meowmory.js","src/minigames/Meowjong.js","src/minigames/Meowsterpiece.js","src/states/Select.js","src/index.js","src/Game.js"],"sourcesContent":["export default class Matrix3 extends Float32Array {\n  static identity() {\n    return new Matrix3([\n      1.0, 0.0, 0.0,\n      0.0, 1.0, 0.0,\n      0.0, 0.0, 1.0,\n    ]);\n  }\n\n  static ortho(left, right, bottom, top) {\n    return new Matrix3([\n      2.0 / (right - left), 0.0, 0.0,\n      0.0, 2.0 / (top - bottom), 0.0,\n      -(right + left) / (right - left), -(top + bottom) / (top - bottom), 1.0,\n    ]);\n  }\n}\n","export default class {\n  #program;\n  #viewUniformLocation;\n  #projectionUniformLocation;\n  #texUniformLocation;\n  #imageSizeUniformLocation;\n\n  constructor(gl, vertexShaderSource, fragmentShaderSource) {\n    const vertexShader = this.#compileShader(gl, gl.VERTEX_SHADER, vertexShaderSource)\n    const fragmentShader = this.#compileShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n\n    const program = gl.createProgram();\n\n    const attachShader = gl.attachShader.bind(gl);\n    const bindAttribLocation = gl.bindAttribLocation.bind(gl);\n    const getUniformLocation = gl.getUniformLocation.bind(gl);\n\n    attachShader(program, vertexShader);\n    attachShader(program, fragmentShader);\n\n    bindAttribLocation(program, POSITION_ATTRIBUTE_LOCATION, 'vertexPosition');\n    bindAttribLocation(program, COLOR_ATTRIBUTE_LOCATION, 'vertexColor');\n    bindAttribLocation(program, TEX_COORD_ATTRIBUTE_LOCATION, 'vertexTexCoord');\n\n    bindAttribLocation(program, SPRITE_POSITION_ATTRIBUTE_LOCATION, 'spritePosition');\n    bindAttribLocation(program, SPRITE_SIZE_ATTRIBUTE_LOCATION, 'spriteSize');\n    bindAttribLocation(program, SPRITE_TYPE_ATTRIBUTE_LOCATION, 'spriteType');\n    bindAttribLocation(program, SPRITE_COLOR_ATTRIBUTE_LOCATION, 'spriteColor');\n\n    gl.linkProgram(program);\n\n    this.#viewUniformLocation = getUniformLocation(program, 'view');\n    this.#projectionUniformLocation = getUniformLocation(program, 'projection');\n    this.#texUniformLocation = getUniformLocation(program, 'tex');\n    this.#imageSizeUniformLocation = getUniformLocation(program, 'imageSize');\n\n    this.#program = program;\n  }\n\n  use(gl, view, projection) {\n    gl.useProgram(this.#program);\n\n    this.setup(gl, view, projection);\n  }\n\n  setup(gl, view, projection) {\n    if (this.#viewUniformLocation != null) {\n      gl.uniformMatrix3fv(this.#viewUniformLocation, false, view);\n    }\n\n    if (this.#projectionUniformLocation != null) {\n      gl.uniformMatrix3fv(this.#projectionUniformLocation, false, projection);\n    }\n\n    if (this.#texUniformLocation != null) {\n      gl.uniform1i(this.#texUniformLocation, 0);\n    }\n\n    if (this.#imageSizeUniformLocation != null) {\n      gl.uniform1f(this.#imageSizeUniformLocation, IMAGE_SIZE);\n    }\n  }\n\n  #compileShader(gl, type, source) {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    return shader;\n  }\n}\n","import Matrix3 from './Matrix3';\n\nimport Shader from './Shader';\n\nexport default class {\n  #onresize;\n  #gl;\n  #shaders;\n  #textures;\n  #images;\n  #currentShader;\n  #currentVao;\n  #currentTexture;\n\n  constructor(onresize) {\n    this.#onresize = onresize;\n\n    document.body.style.margin = '0';\n    document.body.style.padding = '0';\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.style.display = 'block';\n    this.canvas.style.width = '100dvw';\n    this.canvas.style.height = '100dvh';\n    this.canvas.style.cursor = 'none';\n    this.canvas.style.touchAction = 'none';\n\n    new ResizeObserver(() => {\n      this.w = this.canvas.clientWidth;\n      this.h = this.canvas.clientHeight;\n\n      this.canvas.width = this.w;\n      this.canvas.height = this.h;\n\n      this.horizontal = this.w > this.h;\n\n      this.#gl.viewport(0, 0, this.w, this.h);\n      this.projection = Matrix3.ortho(0, this.w, this.h, 0);\n\n      this.#onresize();\n    }).observe(this.canvas, { box: 'content-box' });\n\n    document.body.appendChild(this.canvas);\n\n    this.#gl = this.canvas.getContext('webgl2');\n\n    this.#gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n    this.#gl.clearColor(0.68, 0.68, 0.94, 1.0);\n\n    this.#gl.pixelStorei(this.#gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n\n    this.#gl.enable(this.#gl.BLEND);\n    this.#gl.blendFunc(this.#gl.ONE, this.#gl.ONE_MINUS_SRC_ALPHA);\n\n    this.quadBuffer = this.#createQuadBuffer();\n\n    this.#shaders = new Map();\n    this.#textures = new Map();\n    this.#images = [];\n\n    this.view = Matrix3.identity();\n    this.projection = Matrix3.ortho(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  createShader(name, vertexShaderSource, fragmentShaderSource) {\n    const cachedShader = this.#shaders.get(name);\n\n    if (cachedShader) {\n      return cachedShader;\n    }\n\n    const shader = new Shader(this.#gl, vertexShaderSource, fragmentShaderSource);\n    this.#shaders.set(name, shader);\n\n    return shader;\n  }\n\n  createVao() {\n    const vao = this.#gl.createVertexArray();\n\n    this.#gl.bindVertexArray(vao);\n\n    return vao;\n  }\n\n  createBuffer(data, dynamic) {\n    const buffer = this.#gl.createBuffer();\n\n    this.updateBuffer(buffer, data, dynamic);\n\n    return buffer;\n  }\n\n  updateBuffer(buffer, data, dynamic) {\n    this.useBuffer(buffer);\n\n    this.#gl.bufferData(this.#gl.ARRAY_BUFFER, data, dynamic ? this.#gl.DYNAMIC_DRAW : this.#gl.STATIC_DRAW);\n  }\n\n  useBuffer(buffer) {\n    this.#gl.bindBuffer(this.#gl.ARRAY_BUFFER, buffer);\n  }\n\n  setAttribute(location, size, stride, offset, divisor) {\n    this.#gl.vertexAttribPointer(location, size, this.#gl.FLOAT, false, stride, offset);\n    this.#gl.enableVertexAttribArray(location);\n\n    if (divisor != null) {\n      this.#gl.vertexAttribDivisor(location, divisor);\n    }\n  }\n\n  loadTexture(name, smooth) {\n    const path = `textures/${name}.png`;\n    const cachedTexture = this.#textures.get(`${path}_${smooth}`);\n\n    if (cachedTexture) {\n      return cachedTexture;\n    }\n\n    const texture = this.#gl.createTexture();\n    this.#prepareTexture(texture, null, smooth);\n\n    const imageIndex = this.#images.length;\n    const image = new Image();\n\n    image.src = path;\n    image.onload = () => this.#prepareTexture(texture, imageIndex, smooth);\n\n    this.#textures.set(`${path}_${smooth}`, texture);\n    this.#images[imageIndex] = image;\n\n    return texture;\n  }\n\n  clear() {\n    this.#gl.clear(this.#gl.COLOR_BUFFER_BIT);\n  }\n\n  draw(shader, vao, texture, vertexCount, instanceCount) {\n    if (shader !== this.#currentShader) {\n      shader.use(this.#gl, this.view, this.projection);\n      this.#currentShader = shader;\n    } else {\n      this.#currentShader.setup(this.#gl, this.view, this.projection);\n    }\n\n    if (vao !== this.#currentVao) {\n      this.#gl.bindVertexArray(vao);\n      this.#currentVao = vao;\n    }\n\n    if (texture !== this.#currentTexture) {\n      this.#gl.activeTexture(this.#gl.TEXTURE0);\n      this.#gl.bindTexture(this.#gl.TEXTURE_2D, texture);\n      this.#currentTexture = texture;\n    }\n\n    if (instanceCount != null) {\n      this.#gl.drawArraysInstanced(this.#gl.TRIANGLES, 0, vertexCount, instanceCount);\n    } else {\n      this.#gl.drawArrays(this.#gl.TRIANGLES, 0, vertexCount);\n    }\n  }\n\n  #createQuadBuffer() {\n    return this.createBuffer(new Float32Array([\n      0.0, 0.0, 0.0, 0.0,\n      0.0, 1.0, 0.0, 1.0,\n      1.0, 0.0, 1.0, 0.0,\n\n      1.0, 0.0, 1.0, 0.0,\n      0.0, 1.0, 0.0, 1.0,\n      1.0, 1.0, 1.0, 1.0,\n    ]), false);\n  }\n\n  #prepareTexture(texture, imageIndex, smooth) {\n    const gl = this.#gl;\n    const texture0 = gl.TEXTURE0;\n    const texture2d = gl.TEXTURE_2D;\n    const texImage2D = gl.texImage2D.bind(gl);\n    const texParameteri = gl.texParameteri.bind(gl);\n    const rgba = gl.RGBA;\n    const unsignedByte = gl.UNSIGNED_BYTE;\n    const filter = smooth ? gl.LINEAR : gl.NEAREST;\n\n    gl.activeTexture(texture0);\n    gl.bindTexture(texture2d, texture);\n\n    if (imageIndex != null) {\n      texImage2D(texture2d, 0, rgba, rgba, unsignedByte, this.#images[imageIndex]);\n    } else {\n      texImage2D(texture2d, 0, rgba, 1, 1, 0, rgba, unsignedByte, new Uint8Array([255, 0, 255, 255,]));\n    }\n\n    texParameteri(texture2d, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    texParameteri(texture2d, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    texParameteri(texture2d, gl.TEXTURE_MIN_FILTER, filter);\n    texParameteri(texture2d, gl.TEXTURE_MAG_FILTER, filter);\n  }\n}\n","export default class {\n  #newKeyPresses;\n  #newKeyReleases;\n  #newPress;\n  #newRelease;\n  #lastX;\n  #lastY;\n\n  constructor(game) {\n    this.#newKeyPresses = {};\n    this.#newKeyReleases = {};\n\n    game.renderer.canvas.addEventListener('pointermove', event => {\n      this.mouse = event.pointerType === 'mouse';\n\n      this.x = event.offsetX;\n      this.y = event.offsetY;\n    });\n\n    game.renderer.canvas.addEventListener('pointerdown', event => {\n      this.mouse = event.pointerType === 'mouse';\n\n      this.x = event.offsetX;\n      this.y = event.offsetY;\n\n      this.#newPress = true;\n    });\n\n    game.renderer.canvas.addEventListener('pointerup', event => {\n      this.mouse = event.pointerType === 'mouse';\n\n      this.x = event.offsetX;\n      this.y = event.offsetY;\n\n      this.#newRelease = true;\n    });\n\n    addEventListener('keydown', event => {\n      this.#newKeyPresses[event.code] = true;\n    });\n\n    addEventListener('keyup', event => {\n      this.#newKeyReleases[event.code] = true;\n    });\n  }\n\n  update() {\n    if (this.x !== this.#lastX || this.y !== this.#lastY) {\n      this.#lastX = this.x;\n      this.#lastY = this.y;\n      this.moved = true;\n    }\n\n    this.press = false;\n\n    if (this.#newPress) {\n      this.press = true;\n      this.#newPress = false;\n    }\n\n    this.release = false;\n\n    if (this.#newRelease) {\n      this.release = true;\n      this.#newRelease = false;\n    }\n\n    this.keyPresses = {};\n\n    for (const [newKeyPress, newKeyPressValue] of Object.entries(this.#newKeyPresses)) {\n      if (newKeyPressValue) {\n        this.keyPresses[newKeyPress] = true;\n        this.#newKeyPresses[newKeyPress] = false;\n      }\n    }\n\n    this.keyReleases = {};\n\n    for (const [newKeyRelease, newKeyReleaseValue] of Object.entries(this.#newKeyReleases)) {\n      if (newKeyReleaseValue) {\n        this.keyReleases[newKeyRelease] = true;\n        this.#newKeyReleases[newKeyRelease] = false;\n      }\n    }\n\n    this.clickRead = false;\n  }\n\n  click() {\n    return !this.clickRead && ((this.mouse && this.release) || (!this.mouse && this.press));\n  }\n}\n","export default class {\n  constructor(x, y, s, type, color) {\n    this.x = x;\n    this.y = y;\n    this.s = s;\n    this.type = type;\n    this.enabled = true;\n    this.hidden = false;\n    this.a = 1.0;\n\n    this.setColor(color);\n  }\n\n  attributes() {\n    return [this.x, this.y, this.s, this.type, this.r, this.g, this.b, this.hidden ? 0 : this.a];\n  }\n\n  setBaseColor(color) {\n    this.baseColor = color;\n    this.setColor(color);\n  }\n\n  setColor(index) {\n    let color = [0xd9dcff, 0xadadf0, 0xc28c94, 0xa66670, 0x575775,\n                 0x545454, 0xb36e14, 0xe6e6e6, 0xa38f61, 0x999999,\n                 0x90a8c3, 0x469d89, 0xb5c99a, 0x00a6fb, 0x4cc9f0,\n                 0xf4cae0, 0xe500a4, 0xf20089, 0xffffff, 0xffccf0,\n                 0x000000][index];\n    if (color == null) {\n      color = 0xffffff;\n    }\n    this.r = ((color & 0xff0000) >> 16) / 255.0;\n    this.g = ((color & 0x00ff00) >> 8) / 255.0;\n    this.b = (color & 0x0000ff) / 255.0;\n  }\n\n  activate(active) {\n    this.inactive = !active;\n    this.setColor(active ? (this.baseColor || PRIMARY_COLOR) : INACTIVE_COLOR);\n  }\n\n  write(text, content, s, color = ACTIVE_COLOR, animations = null, delay = null) {\n    (this.content || {}).enabled = false;\n    this.content = text.write(content.toString(), this.x + (this.s - s) / 2, this.y + (this.s - s) / 2, s, color, animations, delay);\n  }\n\n  draw(spriteBatch, s, type, color) {\n    (this.content || {}).enabled = false;\n    this.content = spriteBatch.add(this.x + (this.s - s) / 2, this.y + (this.s - s) / 2, s, type, color);\n  }\n}\n","import vertexShaderSource from '../shaders/sprite.vert';\nimport fragmentShaderSource from '../shaders/sprite.frag';\n\nimport Sprite from './Sprite';\n\nexport default class {\n  #game;\n  #shader;\n  #vao;\n  #instanceBuffer;\n  #texture;\n  #spritesChanged;\n\n  constructor(game, smooth = false, textureName = 'sprites') {\n    this.#game = game;\n    const renderer = game.renderer;\n\n    this.#shader = renderer.createShader('sprite', vertexShaderSource, fragmentShaderSource);\n\n    this.#vao = renderer.createVao();\n\n    renderer.useBuffer(renderer.quadBuffer);\n\n    renderer.setAttribute(POSITION_ATTRIBUTE_LOCATION, 2, 16, 0);\n    renderer.setAttribute(TEX_COORD_ATTRIBUTE_LOCATION, 2, 16, 8);\n\n    this.#instanceBuffer = renderer.createBuffer(new Float32Array(), true);\n\n    renderer.setAttribute(SPRITE_POSITION_ATTRIBUTE_LOCATION, 2, 32, 0, 1);\n    renderer.setAttribute(SPRITE_SIZE_ATTRIBUTE_LOCATION, 1, 32, 8, 1);\n    renderer.setAttribute(SPRITE_TYPE_ATTRIBUTE_LOCATION, 1, 32, 12, 1);\n    renderer.setAttribute(SPRITE_COLOR_ATTRIBUTE_LOCATION, 4, 32, 16, 1);\n\n    this.#texture = renderer.loadTexture(textureName, smooth);\n\n    this.sprites = [];\n    this.changed();\n  }\n\n  add(x, y, s, type, color) {\n    if (x === 'center') {\n      x = this.#game.renderer.w / 2 - s / 2;\n    }\n\n    if (y === 'center') {\n      y = this.#game.renderer.h / 2 - s / 2;\n    }\n\n    const sprite = new Sprite(x, y, s, type, color);\n\n    this.sprites.push(sprite);\n    this.changed();\n\n    return sprite;\n  }\n\n  changed() {\n    this.#spritesChanged = true;\n  }\n\n  update() {\n    if (this.#spritesChanged) {\n      this.sprites = this.sprites.filter(sprite => sprite.enabled);\n\n      this.#game.renderer.updateBuffer(this.#instanceBuffer, new Float32Array(\n        this.sprites\n            .map(sprite => sprite.attributes())\n            .flat()\n      ), true);\n\n      this.#spritesChanged = false;\n    }\n  }\n\n  draw() {\n    this.#game.renderer.draw(this.#shader, this.#vao, this.#texture, 6, this.sprites.length);\n  }\n}\n","#version 300 es\n\nuniform mat3 view;\nuniform mat3 projection;\nuniform float imageSize;\n\nuniform sampler2D tex;\n\nin vec2 vertexPosition;\nin vec2 vertexTexCoord;\n\nin vec2 spritePosition;\nin float spriteSize;\nin float spriteType;\nin vec4 spriteColor;\n\nout vec2 texCoord;\nout vec4 tint;\n\nvoid main() {\n  vec2 texOffset = vec2(imageSize / float(textureSize(tex, 0)),\n                        imageSize / float(textureSize(tex, 0).y));\n\n  texCoord = vec2(texOffset.x, 0.0) * spriteType + vertexTexCoord * texOffset;\n  tint = spriteColor;\n  tint.rgb *= tint.a;\n\n  gl_Position = vec4(projection * view * vec3(vertexPosition * spriteSize + spritePosition, 1.0), 1.0);\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D tex;\n\nin vec2 texCoord;\nin vec4 tint;\n\nout vec4 fragmentColor;\n\nvoid main() {\n  fragmentColor = texture(tex, texCoord) * tint;\n}\n","export default class {\n  constructor(text, x, y, s, color, animations, delay) {\n    this.text = text;\n    this.x = x;\n    this.y = y;\n    this.s = s;\n    this.color = color;\n    this.animations = animations ?? [];\n    this.delay = delay ?? 0;\n\n    this.sprites = [];\n    this.enabled = true;\n\n    this.time = 0;\n    this.begin = null;\n  }\n\n  setColor(color) {\n    for (const sprite of this.sprites) {\n      sprite.setColor(color);\n    }\n  }\n\n  update(timestamp) {\n    let updated = false;\n\n    for (const animation of this.animations) {\n      switch (animation) {\n      case 'sine':\n        for (let i = 0; i < this.sprites.length; i++) {\n          const sprite = this.sprites[i];\n          sprite.y = sprite.baseY + Math.sin(i + timestamp / 200) * 10;\n        }\n        updated = true;\n        break;\n      case 'shake':\n        this.time += 1;\n\n        if (this.time === 7) {\n          this.time = 0;\n          for (let i = 0; i < this.sprites.length; i++) {\n            const sprite = this.sprites[i];\n            sprite.x = sprite.baseX + Math.random() * 5;\n            sprite.y = sprite.baseY + Math.random() * 5;\n          }\n        }\n        updated = true;\n        break;\n      case 'typing':\n        if (!this.begin) {\n          this.begin = timestamp;\n        }\n        for (let i = 0; i < this.sprites.length; i++) {\n          const sprite = this.sprites[i];\n          sprite.hidden = (timestamp - this.begin - this.delay) / 150 < i;\n        }\n        updated = true;\n        break;\n      }\n    }\n\n    return updated;\n  }\n}\n","import SpriteBatch from './SpriteBatch';\nimport TextSegment from './TextSegment';\n\nexport default class extends SpriteBatch {\n  #game;\n  #segments;\n\n  constructor(game) {\n    super(game, false, 'font');\n\n    this.#game = game;\n    this.#segments = [];\n  }\n\n  write(text, x, y, s, color = ACTIVE_COLOR, animations = null, delay = null) {\n    if (x === 'center') {\n      x = Math.floor(this.#game.renderer.w / 2 - (Math.max(...text.split('\\n').map(s => s.length)) * s) / 2);\n    }\n\n    if (y === 'center') {\n      y = Math.floor(this.#game.renderer.h / 2 - (text.split('\\n').length * s) / 2);\n    }\n\n    const segment = new TextSegment(text, x, y, s, color, animations, delay);\n\n    let currX = x;\n    let currY = y;\n\n    for (const c of text) {\n      let type;\n\n      if (c === '\\n') {\n        currY += s;\n        currX = x;\n\n        continue;\n      }\n\n      if (c >= 'A' && c <= 'Z') {\n        type = c.charCodeAt(0) - 'A'.charCodeAt(0);\n      } else if (c >= '0' && c <= '9') {\n        type = 26 + c.charCodeAt(0) - '0'.charCodeAt(0);\n      } else if (c === '?') {\n        type = 36;\n      } else if (c === '!') {\n        type = 37;\n      } else if (c === ',') {\n        type = 38;\n      } else if (c === '.') {\n        type = 39;\n      } else if (c === \"'\") {\n        type = 40;\n      }\n\n      if (type != null) {\n        const sprite = this.add(currX, currY, s, type, color);\n        sprite.baseX = currX;\n        sprite.baseY = currY;\n        segment.sprites.push(sprite);\n      }\n\n      currX += s;\n    }\n\n    this.#segments.push(segment);\n    this.changed();\n\n    return segment;\n  }\n\n  clear() {\n    for (const segment of this.#segments) {\n      for (const sprite of segment.sprites) {\n        sprite.enabled = false;\n      }\n    }\n\n    this.#segments = [];\n    this.changed();\n  }\n\n  update(timestamp) {\n    for (const segment of this.#segments.filter(segment => !segment.enabled)) {\n      for (const sprite of segment.sprites) {\n        sprite.enabled = false;\n      }\n    }\n\n    this.#segments = this.#segments.filter(segment => segment.enabled);\n\n    for (const segment of this.#segments) {\n      if (segment.update(timestamp)) {\n        this.changed();\n      }\n    }\n\n    super.update();\n  }\n}\n","import SpriteBatch from './SpriteBatch';\n\nexport default class extends SpriteBatch {\n  #game;\n  #spacingX;\n  #spacingY;\n  #onclick;\n  // #color;\n  #active;\n  #pressed;\n\n  constructor(game, x, y, w, h, s, spacingX, spacingY, onclick, color = PRIMARY_COLOR, type = 0) {\n    super(game, false, 'cells');\n\n    this.#game = game;\n\n    if (x === 'center') {\n      x = game.renderer.w / 2 - w * (s + (spacingX ?? 0) * (w - 1) / w) / 2;\n    }\n\n    if (y === 'center') {\n      y = game.renderer.h / 2 - h * (s + (spacingY ?? 0) * (h - 1) / h) / 2;\n    }\n\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h\n    this.s = s;\n    this.#spacingX = spacingX ?? 0;\n    this.#spacingY = spacingY ?? 0;\n    this.#onclick = onclick;\n    this.color = color;\n\n    for (let gridY = 0; gridY < h; gridY++) {\n      for (let gridX = 0; gridX < w; gridX++) {\n        const cell = this.add(x + gridX * this.#fullW, y + gridY * this.#fullH, s, type, color);\n        cell.setColor(color);\n        cell.grid = this;\n        cell.gridX = gridX;\n        cell.gridY = gridY;\n      }\n    }\n  }\n\n  update(pressHandled = false) {\n    if (!this.disabled) {\n      if (this.#game.input.moved) {\n        let newActive = this.#cellAtPosition(this.#game.input.x, this.#game.input.y);\n        if (newActive?.inactive) {\n          newActive = null;\n        }\n\n        if (newActive !== this.#active && !this.#pressed) {\n          if (this.#onclick) {\n            if (this.#game.input.mouse) {\n              if (!this.#active?.inactive) {\n                this.#active?.setColor(this.#active?.baseColor || this.color);\n              }\n\n              newActive?.setColor(HIGHLIGHT_COLOR);\n              this.changed();\n            }\n          }\n        }\n\n        this.#active = newActive;\n      }\n\n      if (this.#game.input.press && !pressHandled) {\n        this.#pressed = this.#active;\n\n        if (this.#onclick) {\n          if (this.#game.input.mouse) {\n            this.#pressed?.setColor(ACTIVE_COLOR);\n            this.changed();\n          }\n        }\n      }\n\n      if (this.#game.input.click() && !pressHandled) {\n        if (this.#onclick) {\n          this.#pressed?.setColor(this.#pressed?.baseColor || this.color);\n          if (this.#active && this.#active === this.#pressed) {\n            this.#game.input.clickRead = true;\n            this.#onclick(this.#pressed);\n          }\n          this.changed();\n        }\n\n        this.#pressed = null;\n      }\n    }\n\n    super.update();\n\n    return this.#active != null;\n  }\n\n  cellAt(x, y) {\n    if (x >= 0 && x < this.w && y >= 0 && y < this.h) {\n      return this.sprites[this.w * y + x];\n    }\n  }\n\n  #cellAtPosition(x, y) {\n    const index = this.#indexAtPosition(x, y);\n\n    if (index) {\n      return this.cellAt(index[0], index[1]);\n    }\n  }\n\n  #indexAtPosition(x, y) {\n    const relX = x - this.x;\n    const relY = y - this.y;\n    const indexX = Math.trunc(relX / this.#fullW);\n    const indexY = Math.trunc(relY / this.#fullH);\n\n    if (relX >= 0 && relY >= 0 &&\n        relX - indexX * this.#fullW < this.s &&\n        relY - indexY * this.#fullH < this.s &&\n        indexX >= 0 && indexX < this.w && indexY >= 0 && indexY < this.h) {\n      return [indexX, indexY];\n    }\n  }\n\n  get #fullW() {\n    return this.s + this.#spacingX;\n  }\n\n  get #fullH() {\n    return this.s + this.#spacingY;\n  }\n}\n","import Grid from '../Grid';\nimport SpriteBatch from '../SpriteBatch';\nimport Select from './Select';\n\nexport default class {\n  #minigameClass;\n  #game;\n  #minigame;\n  #buttons;\n  #spriteBatch;\n  #cat;\n  #leftPaw;\n  #rightPaw;\n  #catNameText;\n  #catTextText;\n  #exitButton;\n  #exit;\n  #catMet;\n  #started;\n  #won;\n  #lost;\n  #lostText;\n  #lostTextInfo;\n\n  constructor(minigameClass) {\n    this.#minigameClass = minigameClass;\n  }\n\n  init(game) {\n    this.#game = game;\n\n    this.#buttons = new Grid(game, game.renderer.w - 74, 10, 1, 1, 64, 0, 0, (button) => this.#buttonClick(button));\n\n    this.#exitButton = this.#buttons.sprites[0];\n\n    this.#exitButton = this.#buttons.sprites[0];\n    this.#exitButton.write(game.text, 'X', 32, ACTIVE_COLOR);\n\n    this.#spriteBatch = new SpriteBatch(game);\n\n    const [_title, color, _sx, _type, catName, catText, _response] = this.#minigameClass.meta;\n\n    this.#cat = this.#spriteBatch.add('center', 100, 64, 1, color);\n    this.#leftPaw = this.#spriteBatch.add(this.#cat.x - 12, this.#cat.y + 60, 24, 0, color);\n    this.#rightPaw = this.#spriteBatch.add(this.#cat.x + 46, this.#cat.y + 60, 24, 0, color);\n\n    this.#catNameText = game.text.write(catName, 'center', 10, 24, color, ['sine']);\n    this.#catTextText = game.text.write(catText, 'center', this.#cat.y + 100, 32, color, ['typing', 'shake']);\n  }\n\n  update() {\n    const [title, _color, _sx, _type, _catName, _catText, response] = this.#minigameClass.meta;\n\n    if (this.#exit) {\n      return new Select(this.#game);\n    }\n\n    this.#buttons.update();\n\n    if (!this.#catMet && this.#game.input.click()) {\n      this.#game.input.clickRead = true;\n      this.#cat.setColor(BLACKCAT_COLOR);\n      this.#leftPaw.setColor(BLACKCAT_COLOR);\n      this.#rightPaw.setColor(BLACKCAT_COLOR);\n      this.#spriteBatch.changed();\n      this.#catNameText.enabled = false;\n      this.#catTextText.enabled = false;\n      this.#catNameText = this.#game.text.write('VICKI', 'center', 10, 24, BLACKCAT_COLOR, ['sine']);\n      this.#catTextText = this.#game.text.write(response, 'center', this.#cat.y + 100, 32, BLACKCAT_COLOR, ['typing', 'shake']);\n      this.#catMet = true;\n    } else if (!this.#started && this.#game.input.click()) {\n      this.#game.input.clickRead = true;\n      this.#cat.enabled = false;\n      this.#leftPaw.enabled = false;\n      this.#rightPaw.enabled = false;\n      this.#catNameText.enabled = false;\n      this.#catTextText.enabled = false;\n      this.#spriteBatch.changed();\n      this.#game.text.write(title, 'center', 10, 48, INACTIVE_COLOR, ['sine']);\n      this.#setup();\n      this.#started = true;\n    }\n\n    if (this.#started && !this.#won && !this.#lost) {\n      this.#minigame.update();\n    }\n\n    this.#spriteBatch.update();\n\n    if (this.#won && this.#game.input.click()) {\n      this.#exit = true;\n    }\n\n    if (this.#lost && this.#game.input.click()) {\n      this.#setup();\n    }\n  }\n\n  draw() {\n    if (this.#started && !this.#exit) {\n      this.#minigame.draw();\n    }\n\n    this.#spriteBatch.draw();\n    this.#buttons.draw();\n  }\n\n  #setup() {\n    this.#won = false;\n    this.#lost = false;\n\n    (this.#lostText || {}).enabled = false;\n    (this.#lostTextInfo || {}).enabled = false;\n\n    this.#game.text.clear();\n\n    this.#minigame = new this.#minigameClass(this.#game, () => this.#win(), () => this.#lose());\n\n    this.#exitButton = this.#buttons.sprites[0];\n    this.#exitButton.write(this.#game.text, 'X', 32, ACTIVE_COLOR);\n  }\n\n  #win() {\n    this.#won = true;\n    this.#game.minigamesWon.add(this.#minigameClass);\n\n    const texts = ['CONGRATS!!', 'WELL DONE!!', 'GOOD JOB!!', 'PAWSOME!!', 'AMEOWZING!!'];\n    const text = this.#game.text.write(texts[Math.floor(Math.random() * texts.length)], 'center', 'center', 48, HIGHLIGHT_COLOR, ['sine']);\n    this.#game.text.write('NOW GO HELP THE OTHER CATS!', 'center', text.y + 75, 32, ACTIVE_COLOR, ['typing', 'shake'], 1200);\n  }\n\n  #lose() {\n    this.#lost = true;\n\n    const texts = ['OOPS!!', 'BETTER LUCK NEXT TIME!!', 'OH WELL!!'];\n    this.#lostText = this.#game.text.write(texts[Math.floor(Math.random() * texts.length)], 'center', 'center', 48, HIGHLIGHT_COLOR, ['sine']);\n    this.#lostTextInfo = this.#game.text.write(\"LET'S TRY AGAIN!\", 'center', this.#lostText.y + 75, 32, ACTIVE_COLOR, ['typing', 'shake'], 1200);\n  }\n\n  #buttonClick(button) {\n    if (button === this.#exitButton) {\n      this.#exit = true;\n    }\n  }\n}\n","import Grid from '../Grid';\n\nexport default class {\n  #game;\n  #onwin;\n  #onlose;\n  #w;\n  #h;\n  #mines;\n  #fontSize;\n  #grid;\n  #buttons;\n  #digButton;\n  #flagButton;\n  #mode;\n  #started;\n\n  static meta = [\n    'MEOWSWEEPER',\n    TABBYCAT_COLOR,\n    73,\n    2,\n    'QUEEN KARA THE 3RD',\n    \"YOU, NEW CAT!!\\nI NEED YOU TO SCRATCH MY BACK\\nIMMEDIATELY BUT ONLY WHERE\\nI LIKE IT!\\n\\n\\nSINCE YOU'RE NEW I WILL TELL\\nYOU HOW MANY DANGER ZONES\\nARE AROUND WHERE YOU'RE\\nSCRATCHING!\",\n    'OOOH, THE QUEEN HERSELF!!\\n\\n\\nI NEED TO MAKE A GOOD\\nFIRST IMPRESSION!'\n  ];\n\n  constructor(game, onwin, onlose) {\n    this.#game = game;\n    this.#onwin = onwin;\n    this.#onlose = onlose;\n\n    this.#w = game.renderer.horizontal ? 20 : 10;\n    this.#h = game.renderer.horizontal ? 10 : 20;\n    this.#mines = 10;\n\n    this.#fontSize = 26;\n\n    const spacing = 4;\n\n    const s = Math.floor(Math.min((game.renderer.w - 20) / this.#w - (spacing * (this.#w - 1) / this.#w), (game.renderer.h - 110) / this.#h - (spacing * (this.#h - 1) / this.#h)));\n\n    this.#grid = new Grid(game, 'center', 100, this.#w, this.#h, s, spacing, spacing, (cell) => this.#click(cell));\n\n    this.#buttons = new Grid(game, 10, 10, 2, 1, 64, 10, 0, (button) => this.#buttonClick(button));\n\n    this.#digButton = this.#buttons.sprites[0];\n    this.#digButton.write(game.text, 'O', 30, ACTIVE_COLOR);\n\n    this.#flagButton = this.#buttons.sprites[1];\n    this.#flagButton.write(game.text, 'X', 30, ACTIVE_COLOR);\n\n    this.#setMode('dig');\n  }\n\n  update() {\n    if (this.#game.input.keyPresses['KeyA'] || this.#game.input.keyPresses['ArrowLeft']) {\n      this.#setMode('dig');\n    }\n\n    if (this.#game.input.keyPresses['KeyD'] || this.#game.input.keyPresses['ArrowRight']) {\n      this.#setMode('flag');\n    }\n\n    this.#grid.update();\n    this.#buttons.update();\n  }\n\n  draw() {\n    this.#grid.draw();\n    this.#buttons.draw();\n  }\n\n  #click(cell) {\n    switch (this.#mode) {\n    case 'dig':\n      if (!this.#started) {\n        this.#start(cell);\n      }\n\n      this.#open(cell.gridX, cell.gridY);\n\n      if (cell.mine) {\n        this.#grid.disabled = true;\n\n        this.#game.scheduleTimer(2000, () => this.#onlose());\n      }\n\n      break;\n    case 'flag':\n      if (cell.flagged) {\n        cell.flagged = false;\n        cell.content.enabled = false;\n        this.#game.text.changed();\n      } else {\n        cell.flagged = true;\n        cell.write(this.#game.text, 'X', this.#fontSize, HIGHLIGHT_COLOR);\n      }\n      break;\n    }\n  }\n\n  #start(cell) {\n    const available = this.#grid.sprites.filter(availableCell => availableCell !== cell && (Math.abs(availableCell.gridX - cell.gridX) > 1 || Math.abs(availableCell.gridY - cell.gridY) > 1));\n\n    for (let i = 0; i < this.#mines; i++) {\n      const index = Math.floor(Math.random() * available.length);\n      const mineCell = available[index];\n      available.splice(index, 1);\n\n      mineCell.mine = true;\n    }\n\n    for (let y = 0; y < this.#grid.h; y++) {\n      for (let x = 0; x < this.#grid.w; x++) {\n        let cell = this.#grid.cellAt(x, y);\n        if (!cell.mine) {\n          cell.mines = 0;\n          for (let dy = -1; dy <= 1; dy++) {\n            for (let dx = -1; dx <= 1; dx++) {\n              if (this.#grid.cellAt(x + dx, y + dy)?.mine) {\n                cell.mines += 1;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    this.#started = true;\n  }\n\n  #open(x, y) {\n    this.#game.shake(200);\n    const cell = this.#grid.cellAt(x, y);\n\n    if (cell?.flagged) {\n      cell.flagged = false;\n      cell.content.enabled = false;\n    }\n\n    if (cell?.enabled && !cell?.opened) {\n      cell.opened = true;\n\n      cell.activate(false);\n\n      if (cell.mines === 0) {\n        cell.hidden = true;\n\n        this.#open(x, y - 1);\n        this.#open(x, y + 1);\n        this.#open(x - 1, y);\n        this.#open(x + 1, y);\n      } else {\n        if (cell.mine) {\n          for (const mineCell of this.#grid.sprites.filter(cell => cell.mine)) {\n            mineCell.activate(false);\n            mineCell.write(this.#game.text, 'X', this.#fontSize, INACTIVE10_COLOR);\n          }\n        } else {\n          cell.write(this.#game.text, cell.mines, this.#fontSize, INACTIVE1_COLOR + (cell.mines - 1));\n        }\n      }\n    }\n\n    if (this.#grid.sprites.filter(cell => !cell.opened).every(cell => cell.mine)) {\n      this.#onwin();\n    }\n  }\n\n  #buttonClick(button) {\n    if (button === this.#flagButton) {\n      this.#setMode('flag');\n    } else if (button === this.#digButton) {\n      this.#setMode('dig');\n    }\n  }\n\n  #setMode(mode) {\n    this.#mode = mode;\n\n    this.#digButton.activate(this.#mode !== 'dig');\n    this.#flagButton.activate(this.#mode !== 'flag');\n\n    this.#buttons.changed();\n  }\n}\n","import Grid from '../Grid';\nimport SpriteBatch from '../SpriteBatch';\n\nexport default class {\n  #game;\n  #onwin;\n  #onlose;\n  #grid;\n  #spriteBatch;\n  #timer;\n  #over;\n\n  static meta = [\n    'PAW PAW TOE',\n    ORANGECAT_COLOR,\n    73,\n    2,\n    'ORANGE CAT, THE USELESS BOYFRIEND',\n    \"BET YOU CAN'T BEAT ME\\nIN PAW PAW TOE!\\n\\n\\nI'M THE SMARTEST\\nORANGE CAT EVER!!!\",\n    \"WELL, THAT'S\\nNOT SAYING MUCH...\\n\\n\\nLET'S SEE!\"\n  ];\n\n  constructor(game, onwin, onlose) {\n    this.#game = game;\n    this.#onwin = onwin;\n    this.#onlose = onlose;\n\n    this.#grid = new Grid(game, 'center', 'center', 3, 3, 96, 20, 20, (cell) => this.#click(cell));\n    this.#spriteBatch = new SpriteBatch(game);\n  }\n\n  update() {\n    this.#grid.update();\n    this.#spriteBatch.update();\n  }\n\n  draw() {\n    this.#grid.draw();\n    this.#spriteBatch.draw();\n  }\n\n  #click(cell) {\n    if (!cell.symbol) {\n      this.#mark(cell, 'X');\n\n      this.#grid.disabled = true;\n\n      this.#timer = this.#game.scheduleTimer(1000, () => {\n        if (!this.#over) {\n          const available = this.#grid.sprites.filter(sprite => !sprite.symbol);\n\n          if (available.length > 0) {\n            this.#mark(available[Math.floor(Math.random() * available.length)], 'O');\n\n            this.#grid.disabled = false;\n            this.#grid.changed();\n          }\n        }\n      });\n    }\n  }\n\n  #mark(cell, symbol) {\n    if (!this.#over) {\n      this.#game.shake(200);\n\n      cell.symbol = symbol;\n\n      cell.activate(false);\n\n      cell.draw(this.#spriteBatch, 64, 0, symbol === 'X' ? BLACKCAT_COLOR : ORANGECAT_COLOR);\n\n      this.#checkGrid();\n    }\n  }\n\n  #checkGrid() {\n    for (let y = 0; y < 3; y++) {\n      const symbolCounts = new Map();\n\n      for (let x = 0; x < 3; x++) {\n        const cell = this.#grid.cellAt(x, y);\n\n        symbolCounts.set(cell.symbol, (symbolCounts.get(cell.symbol) || 0) + 1);\n      }\n\n      if (symbolCounts.get('X') === 3) {\n        return this.#win('X');\n      }\n\n      if (symbolCounts.get('O') === 3) {\n        return this.#win('O');\n      }\n    }\n\n    for (let x = 0; x < 3; x++) {\n      const symbolCounts = new Map();\n\n      for (let y = 0; y < 3; y++) {\n        const cell = this.#grid.cellAt(x, y);\n\n        symbolCounts.set(cell.symbol, (symbolCounts.get(cell.symbol) || 0) + 1);\n      }\n\n      if (symbolCounts.get('X') === 3) {\n        return this.#win('X');\n      }\n\n      if (symbolCounts.get('O') === 3) {\n        return this.#win('O');\n      }\n    }\n\n    if (this.#grid.cellAt(0, 0).symbol === 'X' && this.#grid.cellAt(1, 1).symbol === 'X' && this.#grid.cellAt(2, 2).symbol === 'X') {\n      return this.#win('X');\n    }\n\n    if (this.#grid.cellAt(0, 0).symbol === 'O' && this.#grid.cellAt(1, 1).symbol === 'O' && this.#grid.cellAt(2, 2).symbol === 'O') {\n      return this.#win('O');\n    }\n\n    if (this.#grid.cellAt(2, 0).symbol === 'X' && this.#grid.cellAt(1, 1).symbol === 'X' && this.#grid.cellAt(0, 2).symbol === 'X') {\n      return this.#win('X');\n    }\n\n    if (this.#grid.cellAt(2, 0).symbol === 'O' && this.#grid.cellAt(1, 1).symbol === 'O' && this.#grid.cellAt(0, 2).symbol === 'O') {\n      return this.#win('O');\n    }\n  }\n\n  #win(symbol) {\n    this.#over = true;\n    this.#grid.disabled = true;\n    (this.#timer || {}).disabled = true;\n\n    if (symbol === 'X') {\n      this.#onwin();\n    } else if (symbol === 'O') {\n      this.#grid.disabled = true;\n      this.#game.scheduleTimer(2000, () => this.#onlose());\n    }\n  }\n}\n","import Grid from '../Grid';\nimport SpriteBatch from '../SpriteBatch';\n\nexport default class {\n  #game;\n  #onwin;\n  #spriteBatch;\n  #grids;\n  #cellSize;\n  #buttons;\n  #digit;\n\n  static meta = [\n    'SUDOCAT',\n    BLACKCAT_COLOR,\n    73,\n    4,\n    'KUMBA',\n    \"I NEED ALL MY TREATS AND\\nTOYS NEATLY ORGANISED!!\\n\\n\\nTHERE SHOULD BE ONLY ONE\\nTYPE IN EACH ROW, EACH\\nCOLUMN AND IN EACH BOX!!\",\n    'KITTY MUST HAVE OCD...'\n  ];\n\n  constructor(game, onwin) {\n    this.#game = game;\n    this.#onwin = onwin;\n\n    this.#spriteBatch = new SpriteBatch(game, true);\n\n    this.#grids = [];\n\n    const gridSpacing = 16;\n\n    const gridSize = Math.floor(Math.min((game.renderer.w - 20) / 3 - (gridSpacing * (3 - 1) / 3), (game.renderer.h - 200) / 3 - (gridSpacing * (3 - 1) / 3)));\n\n    const spacing = 5;\n\n    this.#cellSize = Math.floor(Math.min((gridSize - 0) / 3 - (spacing * (3 - 1) / 3), (gridSize - 0) / 3 - (spacing * (3 - 1) / 3)));\n\n    const startX = game.renderer.w / 2 - 3 * (gridSize + gridSpacing * (3 - 1) / 3) / 2;\n\n    for (let y = 0; y < 3; y++) {\n      for (let x = 0; x < 3; x++) {\n        const grid = new Grid(game, startX + x * (gridSize + gridSpacing), 100 + y * (gridSize + gridSpacing), 3, 3, this.#cellSize, spacing, spacing, (cell) => this.#click(cell));\n        this.#grids.push(grid);\n      }\n    }\n\n    this.#buttons = new Grid(game, 'center', game.renderer.h - 74, 10, 1, 64, 10, 0, (button) => this.#buttonClick(button));\n\n    for (let digit = 1; digit <= 10; digit++) {\n      const button = this.#buttons.sprites[digit - 1];\n      button.draw(this.#spriteBatch, 64 * 2 / 3, digit + 5);\n      button.digit = digit <= 9 ? digit : null;\n    }\n\n    this.#setGrid();\n    this.#selectDigit(1);\n  }\n\n  update() {\n    for (let digit = 1; digit <= 9; digit++) {\n      if (this.#game.input.keyPresses[`Digit${digit}`]) {\n        this.#selectDigit(digit);\n      }\n    }\n\n    if (this.#game.input.keyPresses['KeyA'] || this.#game.input.keyPresses['ArrowLeft']) {\n      if (this.#digit > 1) {\n        this.#selectDigit(this.#digit - 1);\n      }\n    }\n\n    if (this.#game.input.keyPresses['KeyD'] || this.#game.input.keyPresses['ArrowRight']) {\n      if (this.#digit < 9) {\n        this.#selectDigit(this.#digit + 1);\n      }\n    }\n\n    if (this.#game.input.keyPresses['KeyX'] || this.#game.input.keyPresses['Digit0']) {\n      this.#selectDigit(null);\n    }\n\n    this.#spriteBatch.update();\n\n    for (const grid of this.#grids) {\n      grid.update();\n    }\n\n    this.#buttons.update();\n  }\n\n  draw() {\n    for (const grid of this.#grids) {\n      grid.draw();\n    }\n\n    this.#buttons.draw();\n    this.#spriteBatch.draw();\n  }\n\n  #gridAt(x, y) {\n    return this.#grids[Math.floor(y / 3) * 3 + Math.floor(x / 3)];\n  }\n\n  #cellAt(x, y) {\n    return this.#gridAt(x, y).cellAt(x % 3, y % 3);\n  }\n\n  #setGrid() {\n    const starts = [\n      [\n        6, 8, 0, 1, 0, 0, 0, 9, 0,\n        0, 3, 4, 5, 0, 8, 0, 2, 0,\n        2, 1, 0, 0, 6, 0, 3, 0, 0,\n        5, 0, 0, 4, 0, 7, 0, 0, 9,\n        3, 4, 2, 9, 0, 0, 0, 0, 6,\n        0, 0, 7, 0, 8, 0, 5, 0, 0,\n        9, 2, 0, 8, 0, 0, 0, 5, 3,\n        0, 0, 3, 2, 0, 0, 9, 1, 8,\n        0, 0, 0, 3, 0, 0, 0, 6, 7,\n      ]\n    ];\n\n    const start = starts[Math.floor(Math.random() * starts.length)];\n\n    for (let y = 0; y < 9; y++) {\n      for (let x = 0; x < 9; x++) {\n        const digit = start[y * 9 + x];\n        if (digit !== 0) {\n          const cell = this.#cellAt(x, y);\n          cell.activate(false);\n          cell.digit = digit;\n          cell.draw(this.#spriteBatch, this.#cellSize * 2 / 3, digit + 5);\n        }\n      }\n    }\n  }\n\n  #click(cell) {\n    cell.digit = this.#digit;\n    (cell.content || {}).enabled = false;\n\n    if (this.#digit) {\n      cell.draw(this.#spriteBatch, this.#cellSize * 2 / 3, this.#digit + 5);\n    }\n\n    if (this.#checkCells()) {\n      this.#game.shake(200);\n      this.#onwin();\n    }\n\n    this.#game.text.changed();\n    this.#spriteBatch.changed();\n  }\n\n  #checkCells() {\n    let valid = true;\n\n    this.#resetCells();\n\n    for (let i = 0; i < 9; i++) {\n      valid &= this.#checkRow(i);\n      valid &= this.#checkColumn(i);\n      valid &= this.#checkGrid(i);\n    }\n\n    return valid;\n  }\n\n  #resetCells() {\n    for (let y = 0; y < 9; y++) {\n      for (let x = 0; x < 9; x++) {\n        const cell = this.#cellAt(x, y);\n        if (!cell.inactive) {\n          cell.setBaseColor(PRIMARY_COLOR);\n        }\n      }\n    }\n\n    for (let i = 0; i < 9; i++) {\n      this.#grids[i].changed();\n    }\n  }\n\n  #checkRow(x) {\n    let valid = true;\n    const digitCounts = new Map();\n\n    for (let y = 0; y < 9; y++) {\n      const cell = this.#cellAt(x, y);\n      digitCounts.set(cell.digit, (digitCounts.get(cell.digit) || 0) + 1);\n    }\n\n    for (const [digit, digitCount] of digitCounts.entries()) {\n      if (digit == null) {\n        valid = false;\n      } else if (digitCount > 1) {\n        valid = false;\n\n        for (let y = 0; y < 9; y++) {\n          const cell = this.#cellAt(x, y);\n          if (!cell.inactive && cell.digit == digit) {\n            cell.setBaseColor(ACTIVE_COLOR);\n            this.#gridAt(x, y).changed();\n          }\n        }\n      }\n    }\n\n    return valid;\n  }\n\n  #checkColumn(y) {\n    let valid = true;\n    const digitCounts = new Map();\n\n    for (let x = 0; x < 9; x++) {\n      const cell = this.#cellAt(x, y);\n      digitCounts.set(cell.digit, (digitCounts.get(cell.digit) || 0) + 1);\n    }\n\n    for (const [digit, digitCount] of digitCounts.entries()) {\n      if (digit == null) {\n        valid = false;\n      } else if (digitCount > 1) {\n        valid = false;\n\n        for (let x = 0; x < 9; x++) {\n          const cell = this.#cellAt(x, y);\n          if (!cell.inactive && cell.digit == digit) {\n            cell.setBaseColor(ACTIVE_COLOR);\n            this.#gridAt(x, y).changed();\n          }\n        }\n      }\n    }\n\n    return valid;\n  }\n\n  #checkGrid(index) {\n    let valid = true;\n    const digitCounts = new Map();\n\n    const grid = this.#grids[index];\n\n    for (let i = 0; i < 9; i++) {\n      const cell = grid.sprites[i];\n      digitCounts.set(cell.digit, (digitCounts.get(cell.digit) || 0) + 1);\n    }\n\n    for (const [digit, digitCount] of digitCounts.entries()) {\n      if (digit == null) {\n        valid = false;\n      } else if (digitCount > 1) {\n        valid = false;\n\n        for (let i = 0; i < 9; i++) {\n          const cell = grid.sprites[i];\n          if (!cell.inactive && cell.digit == digit) {\n            cell.setBaseColor(ACTIVE_COLOR);\n            grid.changed();\n          }\n        }\n      }\n    }\n\n    return valid;\n  }\n\n  #buttonClick(button) {\n    if (button) {\n      this.#selectDigit(button.digit);\n    }\n  }\n\n  #selectDigit(digit) {\n    this.#digit = digit;\n\n    for (const button of this.#buttons.sprites) {\n      button.activate(true);\n    }\n\n    this.#buttons.sprites[digit != null ? digit - 1 : 9].activate(false);\n\n    this.#buttons.changed();\n  }\n}\n","import Grid from '../Grid';\nimport SpriteBatch from '../SpriteBatch';\n\nexport default class {\n  #game;\n  #onwin;\n  #grid;\n  #spriteBatch;\n  #opened;\n  #showingA;\n  #showingB;\n  #timer;\n\n  static meta = [\n    'MEOWMORY',\n    SILVERCAT_COLOR,\n    8,\n    3,\n    'MOLLY',\n    \"THEY SAY I HAVE THE\\nMEMORY OF A GOLDFISH...\\n\\n\\nCAN YOU SHOW ME HOW\\nTO REMEMBER THINGS??\",\n    'SOMEONE SAID FISHIE?!\\n\\n\\nYUM!!!'\n  ];\n\n  constructor(game, onwin) {\n    this.#game = game;\n    this.#onwin = onwin;\n\n    const w = game.renderer.horizontal ? 6 : 5;\n    const h = game.renderer.horizontal ? 5 : 6;\n\n    const spacing = 16;\n\n    const s = Math.floor(Math.min((game.renderer.w - 20) / w - (spacing * (w - 1) / w), (game.renderer.h - 110) / h - (spacing * (h - 1) / h)));\n\n    this.#grid = new Grid(game, 'center', 100, w, h, s, spacing, spacing, (cell) => this.#click(cell));\n\n    this.#spriteBatch = new SpriteBatch(game, true);\n\n    const available = this.#grid.sprites.slice();\n\n    for (let i = 0; i < (w * h) / 2; i++) {\n      const indexA = Math.floor(Math.random() * available.length);\n      const cellA = available[indexA];\n      available.splice(indexA, 1);\n\n      const indexB = Math.floor(Math.random() * available.length);\n      const cellB = available[indexB];\n      available.splice(indexB, 1);\n\n      cellA.secret = i;\n      cellB.secret = i;\n    }\n  }\n\n  update() {\n    this.#grid.update();\n    this.#spriteBatch.update();\n  }\n\n  draw() {\n    this.#grid.draw();\n    this.#spriteBatch.draw();\n  }\n\n  #click(cell) {\n    if (!cell.open) {\n      if (this.#showingA && this.#showingB) {\n        this.#cancelShowing();\n      }\n\n      cell.open = true;\n      cell.draw(this.#spriteBatch, this.#grid.s * 2 / 3, cell.secret, cell.secret < 5 ? TABBYCAT_COLOR : null);\n      cell.setBaseColor(ACTIVE_COLOR);\n\n      if (this.#opened) {\n        if (cell.secret === this.#opened.secret) {\n          this.#game.shake(200);\n          \n          cell.found = true;\n          cell.activate(false);\n\n          this.#opened.found = true;\n          this.#opened.activate(false);\n\n          if (this.#grid.sprites.every(cell => cell.found)) {\n            this.#onwin();\n          }\n        } else {\n          this.#showingA = this.#opened;\n          this.#showingB = cell;\n\n          this.#timer = this.#game.scheduleTimer(1000, () => this.#cancelShowing());\n        }\n\n        this.#opened = false;\n      } else {\n        this.#opened = cell;\n      }\n    }\n  }\n\n  #cancelShowing() {\n    (this.#timer || {}).disabled = true;\n\n    this.#showingA.open = false;\n    this.#showingA.content.enabled = false;\n    this.#showingA.setBaseColor(PRIMARY_COLOR);\n\n    this.#showingB.open = false;\n    this.#showingB.content.enabled = false;\n    this.#showingB.setBaseColor(PRIMARY_COLOR);\n\n    this.#grid.changed();\n    this.#game.text.changed();\n    this.#spriteBatch.changed();\n\n    this.#showingA = null;\n    this.#showingB = null;\n  }\n}\n","import Grid from '../Grid';\nimport SpriteBatch from '../SpriteBatch';\n\nexport default class {\n  #game;\n  #onwin;\n  #grids;\n  #selected;\n\n  static meta = [\n    'MEOWJONG',\n    SILVERCAT_COLOR,\n    73,\n    4,\n    'PABLO',\n    \"HOLA!! SOY PABLO!\\n\\n\\nLET'S PLAY MEOWJONG!\\nJUST MATCH THE SAME TILES\\nBUT ONLY WHEN THEY'RE\\nFREE TO MOVE LEFT OR RIGHT.\",\n    'OH, SI SENOR?!'\n  ];\n\n  constructor(game, onwin) {\n    this.#game = game;\n    this.#onwin = onwin;\n\n    const w = game.renderer.horizontal ? 12 : 8;\n    const h = game.renderer.horizontal ? 8 : 12;\n\n    const s = Math.floor(Math.min((game.renderer.w - 20) / w, (game.renderer.h - 110) / h));\n    const offset = Math.ceil(s / 16);\n\n    this.#grids = [];\n\n    const baseGrid = new Grid(game, 'center', 100, w, h, s, 0, 0, (cell) => this.#click(cell), INACTIVE3_COLOR);\n    baseGrid.spriteBatch = new SpriteBatch(game, true);\n\n    for (let [x, y] of [[0, 1], [1, 1], [0, 2], [0, 5], [0, 6], [1, 6], [10, 1], [11, 1], [11, 2], [11, 5], [10, 6], [11, 6]]) {\n      if (!game.renderer.horizontal) {\n        let i = x;\n        x = y;\n        y = i;\n      }\n\n      baseGrid.cellAt(x, y).activate(false);\n      baseGrid.cellAt(x, y).hidden = true;\n    }\n\n    this.#grids.push(baseGrid);\n\n    const gridA = new Grid(game, baseGrid.x + ((game.renderer.horizontal ? 3 : 1) * s - offset), baseGrid.y + ((game.renderer.horizontal ? 1 : 3) * s - offset), 6, 6, s, 0, 0, (cell) => this.#click(cell), INACTIVE4_COLOR);\n    gridA.spriteBatch = new SpriteBatch(game, true);\n\n    const gridB = new Grid(game, gridA.x + (s - offset), gridA.y + (s - offset), 4, 4, s, 0, 0, (cell) => this.#click(cell), INACTIVE5_COLOR);\n    gridB.spriteBatch = new SpriteBatch(game, true);\n\n    const gridC = new Grid(game, gridB.x + (s - offset), gridB.y + (s - offset), 2, 2, s, 0, 0, (cell) => this.#click(cell), INACTIVE6_COLOR);\n    gridC.spriteBatch = new SpriteBatch(game, true);\n\n    this.#grids.push(gridA);\n    this.#grids.push(gridB);\n    this.#grids.push(gridC);\n\n    const available = [];\n\n    for (let type = 0; type < 15; type++) {\n      for (let count = 0; count < 4; count++) {\n        if (type < 5) {\n          for (let color = BLACKCAT_COLOR; color <= SILVERCAT_COLOR; color++) {\n            available.push([type, color]);\n          }\n        } else {\n          available.push([type, null]);\n        }\n      }\n    }\n\n    for (let grid of this.#grids) {\n      for (let cell of grid.sprites) {\n        if (!cell.inactive) {\n          const index = Math.floor(Math.random() * available.length);\n          const [type, color] = available[index];\n          available.splice(index, 1);\n\n          cell.symbol = `${type}_${color}`;\n          cell.draw(grid.spriteBatch, s * 2 / 3, type, color);\n        }\n      }\n    }\n  }\n\n  update() {\n    let pressHandled = false;\n    for (let i = this.#grids.length - 1; i >= 0; i--) {\n      pressHandled = this.#grids[i].update(pressHandled);\n      this.#grids[i].spriteBatch.update();\n    }\n  }\n\n  draw() {\n    for (const grid of this.#grids) {\n      grid.draw();\n      grid.spriteBatch.draw();\n    }\n  }\n\n  #click(cell) {\n    const leftCell = cell.grid.cellAt(cell.gridX - 1, cell.gridY);\n    const rightCell = cell.grid.cellAt(cell.gridX + 1, cell.gridY);\n    const freeCell =!leftCell || leftCell.inactive || !rightCell || rightCell.inactive\n\n    if (!this.#selected && freeCell) {\n      this.#selected = cell;\n      cell.setBaseColor(ACTIVE_COLOR);\n    } else if (cell === this.#selected) {\n      cell.setBaseColor(cell.grid.color);\n      this.#selected = null;\n    } else if (this.#selected && freeCell && this.#selected.symbol === cell.symbol) {\n      this.#game.shake(200);\n      \n      this.#selected.activate(false);\n      this.#selected.hidden = true;\n      this.#selected.content.enabled = false;\n\n      cell.activate(false);\n      cell.hidden = true;\n      cell.content.enabled = false;\n\n      this.#selected = null;\n      this.#checkGrids();\n    }\n\n    for (const grid of this.#grids) {\n      grid.changed();\n      grid.spriteBatch.changed();\n    }\n  }\n\n  #checkGrids() {\n    for (let grid of this.#grids) {\n      for (let cell of grid.sprites) {\n        if (!cell.inactive) {\n          return;\n        }\n      }\n    }\n\n    this.#onwin();\n  }\n}\n","import Grid from '../Grid';\n\nexport default class {\n  #game;\n  #onwin;\n  #rows;\n  #columns;\n  #maxRows;\n  #maxColumns;\n  #w;\n  #h;\n  #grid;\n  #buttons;\n  #markButton;\n  #flagButton;\n  #mode;\n\n  static meta = [\n    'MEOWSTERPIECE',\n    WHITECAT_COLOR,\n    8,\n    3,\n    'CHA CHA',\n    'TODAY I DECIDED TO BE\\nAN ARTIST!!\\nHELP ME WITH THIS\\nPAINT BY NUMBER!\\n\\n\\nTHE CLUES WILL TELL YOU\\nHOW MANY BLOCKS SHOULD\\nBE PAINTED IN EACH ROW\\nAND IN EACH COLUMN!',\n    'SURE SURE, ARTIST TODAY,\\nSOMETHING ELSE TOMORROW!\\n\\n\\nTYPICAL KITTY...'\n  ];\n\n  constructor(game, onwin) {\n    this.#game = game;\n    this.#onwin = onwin;\n\n    this.#rows = [[0], [1, 1], [2, 2], [5], [2, 1, 2, 1], [5, 2], [3, 1], [6, 2], [1, 5, 1], [8], [2, 4]];\n    this.#columns = [[1, 2], [4, 1, 1], [3, 6], [7], [3, 6], [4, 4], [1, 3], [2], [3, 1], [2, 3]];\n\n    this.#maxRows = Math.max(...this.#rows.map(row => row.length));\n    this.#maxColumns = Math.max(...this.#columns.map(column => column.length));\n\n    this.#w = this.#columns.length + this.#maxRows;\n    this.#h = this.#rows.length + this.#maxColumns;\n\n    const spacing = 2;\n\n    const s = Math.floor(Math.min((game.renderer.w - 20) / this.#w - (spacing * (this.#w - 1) / this.#w), (game.renderer.h - 110) / this.#h - (spacing * (this.#h - 1) / this.#h)));\n\n    this.#grid = new Grid(game, 'center', 100, this.#w, this.#h, s, spacing, spacing, (cell) => this.#click(cell));\n\n    for (let x = 0; x < this.#w; x++) {\n      for (let y = 0; y < this.#maxColumns; y++) {\n        const cell = this.#grid.cellAt(x, y);\n        if (x < this.#maxRows || y < this.#maxColumns - this.#columns[x - this.#maxRows].length) {\n          cell.hidden = true;\n        } else {\n          cell.write(game.text, this.#columns[x - this.#maxRows][y - (this.#maxColumns - this.#columns[x - this.#maxRows].length)], s * 2 / 3, HIGHLIGHT_COLOR);\n          cell.activate(false);\n        }\n      }\n    }\n\n    for (let y = 0; y < this.#w; y++) {\n      for (let x = 0; x < this.#maxRows; x++) {\n        const cell = this.#grid.cellAt(x, y);\n        if (y < this.#maxColumns || x < this.#maxRows - this.#rows[y - this.#maxColumns].length) {\n          cell.hidden = true;\n        } else {\n          cell.write(game.text, this.#rows[y - this.#maxColumns][x - (this.#maxRows - this.#rows[y - this.#maxColumns].length)], this.#grid.s * 2 / 3, HIGHLIGHT_COLOR);\n          cell.activate(false);\n        }\n      }\n    }\n\n    this.#buttons = new Grid(game, 10, 10, 2, 1, 64, 10, 0, (button) => this.#buttonClick(button));\n\n    this.#markButton = this.#buttons.sprites[0];\n    this.#markButton.write(game.text, 'O', 30, ACTIVE_COLOR);\n\n    this.#flagButton = this.#buttons.sprites[1];\n    this.#flagButton.write(game.text, 'X', 30, ACTIVE_COLOR);\n\n    this.#setMode('mark');\n\n    this.#grid.changed();\n  }\n\n  update() {\n    if (this.#game.input.keyPresses['KeyA'] || this.#game.input.keyPresses['ArrowLeft']) {\n      this.#setMode('mark');\n    }\n\n    if (this.#game.input.keyPresses['KeyD'] || this.#game.input.keyPresses['ArrowRight']) {\n      this.#setMode('flag');\n    }\n\n    this.#grid.update();\n    this.#buttons.update();\n  }\n\n  draw() {\n    this.#grid.draw();\n    this.#buttons.draw();\n  }\n\n  #click(cell) {\n    (cell.content || {}).enabled = false;\n\n    switch (this.#mode) {\n    case 'mark':\n      if (cell.state !== 'marked') {\n        cell.state = 'marked';\n        cell.setBaseColor(ACTIVE_COLOR);\n      } else {\n        cell.state = null;\n        cell.setBaseColor(PRIMARY_COLOR);\n      }\n      break;\n\n    case 'flag':\n      cell.setBaseColor(PRIMARY_COLOR);\n      if (cell.state !== 'flagged') {\n        cell.state = 'flagged';\n        cell.write(this.#game.text, 'X', this.#grid.s * 2 / 3, HIGHLIGHT_COLOR);\n      } else {\n        cell.state = null;\n      }\n      break;\n    }\n\n    this.#game.text.changed();\n\n    this.#checkGrid();\n  }\n\n  #buttonClick(button) {\n    if (button === this.#flagButton) {\n      this.#setMode('flag');\n    } else if (button === this.#markButton) {\n      this.#setMode('mark');\n    }\n  }\n\n  #setMode(mode) {\n    this.#mode = mode;\n\n    this.#markButton.activate(this.#mode !== 'mark');\n    this.#flagButton.activate(this.#mode !== 'flag');\n\n    this.#buttons.changed();\n  }\n\n  #checkGrid() {\n    let gridCorrect = 0;\n\n    for (let x = this.#maxRows; x < this.#w; x++) {\n      for (let y = 0; y < this.#maxColumns; y++) {\n        this.#grid.cellAt(x, y).setBaseColor(INACTIVE_COLOR);\n      }\n\n      let current = 0;\n      let index = 0;\n      let correct = 0;\n\n      for (let y = this.#maxColumns; y < this.#h; y++) {\n        if (this.#grid.cellAt(x, y).state === 'marked') {\n          current += 1;\n        }\n\n        if (this.#grid.cellAt(x, y).state !== 'marked' || y === this.#h - 1) {\n          if ((current > 0 || y === this.#h - 1) && index < this.#columns[x - this.#maxRows].length) {\n            if (current > this.#columns[x - this.#maxRows][index]) {\n              this.#grid.cellAt(x, index + (this.#maxColumns - this.#columns[x - this.#maxRows].length)).setBaseColor(HIGHLIGHT_COLOR);\n            } else if (current === this.#columns[x - this.#maxRows][index]) {\n              this.#grid.cellAt(x, index + (this.#maxColumns - this.#columns[x - this.#maxRows].length)).setBaseColor(INACTIVE1_COLOR);\n              correct += 1;\n            }\n\n            index += 1;\n          }\n\n          current = 0;\n        }\n      }\n\n      if (correct === this.#columns[x - this.#maxRows].length) {\n        gridCorrect += 1;\n      }\n    }\n\n    for (let y = this.#maxColumns; y < this.#h; y++) {\n      for (let x = 0; x < this.#maxRows; x++) {\n        this.#grid.cellAt(x, y).setBaseColor(INACTIVE_COLOR);\n      }\n\n      let current = 0;\n      let index = 0;\n      let correct = 0;\n\n      for (let x = this.#maxRows; x < this.#w; x++) {\n        if (this.#grid.cellAt(x, y).state === 'marked') {\n          current += 1;\n        }\n\n        if (this.#grid.cellAt(x, y).state !== 'marked' || x === this.#w - 1) {\n          if ((current > 0 || x === this.#w - 1) && index < this.#rows[y - this.#maxColumns].length) {\n            if (current > this.#rows[y - this.#maxColumns][index]) {\n              this.#grid.cellAt(index + (this.#maxRows - this.#rows[y - this.#maxColumns].length), y).setBaseColor(HIGHLIGHT_COLOR);\n            } else if (current === this.#rows[y - this.#maxColumns][index]) {\n              this.#grid.cellAt(index + (this.#maxRows - this.#rows[y - this.#maxColumns].length), y).setBaseColor(INACTIVE1_COLOR);\n              correct += 1;\n            }\n\n            index += 1;\n          }\n\n          current = 0;\n        }\n      }\n\n      if (correct === this.#rows[y - this.#maxColumns].length) {\n        gridCorrect += 1;\n      }\n    }\n\n    if (gridCorrect === (this.#w - this.#maxRows) + (this.#h - this.#maxColumns)) {\n      this.#game.shake(200);\n      this.#onwin();\n    }\n  }\n}\n","import Grid from '../Grid';\nimport SpriteBatch from '../SpriteBatch';\n\nimport Minigame from './Minigame';\nimport Meowsweeper from '../minigames/Meowsweeper';\nimport PawPawToe from '../minigames/PawPawToe';\nimport Sudocat from '../minigames/Sudocat';\nimport Meowmory from '../minigames/Meowmory';\nimport Meowjong from '../minigames/Meowjong';\nimport Meowsterpiece from '../minigames/Meowsterpiece';\n\nimport Matrix3 from '../Matrix3';\n\nexport default class {\n  #game;\n  #firstStart;\n  #grid;\n  #buttons;\n  #spriteBatch;\n  #minigameState;\n  #camY;\n  #startBlackCat;\n  #blackCat;\n  #blackCatArrived;\n  #titleShown;\n  #introOver;\n\n  init(game) {\n    this.#game = game;\n    this.#firstStart = game.firstStart;\n    game.firstStart = false;\n\n    this.#grid = new Grid(game, 'center', 100, 6, 15, 128, 0, 0, null, '', 2);\n    this.#grid.disabled = true;\n\n    this.#buttons = new Grid(game, 'center', 132, 3, 7, 128, 64, 64, (button) => this.#buttonClick(button), '', 1);\n\n    if (this.#firstStart) {\n      this.#buttons.disabled = true;\n      this.#camY = -game.renderer.h;\n      game.text.write('THIS IS A TRUE STORY\\n\\n\\nTHE CATS DEPICTED HERE\\nALL LIVE IN DUBLIN', 'center', 'center', 32, INACTIVE_COLOR, ['typing', 'shake']);\n      game.scheduleTimer(9000, () => {\n        this.#startBlackCat = true;\n        game.text.clear();\n      });\n    } else {\n      game.text.write('HELP THE OTHER CATS\\nIN THE BUILDING!!', 'center', 10, 32, ACTIVE_COLOR, ['typing', 'shake']);\n    }\n\n    this.#spriteBatch = new SpriteBatch(game);\n\n    const minigameClasses = [PawPawToe, Meowmory, Meowjong, Sudocat, Meowsterpiece, Meowsweeper];\n\n    for (let i = 0; i < 21; i++) {\n      if (minigameClasses[i] && (i == 0 || !this.#firstStart)) {\n        let [_, color, sx, type, ..._rest] = minigameClasses[i].meta;\n        this.#buttons.sprites[i].minigameClass = minigameClasses[i];\n        let sy = 73;\n        if (game.minigamesWon.has(minigameClasses[i])) {\n          this.#buttons.sprites[i].activate(false);\n          sx = 39;\n          sy = 39;\n          type = 1;\n        }\n        this.#spriteBatch.add(this.#buttons.sprites[i].x + sx, this.#buttons.sprites[i].y + sy, 50, type, color);\n      } else {\n        this.#buttons.sprites[i].activate(false);\n      }\n    }\n\n    this.#blackCat = this.#spriteBatch.add('center', game.renderer.h, 900, 1, VOID_COLOR);\n\n    for (let i = 0; i < this.#buttons.sprites.length; i++) {\n      const button = this.#buttons.sprites[i];\n      if (game.minigamesWon.has(button.minigameClass)) {\n        button.activate(false);\n      }\n    }\n  }\n\n  update() {\n    if (this.#firstStart) {\n      if (this.#camY < 0) {\n        this.#camY += 3;\n        if (this.#camY >= 0) {\n          this.#camY = 0;\n          this.#game.shake(200);\n        }\n        this.#game.renderer.projection = Matrix3.ortho(0, this.#game.renderer.w, this.#game.renderer.h + this.#camY, this.#camY);\n      } else if (this.#startBlackCat && !this.#blackCatArrived) {\n        this.#blackCat.y -= 3;\n        if (this.#blackCat.y <= this.#game.renderer.h / 2 - this.#blackCat.s / 2) {\n          this.#blackCatArrived = true;\n          this.#blackCat.y = this.#game.renderer.h / 2 - this.#blackCat.s / 2;\n          const title = this.#game.text.write('  A VOIDING\\nYOUR PROBLEMS', 'center', 'center', 48, null, ['sine']);\n          this.#game.text.write('  A GAME BY\\nATTILA HORVATH', 'center', title.y + 180, 36, WHITECAT_COLOR, ['shake']);\n          this.#game.text.write('TAP TO BEGIN', 'center', title.y + 280, 36, INACTIVE_COLOR, ['typing', 'shake'], 1200);\n          this.#game.shake(500);\n        }\n        this.#blackCat.x = this.#game.renderer.w / 2 - this.#blackCat.s / 2;\n        this.#spriteBatch.changed();\n      } else if (!this.#titleShown) {\n        if (this.#game.input.click()) {\n          this.#game.input.clickRead = true;\n          this.#game.text.clear();\n          const firstLine = this.#game.text.write('SO, I HEARD THIS\\nIS THE DOMAIN OF', 'center',  'center', 28, INACTIVE_COLOR, ['typing', 'shake']);\n          this.#game.text.write('QUEEN KARA', 'center', firstLine.y + 60, 32, TABBYCAT_COLOR, ['typing', 'sine'], 4000);\n          this.#game.text.write(\"I HOPE SHE'LL ACCEPT ME\\nIF I HELP THE OTHER CATS...\", 'center', firstLine.y + 120, 28, INACTIVE_COLOR, ['typing', 'shake'], 6000);\n          this.#titleShown = true;\n        }\n      } else if (!this.#introOver) {\n        if (this.#game.input.click()) {\n          this.#game.input.clickRead = true;\n          this.#blackCat.hidden = true;\n          this.#spriteBatch.changed();\n          this.#game.text.clear();\n          this.#introOver = true;\n          this.#game.text.write(\"LET'S START WITH THIS\\nGENIUS ORANGE CAT HERE!\", 'center', 10, 32, ACTIVE_COLOR, ['typing', 'shake']);\n        }\n      } else {\n        this.#buttons.disabled = false;\n      }\n    }\n\n    this.#grid.update();\n    this.#spriteBatch.update();\n\n    if (this.#minigameState) {\n      return this.#minigameState;\n    } else {\n      this.#buttons.update();\n    }\n  }\n\n  draw() {\n    this.#grid.draw();\n    this.#buttons.draw();\n    this.#spriteBatch.draw();\n  }\n\n  #buttonClick(button) {\n    if (button) {\n      this.#minigameState = new Minigame(button.minigameClass);\n    }\n  }\n}\n","import Game from \"./Game\";\n\nconst game = new Game();\n\nfunction step(timestamp) {\n  requestAnimationFrame(step);\n  game.step(timestamp);\n}\n\nrequestAnimationFrame(step);\n","import Renderer from './Renderer';\nimport Input from './Input';\n\nimport Text from './Text';\nimport SpriteBatch from './SpriteBatch';\nimport Select from './states/Select';\nimport Minigame from './states/Minigame';\nimport Matrix3 from './Matrix3';\nimport PawPawToe from './minigames/PawPawToe';\nimport Meowmory from './minigames/Meowmory';\nimport Meowjong from './minigames/Meowjong';\n\nexport default class {\n  #started;\n  #timers;\n  #backgroundBatch;\n  #spriteBatch;\n  #cursor;\n  #state;\n  #nextState;\n  #shakeScreen;\n\n  constructor() {\n    this.renderer = new Renderer(() => {\n      if (!this.#started) {\n        for (let i = 0; i < 128; i++) {\n          const type = Math.floor(Math.random() * 15);\n          let color = null;\n          if (type < 5) {\n            color = BLACKCAT_COLOR + Math.floor(Math.random() * 5);\n          }\n          const sprite = this.#backgroundBatch.add(Math.random() * this.renderer.w, Math.random() * this.renderer.h, 16 + Math.random() * 100, type, color);\n          sprite.a = 0.33;\n          sprite.dx = -0.5 + Math.random();\n          sprite.dy = -0.5 + Math.random();\n          sprite.ds = -0.1 + Math.random() * 0.2;\n        }\n\n        // this.#state = new Select();\n        this.#state = new Minigame(Meowjong);\n        this.#state.init(this);\n        this.#started = true;\n      }\n    });\n\n    this.input = new Input(this);\n    this.#timers = [];\n\n    this.#backgroundBatch = new SpriteBatch(this, true);\n\n    this.text = new Text(this);\n    this.#spriteBatch = new SpriteBatch(this);\n    this.#cursor = this.#spriteBatch.add(0, 0, 26, 0, BLACKCAT_COLOR);\n    this.#cursor.hidden = true;\n\n    this.minigamesWon = new Set();\n\n    // this.firstStart = true;\n  }\n\n  step(timestamp) {\n    this.timestamp = timestamp;\n    this.#update(timestamp);\n    this.#draw();\n\n    if (this.#nextState) {\n      this.text.clear();\n      this.#state = this.#nextState;\n      this.#state.init(this);\n      this.#nextState = null;\n    }\n  }\n\n  scheduleTimer(delay, onexpire, repeat) {\n    const timer = { start: this.timestamp ?? 0, delay: delay, onexpire: onexpire, repeat: repeat };\n    this.#timers.push(timer);\n    return timer;\n  }\n\n  shake(duration) {\n    navigator.vibrate(duration);\n    this.#shakeScreen = true;\n    this.scheduleTimer(duration, () => this.#shakeScreen = false);\n  }\n\n  #update(timestamp) {\n    if (this.#shakeScreen) {\n      this.renderer.view[6] = Math.random() * 7;\n      this.renderer.view[7] = Math.random() * 7;\n    } else {\n      this.renderer.view[6] = 0;\n      this.renderer.view[7] = 0;\n    }\n\n    this.input.update();\n\n    if (this.input.mouse && this.#cursor.hidden) {\n      this.#cursor.hidden = false;\n      this.#spriteBatch.changed();\n    }\n\n    if (this.input.moved) {\n      this.#cursor.x = this.input.x - 6;\n      this.#cursor.y = this.input.y - 6;\n\n      this.#spriteBatch.changed();\n    }\n\n    for (const sprite of this.#backgroundBatch.sprites) {\n      sprite.x += sprite.dx;\n      sprite.y += sprite.dy;\n      sprite.s += sprite.ds;\n\n      if (sprite.x < 0) {\n        sprite.dx = -sprite.dx;\n        sprite.x = 0;\n      }\n\n      if (sprite.y < 0) {\n        sprite.dy = -sprite.dy;\n        sprite.y = 0;\n      }\n\n      if (sprite.x > this.renderer.w) {\n        sprite.dx = -sprite.dx;\n        sprite.x = this.renderer.w;\n      }\n\n      if (sprite.y > this.renderer.h) {\n        sprite.dy = -sprite.dy;\n        sprite.y = this.renderer.h;\n      }\n\n      if (sprite.s < 16) {\n        sprite.ds = -sprite.ds;\n        sprite.s = 16;\n      }\n\n      if (sprite.s > 116) {\n        sprite.ds = -sprite.ds;\n        sprite.s = 116;\n      }\n    }\n\n    this.#backgroundBatch.changed();\n    this.#backgroundBatch.update();\n\n    this.#updateTimers(timestamp);\n\n    if (this.#state) {\n      this.#nextState = this.#state.update();\n    }\n\n    this.text.update(timestamp);\n    this.#spriteBatch.update();\n  }\n\n  #updateTimers(timestamp) {\n    for (const timer of this.#timers) {\n      if (timestamp >= timer.start + timer.delay && !timer.disabled) {\n        if (timer.repeat) {\n          timer.start = timestamp;\n        } else {\n          timer.expired = true;\n        }\n\n        if (timer.onexpire) {\n          timer.onexpire();\n        }\n      }\n    }\n\n    if (this.#timers.some(timer => timer.expired || timer.disabled)) {\n      this.#timers = this.#timers.filter(timer => !timer.expired && !timer.disabled);\n    }\n  }\n\n  #draw() {\n    this.renderer.clear();\n\n    const currProjection = this.renderer.projection;\n\n    this.renderer.projection = Matrix3.ortho(0, this.renderer.w, this.renderer.h, 0);\n    this.#backgroundBatch.draw();\n    this.renderer.projection = currProjection;\n\n    if (this.#state) {\n      this.#state.draw();\n    }\n\n    this.renderer.projection = Matrix3.ortho(0, this.renderer.w, this.renderer.h, 0);\n    this.text.draw();\n    this.#spriteBatch.draw();\n    this.renderer.projection = currProjection;\n  }\n}\n"],"names":["Matrix3","Float32Array","identity","ortho","left","right","bottom","top","Shader","program","viewUniformLocation","projectionUniformLocation","texUniformLocation","imageSizeUniformLocation","constructor","gl","vertexShaderSource","fragmentShaderSource","vertexShader","this","compileShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","bind","bindAttribLocation","getUniformLocation","linkProgram","use","v","p","useProgram","setup","uniformMatrix3fv","uniform1i","uniform1f","type","source","shader","createShader","shaderSource","Renderer","onresize","shaders","textures","images","currentShader","currentVao","currentTexture","document","body","style","margin","padding","canvas","createElement","display","width","height","cursor","touchAction","ResizeObserver","w","clientWidth","h","clientHeight","horizontal","viewport","observe","box","appendChild","getContext","clearColor","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","quadBuffer","createQuadBuffer","Map","name","cachedShader","get","set","createVao","vao","createVertexArray","bindVertexArray","createBuffer","data","dynamic","buffer","updateBuffer","useBuffer","bufferData","ARRAY_BUFFER","DYNAMIC_DRAW","STATIC_DRAW","bindBuffer","a","location","size","stride","offset","divisor","vertexAttribPointer","FLOAT","enableVertexAttribArray","vertexAttribDivisor","loadTexture","smooth","path","cachedTexture","texture","createTexture","prepareTexture","imageIndex","length","image","Image","src","onload","clear","COLOR_BUFFER_BIT","d","vertexCount","instanceCount","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","drawArraysInstanced","TRIANGLES","drawArrays","texture0","texture2d","texImage2D","texParameteri","rgba","RGBA","unsignedByte","UNSIGNED_BYTE","filter","LINEAR","NEAREST","Uint8Array","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","Input","newKeyPresses","newKeyReleases","newPress","newRelease","lastX","lastY","game","renderer","addEventListener","event","mouse","pointerType","x","offsetX","y","offsetY","code","u","moved","press","release","keyPresses","newKeyPress","newKeyPressValue","Object","entries","keyReleases","newKeyRelease","newKeyReleaseValue","clickRead","click","Sprite","s","color","enabled","hidden","cc","attributes","r","g","b","cb","baseColor","index","activate","active","inactive","text","content","animations","delay","toString","spriteBatch","add","SpriteBatch","instanceBuffer","spritesChanged","textureName","sprites","c","sprite","push","map","flat","TextSegment","time","begin","timestamp","updated","animation","i","baseY","Math","sin","baseX","random","Text","segments","super","floor","max","split","segment","currX","currY","charCodeAt","Grid","spacingX","spacingY","onclick","pressed","gridY","gridX","cell","fullW","fullH","grid","pressHandled","disabled","input","newActive","cellAtPosition","cellAt","indexAtPosition","relX","relY","indexX","trunc","indexY","Minigame","minigameClass","minigame","buttons","cat","leftPaw","rightPaw","catNameText","catTextText","exitButton","exit","catMet","started","won","lost","lostText","lostTextInfo","init","button","buttonClick","_title","_sx","_type","cn","ct","_response","meta","title","_color","_catName","_catText","cr","Select","win","lose","minigamesWon","texts","Meowsweeper","onwin","onlose","mines","fontSize","digButton","flagButton","mode","static","min","setMode","start","open","mine","tt","flagged","available","availableCell","abs","mineCell","splice","dy","dx","shake","opened","every","PawPawToe","timer","over","symbol","mark","checkGrid","symbolCounts","Sudocat","grids","cellSize","digit","gridSize","gridSpacing","spacing","startX","setGrid","selectDigit","gridAt","starts","checkCells","valid","resetCells","checkRow","checkColumn","digitCounts","digitCount","Meowmory","showingA","showingB","slice","indexA","cellA","indexB","cellB","secret","cancelShowing","found","Meowjong","selected","ceil","baseGrid","gridA","gridB","gridC","count","leftCell","rightCell","freeCell","checkGrids","Meowsterpiece","rows","columns","maxRows","maxColumns","markButton","row","column","state","gridCorrect","current","correct","firstStart","minigameState","camY","startBlackCat","blackCat","blackCatArrived","titleShown","introOver","minigameClasses","_","sx","_rest","sy","has","firstLine","timers","backgroundBatch","nextState","shakeScreen","ds","Set","step","onexpire","repeat","duration","navigator","vibrate","updateTimers","expired","some","currProjection","requestAnimationFrame"],"mappings":"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"}