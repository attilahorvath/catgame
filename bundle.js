!function(){"use strict";class t extends Float32Array{static identity(){return new t([1,0,0,0,1,0,0,0,1])}static projection(i,e){return new t([2/i,0,0,0,-2/e,0,-1,1,1])}}class i{#t;#i;#e;#s;#h;constructor(t,i,e){const s=this.#r(t,t.VERTEX_SHADER,i),h=this.#r(t,t.FRAGMENT_SHADER,e);this.#t=t.createProgram(),t.attachShader(this.#t,s),t.attachShader(this.#t,h),t.bindAttribLocation(this.#t,0,"vertexPosition"),t.bindAttribLocation(this.#t,1,"vertexColor"),t.bindAttribLocation(this.#t,2,"vertexTexCoord"),t.bindAttribLocation(this.#t,3,"spritePosition"),t.bindAttribLocation(this.#t,4,"spriteSize"),t.bindAttribLocation(this.#t,5,"spriteType"),t.bindAttribLocation(this.#t,6,"spriteColor"),t.bindAttribLocation(this.#t,7,"spriteAngle"),t.linkProgram(this.#t),this.#i=t.getUniformLocation(this.#t,"view"),this.#e=t.getUniformLocation(this.#t,"projection"),this.#s=t.getUniformLocation(this.#t,"tex"),this.#h=t.getUniformLocation(this.#t,"imageSize"),console.log(t.getProgramInfoLog(this.#t))}use(t,i,e){t.useProgram(this.#t),this.setUniforms(t,i,e)}setUniforms(t,i,e){null!=this.#i&&t.uniformMatrix3fv(this.#i,!1,i),null!=this.#e&&t.uniformMatrix3fv(this.#e,!1,e),null!=this.#s&&t.uniform1i(this.#s,0),null!=this.#h&&t.uniform1f(this.#h,this.imageSize)}#r(t,i,e){const s=t.createShader(i);return t.shaderSource(s,e),t.compileShader(s),console.log(t.getShaderInfoLog(s)),s}}class e{#a;#n;#o;#l;#c;#g;#d;#m;#u;constructor(i){this.#a=i,document.body.style.margin="0",document.body.style.padding="0",this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.canvas.style.width="100dvw",this.canvas.style.height="100dvh",this.canvas.style.cursor="none",this.canvas.style.touchAction="none",new ResizeObserver(()=>{this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.horizontal=this.width>this.height,this.#n.viewport(0,0,this.canvas.width,this.canvas.height),this.#g=t.projection(this.canvas.width,this.canvas.height),this.#a&&this.#a()}).observe(this.canvas,{box:"content-box"}),document.body.appendChild(this.canvas),this.#n=this.canvas.getContext("webgl2"),this.#n.viewport(0,0,this.canvas.width,this.canvas.height),this.#n.clearColor(.68,.68,.94,1),this.#n.enable(this.#n.BLEND),this.#n.blendFunc(this.#n.SRC_ALPHA,this.#n.ONE_MINUS_SRC_ALPHA),this.quadBuffer=this.#p(),this.#o=new Map,this.#l=new Map,this.#c=[],this.view=t.identity(),this.#g=t.projection(this.canvas.width,this.canvas.height)}createShader(t,e,s){const h=this.#o.get(t);if(h)return h;const r=new i(this.#n,e,s);return this.#o.set(t,r),r}createVao(){const t=this.#n.createVertexArray();return this.#n.bindVertexArray(t),t}createBuffer(t,i){const e=this.#n.createBuffer();return this.updateBuffer(e,t,i),e}updateBuffer(t,i,e){this.useBuffer(t),this.#n.bufferData(this.#n.ARRAY_BUFFER,i,e?this.#n.DYNAMIC_DRAW:this.#n.STATIC_DRAW)}useBuffer(t){this.#n.bindBuffer(this.#n.ARRAY_BUFFER,t)}setAttribute(t,i,e,s,h){this.#n.vertexAttribPointer(t,i,this.#n.FLOAT,!1,e,s),this.#n.enableVertexAttribArray(t),null!=h&&this.#n.vertexAttribDivisor(t,h)}loadTexture(t,i){const e=this.#l.get(t);if(e)return e;const s=this.#n.createTexture();this.#f(s,null,i);const h=this.#c.length,r=new Image;return r.src=t,r.onload=()=>this.#f(s,h,i),this.#l.set(t,s),this.#c[h]=r,s}clear(){this.#n.clear(this.#n.COLOR_BUFFER_BIT|this.#n.DEPTH_BUFFER_BIT)}draw(t,i,e,s,h){t!==this.#d?(t.use(this.#n,this.view,this.#g),this.#d=t):this.#d.setUniforms(this.#n,this.view,this.#g),i!==this.#m&&(this.#n.bindVertexArray(i),this.#m=i),e!==this.#u&&(this.#n.activeTexture(this.#n.TEXTURE0),this.#n.bindTexture(this.#n.TEXTURE_2D,e),this.#u=e),null!=h?this.#n.drawArraysInstanced(this.#n.TRIANGLES,0,s,h):this.#n.drawArrays(this.#n.TRIANGLES,0,s)}#p(){return this.createBuffer(new Float32Array([0,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,1,1,1]),!1)}#f(t,i,e){this.#n.activeTexture(this.#n.TEXTURE0),this.#n.bindTexture(this.#n.TEXTURE_2D,t),this.#n.pixelStorei(this.#n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),null!=i?this.#n.texImage2D(this.#n.TEXTURE_2D,0,this.#n.RGBA,this.#n.RGBA,this.#n.UNSIGNED_BYTE,this.#c[i]):this.#n.texImage2D(this.#n.TEXTURE_2D,0,this.#n.RGBA,1,1,0,this.#n.RGBA,this.#n.UNSIGNED_BYTE,new Uint8Array([255,0,255,255])),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_WRAP_S,this.#n.CLAMP_TO_EDGE),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_WRAP_T,this.#n.CLAMP_TO_EDGE),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_MIN_FILTER,e?this.#n.LINEAR:this.#n.NEAREST),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_MAG_FILTER,e?this.#n.LINEAR:this.#n.NEAREST)}}class s{#w;#b;#x;#v;#A;#y;constructor(t){this.#w={},this.#b={},t.renderer.canvas.addEventListener("pointermove",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY}),t.renderer.canvas.addEventListener("pointerdown",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#x=!0}),t.renderer.canvas.addEventListener("pointerup",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#v=!0}),addEventListener("keydown",t=>{this.#w[t.code]=!0}),addEventListener("keyup",t=>{this.#b[t.code]=!0})}update(){this.x===this.#A&&this.y===this.#y||(this.#A=this.x,this.#y=this.y,this.moved=!0),this.press=!1,this.#x&&(this.press=!0,this.#x=!1),this.release=!1,this.#v&&(this.release=!0,this.#v=!1),this.keyPresses={};for(const[t,i]of Object.entries(this.#w))i&&(this.keyPresses[t]=!0,this.#w[t]=!1);this.keyReleases={};for(const[t,i]of Object.entries(this.#b))i&&(this.keyReleases[t]=!0,this.#b[t]=!1)}click(){return this.mouse&&this.release||!this.mouse&&this.press}}class h{constructor(t,i,e,s,h){this.x=t,this.y=i,this.size=e,this.type=s,this.angle=0,this.enabled=!0,this.hidden=!1,this.a=1,this.setColor(h)}attributes(){return[this.x,this.y,this.size,this.type,this.r,this.g,this.b,this.hidden?0:this.a,this.angle]}setBaseColor(t){this.baseColor=t,this.setColor(t)}setColor(t){switch(t){case"primary":this.r=.85,this.g=.86,this.b=1;break;case"background":this.r=.68,this.g=.68,this.b=.94;case"highlight":this.r=.76,this.g=.55,this.b=.58;break;case"active":this.r=.65,this.g=.4,this.b=.44;break;case"inactive":this.r=.34,this.g=.34,this.b=.46;break;case"blackcat":this.r=.33,this.g=.33,this.b=.33;break;case"orangecat":this.r=.7,this.g=.45,this.b=.08;break;case"whitecat":this.r=.9,this.g=.9,this.b=.9;break;case"tabbycat":this.r=.64,this.g=.56,this.b=.38;break;case"silvercat":this.r=.6,this.g=.6,this.b=.6;break;case"black":this.r=0,this.g=0,this.b=0;break;case"primary1":this.#k(144,168,195);break;case"primary2":this.#k(70,157,137);break;case"primary3":this.#k(181,201,154);break;case"primary4":this.#k(0,166,251);break;case"primary5":this.#k(76,201,240);break;case"primary6":this.#k(244,202,224);break;case"primary7":this.#k(229,0,164);break;case"primary8":this.#k(242,0,137);break;case"primary9":this.#k(255,255,255);break;case"primary10":this.r=1,this.g=.8,this.b=.94;break;case"inactive1":this.#k(144,168,195);break;case"inactive2":this.#k(70,157,137);break;case"inactive3":this.#k(181,201,154);break;case"inactive4":this.#k(0,166,251);break;case"inactive5":this.#k(76,201,240);break;case"inactive6":this.#k(244,202,224);break;case"inactive7":this.#k(229,0,164);break;case"inactive8":this.#k(242,0,137);break;case"inactive9":this.#k(255,255,255);break;case"inactive10":this.r=1,this.g=.8,this.b=.94;break;default:this.r=1,this.g=1,this.b=1}}activate(t){this.inactive=!t,this.setColor(t?this.baseColor||"primary":"inactive")}write(t,i,e,s="active"){(this.content||{}).enabled=!1,this.content=t.write(i.toString(),this.x+(this.size-e)/2,this.y+(this.size-e)/2,e,s)}draw(t,i,e,s){(this.content||{}).enabled=!1,this.content=t.add(this.x+(this.size-i)/2,this.y+(this.size-i)/2,i,e,s)}#k(t,i,e){this.r=t/255,this.g=i/255,this.b=e/255}}class r{#B;#C;#R;#S;#T;#E;#M;constructor(t,i,e,s){this.#B=t,this.#C=e,this.#R=this.#B.renderer.createShader("sprite","#version 300 es\nuniform mat3 view;uniform mat3 projection;uniform float imageSize;uniform sampler2D tex;in vec2 vertexPosition;in vec2 vertexTexCoord;in vec2 spritePosition;in float spriteSize;in float spriteType;in vec4 spriteColor;in float spriteAngle;out vec2 texCoord;out vec4 tint;void main(){vec2 texOffset=vec2(imageSize/float(textureSize(tex,0)),imageSize/float(textureSize(tex,0).y));texCoord=vec2(texOffset.x,0.0)*spriteType+vertexTexCoord*texOffset;tint=spriteColor;gl_Position=vec4(projection*view*vec3(vertexPosition*spriteSize+spritePosition,1.0),1.0);}","#version 300 es\nprecision highp float;uniform sampler2D tex;in vec2 texCoord;in vec4 tint;out vec4 fragmentColor;void main(){fragmentColor=texture(tex,texCoord)*tint;}"),this.#S=this.#B.renderer.createVao(),this.#B.renderer.useBuffer(this.#B.renderer.quadBuffer),this.#B.renderer.setAttribute(0,2,16,0),this.#B.renderer.setAttribute(2,2,16,8),this.#T=this.#B.renderer.createBuffer(new Float32Array,!0),this.#B.renderer.setAttribute(3,2,36,0,1),this.#B.renderer.setAttribute(4,1,36,8,1),this.#B.renderer.setAttribute(5,1,36,12,1),this.#B.renderer.setAttribute(6,4,36,16,1),this.#B.renderer.setAttribute(7,1,36,32,1),this.#E=this.#B.renderer.loadTexture(i,s),this.sprites=[],this.changed()}add(t,i,e,s,r){"center"===t&&(t=this.#B.renderer.width/2-e/2),"center"===i&&(i=this.#B.renderer.height/2-e/2);const a=new h(t,i,e,s,r);return this.sprites.push(a),this.changed(),a}changed(){this.#M=!0}update(){this.#M&&(this.sprites=this.sprites.filter(t=>t.enabled),this.#B.renderer.updateBuffer(this.#T,new Float32Array(this.sprites.map(t=>t.attributes()).flat()),!0),this.#M=!1)}draw(){this.#R.imageSize=this.#C,this.#B.renderer.draw(this.#R,this.#S,this.#E,6,this.sprites.length)}}class a{constructor(t,i,e,s,h,r,a){this.text=t,this.x=i,this.y=e,this.size=s,this.color=h,this.animations=r??[],this.delay=a??0,this.sprites=[],this.enabled=!0,this.time=0,this.begin=null}setColor(t){for(const i of this.sprites)i.setColor(t)}update(t){let i=!1;for(const e of this.animations)switch(e){case"sine":for(let i=0;i<this.sprites.length;i++){const e=this.sprites[i];e.y=e.baseY+10*Math.sin(i+t/200)}i=!0;break;case"shake":if(this.time+=1,7===this.time){this.time=0;for(let t=0;t<this.sprites.length;t++){const i=this.sprites[t];i.x=i.baseX+5*Math.random(),i.y=i.baseY+5*Math.random()}}i=!0;break;case"typing":this.begin||(this.begin=t);for(let i=0;i<this.sprites.length;i++){this.sprites[i].hidden=(t-this.begin-this.delay)/150<i}i=!0}return i}}class n extends r{#B;#P;constructor(t){super(t,"textures/font.png",16),this.#B=t,this.#P=[]}write(t,i,e,s,h="active",r,n){"center"===i&&(i=Math.floor(this.#B.renderer.width/2-Math.max(...t.split("\n").map(t=>t.length))*s/2)),"center"===e&&(e=Math.floor(this.#B.renderer.height/2-t.split("\n").length*s/2));const o=new a(t,i,e,s,h,r,n);let l=i,c=e;for(const e of t){let t;if("\n"!==e){if(e>="A"&&e<="Z"?t=e.charCodeAt(0)-"A".charCodeAt(0):e>="0"&&e<="9"?t=26+e.charCodeAt(0)-"0".charCodeAt(0):"?"===e?t=36:"!"===e?t=37:","===e?t=38:"."===e?t=39:"'"===e&&(t=40),null!=t){const i=this.add(l,c,s,t,h);i.baseX=l,i.baseY=c,o.sprites.push(i)}l+=s}else c+=s,l=i}return this.#P.push(o),this.changed(),o}clear(){for(const t of this.#P)for(const i of t.sprites)i.enabled=!1;this.#P=[],this.changed()}update(t){for(const t of this.#P.filter(t=>!t.enabled))for(const i of t.sprites)i.enabled=!1;this.#P=this.#P.filter(t=>t.enabled);for(const i of this.#P)i.update(t)&&this.changed();super.update()}}class o extends r{#B;#z;#L;#X;#U;#G;#_;#D;constructor(t,i,e,s,h,r,a,n,o,l="primary",c=0){super(t,"textures/cells.png",16,!1),this.#B=t,"center"===i&&(i=this.#B.renderer.width/2-s*(r+(a??0)*(s-1)/s)/2),"center"===e&&(e=this.#B.renderer.height/2-h*(r+(n??0)*(h-1)/h)/2),this.x=i,this.y=e,this.width=s,this.height=h,this.#z=r,this.#L=a??0,this.#X=n??0,this.#U=o,this.#G=l;for(let t=0;t<h;t++)for(let i=0;i<s;i++){const e=this.add(this.x+i*this.#O,this.y+t*this.#I,this.#z,c,l);e.setColor(l),e.gridX=i,e.gridY=t}}update(){if(!this.disabled){if(this.#B.input.moved){let t=this.#Y(this.#B.input.x,this.#B.input.y);t?.inactive&&(t=null),t===this.#_||this.#D||(this.onactivate||this.#U)&&this.#B.input.mouse&&(this.#_?.inactive||this.#_?.setColor(this.#_?.baseColor||this.#G),t?.setColor("highlight"),this.changed()),this.#_=t}this.#B.input.press&&(this.#D=this.#_,(this.onpress||this.#U)&&(this.#D?.setColor("active"),this.changed())),this.#B.input.click()&&(this.#U&&(this.#D?.setColor(this.#D?.baseColor||this.#G),this.#U(this.#_===this.#D?this.#D:null,this.#D),this.changed()),this.#D=null)}super.update()}cellAt(t,i){if(t>=0&&t<this.width&&i>=0&&i<this.height)return this.sprites[this.width*i+t]}#Y(t,i){const e=this.#W(t,i);if(e)return this.cellAt(e[0],e[1])}#W(t,i){const e=t-this.x,s=i-this.y,h=Math.trunc(e/this.#O),r=Math.trunc(s/this.#I);if(e>=0&&s>=0&&e-h*this.#O<this.#z&&s-r*this.#I<this.#z&&h>=0&&h<this.width&&r>=0&&r<this.height)return[h,r]}get#O(){return this.#z+this.#L}get#I(){return this.#z+this.#X}}class l{#B;#F;#N;#K;#j;#H;constructor(t,i){this.#B=t,this.#F=i,this.#K=new o(this.#B,this.#B.renderer.width-74,10,1,1,64,0,0,t=>this.#V(t)),this.#j=this.#K.sprites[0],this.#q()}update(){return this.#H?(this.#B.text.clear(),this.#j.content.enabled=!1,new f(this.#B)):(this.#N.update(),this.#K.update(),this)}draw(){this.#N.draw(),this.#K.draw()}#q(){this.#B.text.clear(),this.#N=new this.#F(this.#B,()=>this.#Q(),()=>this.#$()),this.#j=this.#K.sprites[0],this.#j.write(this.#B.text,"X",32,"active")}#Q(){this.#B.scheduleTimer(500,()=>{this.#B.minigamesWon.add(this.#F),this.#H=!0})}#$(){this.#B.scheduleTimer(500,()=>{this.#q()})}#V(t){t===this.#j&&(this.#H=!0)}}class c{#B;#J;#Z;#tt;#it;#et;#st;#ht;#K;#rt;#at;#nt;#ot;constructor(t,i,e){this.#B=t,this.#J=i,this.#Z=e,this.#tt=this.#B.renderer.horizontal?20:10,this.#it=this.#B.renderer.horizontal?10:20,this.#et=10,this.#st=26;const s=Math.floor(Math.min((this.#B.renderer.width-20)/this.#tt-4*(this.#tt-1)/this.#tt,(this.#B.renderer.height-110)/this.#it-4*(this.#it-1)/this.#it));this.#ht=new o(this.#B,"center",100,this.#tt,this.#it,s,4,4,t=>this.#lt(t)),this.#K=new o(this.#B,10,10,2,1,64,10,0,t=>this.#V(t)),this.#rt=this.#K.sprites[0],this.#rt.write(this.#B.text,"O",30,"active"),this.#at=this.#K.sprites[1],this.#at.write(this.#B.text,"X",30,"active"),this.#ct("dig"),this.#B.text.write("MEOWSWEEPER","center",10,48,"inactive",["sine"])}update(){(this.#B.input.keyPresses.KeyA||this.#B.input.keyPresses.ArrowLeft)&&this.#ct("dig"),(this.#B.input.keyPresses.KeyD||this.#B.input.keyPresses.ArrowRight)&&this.#ct("flag"),this.#ht.update(),this.#K.update()}draw(){this.#ht.draw(),this.#K.draw()}#lt(t){if(t)switch(this.#nt){case"dig":this.#ot||this.#gt(t),this.#dt(t.gridX,t.gridY),t.mine&&(this.#ht.disabled=!0,this.#B.scheduleTimer(2e3,()=>{for(const t of this.#ht.sprites)(t.content||{}).enabled=!1;this.#B.text.changed(),this.#Z&&this.#Z()}));break;case"flag":t.flagged?(t.flagged=!1,t.content.enabled=!1,this.#B.text.changed()):(t.flagged=!0,t.write(this.#B.text,"X",this.#st,"highlight"))}}#gt(t){const i=this.#ht.sprites.filter(i=>i!==t&&(Math.abs(i.gridX-t.gridX)>1||Math.abs(i.gridY-t.gridY)>1));for(let t=0;t<this.#et;t++){const t=Math.floor(Math.random()*i.length),e=i[t];i.splice(t,1),e.mine=!0}for(let t=0;t<this.#ht.height;t++)for(let i=0;i<this.#ht.width;i++){let e=this.#ht.cellAt(i,t);if(!e.mine){e.mines=0;for(let s=-1;s<=1;s++)for(let h=-1;h<=1;h++)this.#ht.cellAt(i+h,t+s)?.mine&&(e.mines+=1)}}this.#ot=!0}#dt(t,i){this.#B.shake(200);const e=this.#ht.cellAt(t,i);if(e?.flagged&&(e.flagged=!1,e.content.enabled=!1),e?.enabled&&!e?.opened)if(e.opened=!0,e.activate(!1),0===e.mines)e.hidden=!0,this.#dt(t,i-1),this.#dt(t,i+1),this.#dt(t-1,i),this.#dt(t+1,i);else if(e.mine)for(const t of this.#ht.sprites.filter(t=>t.mine))t.activate(!1),t.write(this.#B.text,"X",this.#st,"inactive10");else e.write(this.#B.text,e.mines,this.#st,`inactive${e.mines}`);this.#ht.sprites.filter(t=>!t.opened).every(t=>t.mine)&&this.#J&&this.#J()}#V(t){t===this.#at?this.#ct("flag"):t===this.#rt&&this.#ct("dig")}#ct(t){this.#nt=t,this.#rt.activate("dig"!==this.#nt),this.#at.activate("flag"!==this.#nt),this.#K.changed()}}class g{#B;#J;#Z;#ht;#mt;#ut;#pt;constructor(t,i,e){this.#B=t,this.#J=i,this.#Z=e,this.#ht=new o(this.#B,"center","center",3,3,96,20,20,t=>this.#lt(t)),this.#mt=new r(this.#B,"textures/sprites.png",16,!1),this.#B.text.write("PAW PAW TOE","center",10,48,"inactive",["sine"])}update(){this.#ht.update(),this.#mt.update()}draw(){this.#ht.draw(),this.#mt.draw()}#lt(t){t&&!t.symbol&&(this.#ft(t,"X"),this.#ht.disabled=!0,this.#ut=this.#B.scheduleTimer(1e3,()=>{if(!this.#pt){const t=this.#ht.sprites.filter(t=>!t.symbol);t.length>0&&(this.#ft(t[Math.floor(Math.random()*t.length)],"O"),this.#ht.disabled=!1,this.#ht.changed())}}))}#ft(t,i){this.#pt||(t.symbol=i,t.activate(!1),t.draw(this.#mt,42,0,"X"===i?"blackcat":"orangecat"),this.#wt())}#wt(){for(let t=0;t<3;t++){const i=new Map;for(let e=0;e<3;e++){const s=this.#ht.cellAt(e,t);i.set(s.symbol,(i.get(s.symbol)||0)+1)}if(3===i.get("X"))return this.#Q("X");if(3===i.get("O"))return this.#Q("O")}for(let t=0;t<3;t++){const i=new Map;for(let e=0;e<3;e++){const s=this.#ht.cellAt(t,e);i.set(s.symbol,(i.get(s.symbol)||0)+1)}if(3===i.get("X"))return this.#Q("X");if(3===i.get("O"))return this.#Q("O")}return"X"===this.#ht.cellAt(0,0).symbol&&"X"===this.#ht.cellAt(1,1).symbol&&"X"===this.#ht.cellAt(2,2).symbol?this.#Q("X"):"O"===this.#ht.cellAt(0,0).symbol&&"O"===this.#ht.cellAt(1,1).symbol&&"O"===this.#ht.cellAt(2,2).symbol?this.#Q("O"):"X"===this.#ht.cellAt(2,0).symbol&&"X"===this.#ht.cellAt(1,1).symbol&&"X"===this.#ht.cellAt(0,2).symbol?this.#Q("X"):"O"===this.#ht.cellAt(2,0).symbol&&"O"===this.#ht.cellAt(1,1).symbol&&"O"===this.#ht.cellAt(0,2).symbol?this.#Q("O"):void 0}#Q(t){this.#pt=!0,this.#ht.disabled=!0,(this.#ut||{}).disabled=!0,"X"===t?this.#J&&this.#J():"O"===t&&this.#Z&&this.#Z()}}class d{#B;#J;#mt;#bt;#z;#K;#xt;constructor(t,i){this.#B=t,this.#J=i,this.#mt=new r(this.#B,"textures/sprites.png",16,!0),this.#bt=[];const e=Math.floor(Math.min((this.#B.renderer.width-20)/3-32/3,(this.#B.renderer.height-200)/3-32/3));this.#z=Math.floor(Math.min((e-0)/3-10/3,(e-0)/3-10/3));const s=this.#B.renderer.width/2-3*(e+32/3)/2;for(let t=0;t<3;t++)for(let i=0;i<3;i++){const h=new o(this.#B,s+i*(e+16),100+t*(e+16),3,3,this.#z,5,5,t=>this.#lt(t));this.#bt.push(h)}this.#K=new o(this.#B,"center",this.#B.renderer.height-74,10,1,64,10,0,t=>this.#V(t));for(let t=1;t<=10;t++){const i=this.#K.sprites[t-1];i.draw(this.#mt,2*this.#z/3,t+5),i.digit=t<=9?t:null}this.#vt(),this.#At(1),this.#B.text.write("SUDOCAT","center",10,48,"inactive",["sine"])}update(){for(let t=1;t<=9;t++)this.#B.input.keyPresses[`Digit${t}`]&&this.#At(t);(this.#B.input.keyPresses.KeyA||this.#B.input.keyPresses.ArrowLeft)&&this.#xt>1&&this.#At(this.#xt-1),(this.#B.input.keyPresses.KeyD||this.#B.input.keyPresses.ArrowRight)&&this.#xt<9&&this.#At(this.#xt+1),(this.#B.input.keyPresses.KeyX||this.#B.input.keyPresses.Digit0)&&this.#At(null),this.#mt.update();for(const t of this.#bt)t.update();this.#K.update()}draw(){for(const t of this.#bt)t.draw();this.#K.draw(),this.#mt.draw()}#yt(t,i){return this.#bt[3*Math.floor(i/3)+Math.floor(t/3)]}#kt(t,i){return this.#yt(t,i).cellAt(t%3,i%3)}#vt(){const t=[[6,8,0,1,0,0,0,9,0,0,3,4,5,0,8,0,2,0,2,1,0,0,6,0,3,0,0,5,0,0,4,0,7,0,0,9,3,4,2,9,0,0,0,0,6,0,0,7,0,8,0,5,0,0,9,2,0,8,0,0,0,5,3,0,0,3,2,0,0,9,1,8,0,0,0,3,0,0,0,6,7]],i=t[Math.floor(Math.random()*t.length)];for(let t=0;t<9;t++)for(let e=0;e<9;e++){const s=i[9*t+e];if(0!==s){const i=this.#kt(e,t);i.activate(!1),i.digit=s,i.draw(this.#mt,2*this.#z/3,s+5)}}}#lt(t){t&&(t.digit=this.#xt,(t.content||{}).enabled=!1,this.#xt&&t.draw(this.#mt,2*this.#z/3,this.#xt+5),this.#Bt()&&this.#J&&this.#J(),this.#B.text.changed(),this.#mt.changed())}#Bt(){let t=!0;this.#Ct();for(let i=0;i<9;i++)t&=this.#Rt(i),t&=this.#St(i),t&=this.#wt(i);return t}#Ct(){for(let t=0;t<9;t++)for(let i=0;i<9;i++){const e=this.#kt(i,t);e.inactive||e.setBaseColor("primary")}for(let t=0;t<9;t++)this.#bt[t].changed()}#Rt(t){let i=!0;const e=new Map;for(let i=0;i<9;i++){const s=this.#kt(t,i);e.set(s.digit,(e.get(s.digit)||0)+1)}for(const[s,h]of e.entries())if(null==s)i=!1;else if(h>1){i=!1;for(let i=0;i<9;i++){const e=this.#kt(t,i);e.inactive||e.digit!=s||(e.setBaseColor("active"),this.#yt(t,i).changed())}}return i}#St(t){let i=!0;const e=new Map;for(let i=0;i<9;i++){const s=this.#kt(i,t);e.set(s.digit,(e.get(s.digit)||0)+1)}for(const[s,h]of e.entries())if(null==s)i=!1;else if(h>1){i=!1;for(let i=0;i<9;i++){const e=this.#kt(i,t);e.inactive||e.digit!=s||(e.setBaseColor("active"),this.#yt(i,t).changed())}}return i}#wt(t){let i=!0;const e=new Map,s=this.#bt[t];for(let t=0;t<9;t++){const i=s.sprites[t];e.set(i.digit,(e.get(i.digit)||0)+1)}for(const[t,h]of e.entries())if(null==t)i=!1;else if(h>1){i=!1;for(let i=0;i<9;i++){const e=s.sprites[i];e.inactive||e.digit!=t||(e.setBaseColor("active"),s.changed())}}return i}#V(t){t&&this.#At(t.digit)}#At(t){this.#xt=t;for(const t of this.#K.sprites)t.activate(!0);this.#K.sprites[null!=t?t-1:9].activate(!1),this.#K.changed()}}class m{#B;#J;#z;#ht;#mt;#Tt;#Et;#Mt;#ut;constructor(t,i){this.#B=t,this.#J=i;this.#z=Math.floor(Math.min((this.#B.renderer.width-20)/6-80/6,(this.#B.renderer.height-110)/5-12.8)),this.#ht=new o(this.#B,"center",100,6,5,this.#z,16,16,t=>this.#lt(t)),this.#mt=new r(this.#B,"textures/sprites.png",16,!0);const e=this.#ht.sprites.slice();for(let t=0;t<15;t++){const i=Math.floor(Math.random()*e.length),s=e[i];e.splice(i,1);const h=Math.floor(Math.random()*e.length),r=e[h];e.splice(h,1),s.secret=t,r.secret=t}this.#B.text.write("MEOWMORY","center",10,48,"inactive",["sine"])}update(){this.#ht.update(),this.#mt.update()}draw(){this.#ht.draw(),this.#mt.draw()}#lt(t){t&&!t.open&&(this.#Et&&this.#Mt&&this.#Pt(),t.open=!0,t.draw(this.#mt,2*this.#z/3,t.secret,t.secret<5?"tabbycat":null),t.setBaseColor("active"),this.#Tt?(t.secret===this.#Tt.secret?(t.found=!0,t.activate(!1),this.#Tt.found=!0,this.#Tt.activate(!1),this.#ht.sprites.every(t=>t.found)&&this.#J&&this.#J()):(this.#Et=this.#Tt,this.#Mt=t,this.#ut=this.#B.scheduleTimer(1e3,()=>this.#Pt())),this.#Tt=!1):this.#Tt=t)}#Pt(){(this.#ut||{}).disabled=!0,this.#Et.open=!1,this.#Et.content.enabled=!1,this.#Et.setBaseColor("primary"),this.#Mt.open=!1,this.#Mt.content.enabled=!1,this.#Mt.setBaseColor("primary"),this.#ht.changed(),this.#B.text.changed(),this.#mt.changed(),this.#Et=null,this.#Mt=null}}class u{#B;#J;#tt;#it;#ht;#zt;constructor(t,i){this.#B=t,this.#J=i,this.#tt=10,this.#it=10;const e=Math.floor(Math.min((this.#B.renderer.width-20)/this.#tt,(this.#B.renderer.height-110)/this.#it));this.#ht=new o(this.#B,"center",100,this.#tt,this.#it,e,0,0,t=>this.#lt(t));for(let t=0;t<this.#tt*this.#it;t++){const i=this.#ht.sprites[t];i.index=t,i.write(this.#B.text,t,12,"highlight")}for(let t=0;t<this.#tt*this.#it/2;t++){const t=this.#ht.sprites[Math.floor(Math.random()*this.#ht.sprites.length)],i=this.#ht.sprites[Math.floor(Math.random()*this.#ht.sprites.length)];this.#Lt(t,i)}this.#B.text.write("JIGSPAW","center",10,48,"inactive",["sine"])}update(){this.#ht.update()}draw(){this.#ht.draw()}#lt(t){t&&(this.#zt?(this.#zt.activate(!0),this.#Lt(this.#zt,t),this.#zt=null,this.#wt()):(t.activate(!1),this.#zt=t))}#Lt(t,i){const e=t.index;t.index=i.index,i.index=e,t.write(this.#B.text,t.index,12,"highlight"),i.write(this.#B.text,i.index,12,"highlight")}#wt(){for(let t=0;t<this.#tt*this.#it;t++)if(this.#ht.sprites[t].index!==t)return;this.#ht.disabled=!0,this.#J&&this.#J()}}class p{#B;#J;#Xt;#Ut;#Gt;#_t;#tt;#it;#z;#ht;#K;#Dt;#at;#nt;constructor(t,i){this.#B=t,this.#J=i,this.#Xt=[[0],[1,1],[2,2],[5],[2,1,2,1],[5,2],[3,1],[6,2],[1,5,1],[8],[2,4]],this.#Ut=[[1,2],[4,1,1],[3,6],[7],[3,6],[4,4],[1,3],[2],[3,1],[2,3]],this.#Gt=Math.max(...this.#Xt.map(t=>t.length)),this.#_t=Math.max(...this.#Ut.map(t=>t.length)),this.#tt=this.#Ut.length+this.#Gt,this.#it=this.#Xt.length+this.#_t;this.#z=Math.floor(Math.min((this.#B.renderer.width-20)/this.#tt-2*(this.#tt-1)/this.#tt,(this.#B.renderer.height-110)/this.#it-2*(this.#it-1)/this.#it)),this.#ht=new o(this.#B,"center",100,this.#tt,this.#it,this.#z,2,2,t=>this.#lt(t));for(let t=0;t<this.#tt;t++)for(let i=0;i<this.#_t;i++){const e=this.#ht.cellAt(t,i);t<this.#Gt||i<this.#_t-this.#Ut[t-this.#Gt].length?e.hidden=!0:(e.write(this.#B.text,this.#Ut[t-this.#Gt][i-(this.#_t-this.#Ut[t-this.#Gt].length)],2*this.#z/3,"highlight"),e.activate(!1))}for(let t=0;t<this.#tt;t++)for(let i=0;i<this.#Gt;i++){const e=this.#ht.cellAt(i,t);t<this.#_t||i<this.#Gt-this.#Xt[t-this.#_t].length?e.hidden=!0:(e.write(this.#B.text,this.#Xt[t-this.#_t][i-(this.#Gt-this.#Xt[t-this.#_t].length)],2*this.#z/3,"highlight"),e.activate(!1))}this.#K=new o(this.#B,10,10,2,1,64,10,0,t=>this.#V(t)),this.#Dt=this.#K.sprites[0],this.#Dt.write(this.#B.text,"O",30,"active"),this.#at=this.#K.sprites[1],this.#at.write(this.#B.text,"X",30,"active"),this.#ct("mark"),this.#ht.changed(),this.#B.text.write("MEOWSTERPIECE","center",10,48,"inactive",["sine"])}update(){(this.#B.input.keyPresses.KeyA||this.#B.input.keyPresses.ArrowLeft)&&this.#ct("mark"),(this.#B.input.keyPresses.KeyD||this.#B.input.keyPresses.ArrowRight)&&this.#ct("flag"),this.#ht.update(),this.#K.update()}draw(){this.#ht.draw(),this.#K.draw()}#lt(t){if(t){switch((t.content||{}).enabled=!1,this.#nt){case"mark":"marked"!==t.state?(t.state="marked",t.setBaseColor("active")):(t.state=null,t.setBaseColor("primary"));break;case"flag":t.setBaseColor("primary"),"flagged"!==t.state?(t.state="flagged",t.write(this.#B.text,"X",2*this.#z/3,"highlight")):t.state=null}this.#B.text.changed(),this.#wt()}}#V(t){t===this.#at?this.#ct("flag"):t===this.#Dt&&this.#ct("mark")}#ct(t){this.#nt=t,this.#Dt.activate("mark"!==this.#nt),this.#at.activate("flag"!==this.#nt),this.#K.changed()}#wt(){let t=0;for(let i=this.#Gt;i<this.#tt;i++){for(let t=0;t<this.#_t;t++)this.#ht.cellAt(i,t).setBaseColor("inactive");let e=0,s=0,h=0;for(let t=this.#_t;t<this.#it;t++)"marked"===this.#ht.cellAt(i,t).state&&(e+=1),"marked"===this.#ht.cellAt(i,t).state&&t!==this.#it-1||((e>0||t===this.#it-1)&&s<this.#Ut[i-this.#Gt].length&&(e>this.#Ut[i-this.#Gt][s]?this.#ht.cellAt(i,s+(this.#_t-this.#Ut[i-this.#Gt].length)).setBaseColor("highlight"):e===this.#Ut[i-this.#Gt][s]&&(this.#ht.cellAt(i,s+(this.#_t-this.#Ut[i-this.#Gt].length)).setBaseColor("primary3"),h+=1),s+=1),e=0);h===this.#Ut[i-this.#Gt].length&&(t+=1)}for(let i=this.#_t;i<this.#it;i++){for(let t=0;t<this.#Gt;t++)this.#ht.cellAt(t,i).setBaseColor("inactive");let e=0,s=0,h=0;for(let t=this.#Gt;t<this.#tt;t++)"marked"===this.#ht.cellAt(t,i).state&&(e+=1),"marked"===this.#ht.cellAt(t,i).state&&t!==this.#tt-1||((e>0||t===this.#tt-1)&&s<this.#Xt[i-this.#_t].length&&(e>this.#Xt[i-this.#_t][s]?this.#ht.cellAt(s+(this.#Gt-this.#Xt[i-this.#_t].length),i).setBaseColor("highlight"):e===this.#Xt[i-this.#_t][s]&&(this.#ht.cellAt(s+(this.#Gt-this.#Xt[i-this.#_t].length),i).setBaseColor("primary3"),h+=1),s+=1),e=0);h===this.#Xt[i-this.#_t].length&&(t+=1)}t===this.#tt-this.#Gt+(this.#it-this.#_t)&&this.#J&&this.#J()}}class f{#B;#ht;#K;#mt;#Ot;constructor(t){this.#B=t,this.#ht=new o(this.#B,"center",100,6,12,128,0,0,null,"",2),this.#K=new o(this.#B,"center",132,3,4,128,64,64,t=>this.#V(t),"",1),this.#mt=new r(this.#B,"textures/sprites.png",16,!1);const i=[g,c,m,d,u,p],e=[73,8,73,8,73,73],s=[73,73,73,73,73,73],h=[4,2,3,3,4,2],a=["orangecat","whitecat","tabbycat","silvercat","blackcat","orangecat"];for(let t=0;t<12;t++)i[t]?(this.#K.sprites[t].minigame=i[t],this.#B.minigamesWon.has(i[t])&&(this.#K.sprites[t].activate(!1),e[t]=39,s[t]=39,h[t]=1),this.#mt.add(this.#K.sprites[t].x+e[t],this.#K.sprites[t].y+s[t],50,h[t],a[t])):this.#K.sprites[t].activate(!1);this.#B.text.write("HELP THE OTHER CATS\nIN THE BUILDING!","center",10,32,"active",["typing","shake"]);for(let t=0;t<this.#K.sprites.length;t++){const i=this.#K.sprites[t];this.#B.minigamesWon.has(i.minigame)&&i.activate(!1)}}update(){return this.#ht.update(),this.#mt.update(),this.#Ot?this.#Ot:(this.#K.update(),this)}draw(){this.#ht.draw(),this.#K.draw(),this.#mt.draw()}#V(t){t&&(this.#Ot=new l(this.#B,t.minigame))}}const w=new class{#ot;#It;#mt;#Yt;#Wt;#Ft;constructor(){this.renderer=new e(()=>{this.#ot||(this.#Wt=new f(this),this.#ot=!0)}),this.input=new s(this),this.#It=[],this.text=new n(this),this.#mt=new r(this,"textures/sprites.png",16),this.#Yt=this.#mt.add(0,0,26,0,"blackcat"),this.#Yt.hidden=!0,this.minigamesWon=new Set}step(t){this.timestamp=t,this.#Nt(t),this.#Kt()}scheduleTimer(t,i,e){const s={start:this.timestamp??0,delay:t,onexpire:i,repeat:e};return this.#It.push(s),s}shake(t){navigator.vibrate(t),this.#Ft=!0,this.scheduleTimer(t,()=>this.#Ft=!1)}#Nt(t){this.#Ft&&(this.renderer.view[6]=5*Math.random(),this.renderer.view[7]=5*Math.random()),this.input.update(),this.input.mouse&&this.#Yt.hidden&&(this.#Yt.hidden=!1,this.#mt.changed()),this.input.moved&&(this.#Yt.x=this.input.x-6,this.#Yt.y=this.input.y-6,this.#mt.changed()),this.#jt(t),this.#Wt&&(this.#Wt=this.#Wt.update()),this.text.update(t),this.#mt.update()}#jt(t){for(const i of this.#It)t>=i.start+i.delay&&!i.disabled&&(i.repeat?i.start=t:i.expired=!0,i.onexpire&&i.onexpire());this.#It.some(t=>t.expired||t.disabled)&&(this.#It=this.#It.filter(t=>!t.expired&&!t.disabled))}#Kt(){this.renderer.clear(),this.#Wt&&this.#Wt.draw(),this.text.draw(),this.#mt.draw()}};requestAnimationFrame(function t(i){requestAnimationFrame(t),w.step(i)})}();
//# sourceMappingURL=bundle.js.map
