!function(){"use strict";class t extends Float32Array{static identity(){return new t([1,0,0,0,1,0,0,0,1])}static ortho(e,i,s,h){return new t([2/(i-e),0,0,0,2/(h-s),0,-(i+e)/(i-e),-(h+s)/(h-s),1])}}class e{#t;#e;#i;#s;#h;constructor(t,e,i){const s=this.#r(t,t.VERTEX_SHADER,e),h=this.#r(t,t.FRAGMENT_SHADER,i);this.#t=t.createProgram(),t.attachShader(this.#t,s),t.attachShader(this.#t,h),t.bindAttribLocation(this.#t,0,"vertexPosition"),t.bindAttribLocation(this.#t,1,"vertexColor"),t.bindAttribLocation(this.#t,2,"vertexTexCoord"),t.bindAttribLocation(this.#t,3,"spritePosition"),t.bindAttribLocation(this.#t,4,"spriteSize"),t.bindAttribLocation(this.#t,5,"spriteType"),t.bindAttribLocation(this.#t,6,"spriteColor"),t.bindAttribLocation(this.#t,7,"spriteAngle"),t.linkProgram(this.#t),this.#e=t.getUniformLocation(this.#t,"view"),this.#i=t.getUniformLocation(this.#t,"projection"),this.#s=t.getUniformLocation(this.#t,"tex"),this.#h=t.getUniformLocation(this.#t,"imageSize"),console.log(t.getProgramInfoLog(this.#t))}use(t,e,i){t.useProgram(this.#t),this.setUniforms(t,e,i)}setUniforms(t,e,i){null!=this.#e&&t.uniformMatrix3fv(this.#e,!1,e),null!=this.#i&&t.uniformMatrix3fv(this.#i,!1,i),null!=this.#s&&t.uniform1i(this.#s,0),null!=this.#h&&t.uniform1f(this.#h,16)}#r(t,e,i){const s=t.createShader(e);return t.shaderSource(s,i),t.compileShader(s),console.log(t.getShaderInfoLog(s)),s}}class i{#a;#n;#o;#c;#l;#g;#d;#m;constructor(e){this.#a=e,document.body.style.margin="0",document.body.style.padding="0",this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.canvas.style.width="100dvw",this.canvas.style.height="100dvh",this.canvas.style.cursor="none",this.canvas.style.touchAction="none",new ResizeObserver(()=>{this.w=this.canvas.clientWidth,this.h=this.canvas.clientHeight,this.canvas.width=this.w,this.canvas.height=this.h,this.horizontal=this.w>this.h,this.#n.viewport(0,0,this.w,this.h),this.projection=t.ortho(0,this.w,this.h,0),this.#a&&this.#a()}).observe(this.canvas,{box:"content-box"}),document.body.appendChild(this.canvas),this.#n=this.canvas.getContext("webgl2"),this.#n.viewport(0,0,this.canvas.width,this.canvas.height),this.#n.clearColor(.68,.68,.94,1),this.#n.pixelStorei(this.#n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.#n.enable(this.#n.BLEND),this.#n.blendFunc(this.#n.ONE,this.#n.ONE_MINUS_SRC_ALPHA),this.quadBuffer=this.#u(),this.#o=new Map,this.#c=new Map,this.#l=[],this.view=t.identity(),this.projection=t.ortho(0,0,this.canvas.width,this.canvas.height)}createShader(t,i,s){const h=this.#o.get(t);if(h)return h;const r=new e(this.#n,i,s);return this.#o.set(t,r),r}createVao(){const t=this.#n.createVertexArray();return this.#n.bindVertexArray(t),t}createBuffer(t,e){const i=this.#n.createBuffer();return this.updateBuffer(i,t,e),i}updateBuffer(t,e,i){this.useBuffer(t),this.#n.bufferData(this.#n.ARRAY_BUFFER,e,i?this.#n.DYNAMIC_DRAW:this.#n.STATIC_DRAW)}useBuffer(t){this.#n.bindBuffer(this.#n.ARRAY_BUFFER,t)}setAttribute(t,e,i,s,h){this.#n.vertexAttribPointer(t,e,this.#n.FLOAT,!1,i,s),this.#n.enableVertexAttribArray(t),null!=h&&this.#n.vertexAttribDivisor(t,h)}loadTexture(t,e){const i=this.#c.get(`${t}_${e}`);if(i)return i;const s=this.#n.createTexture();this.#p(s,null,e);const h=this.#l.length,r=new Image;return r.src=t,r.onload=()=>this.#p(s,h,e),this.#c.set(`${t}_${e}`,s),this.#l[h]=r,s}clear(){this.#n.clear(this.#n.COLOR_BUFFER_BIT)}draw(t,e,i,s,h){t!==this.#g?(t.use(this.#n,this.view,this.projection),this.#g=t):this.#g.setUniforms(this.#n,this.view,this.projection),e!==this.#d&&(this.#n.bindVertexArray(e),this.#d=e),i!==this.#m&&(this.#n.activeTexture(this.#n.TEXTURE0),this.#n.bindTexture(this.#n.TEXTURE_2D,i),this.#m=i),null!=h?this.#n.drawArraysInstanced(this.#n.TRIANGLES,0,s,h):this.#n.drawArrays(this.#n.TRIANGLES,0,s)}#u(){return this.createBuffer(new Float32Array([0,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,1,1,1]),!1)}#p(t,e,i){this.#n.activeTexture(this.#n.TEXTURE0),this.#n.bindTexture(this.#n.TEXTURE_2D,t),null!=e?this.#n.texImage2D(this.#n.TEXTURE_2D,0,this.#n.RGBA,this.#n.RGBA,this.#n.UNSIGNED_BYTE,this.#l[e]):this.#n.texImage2D(this.#n.TEXTURE_2D,0,this.#n.RGBA,1,1,0,this.#n.RGBA,this.#n.UNSIGNED_BYTE,new Uint8Array([255,0,255,255])),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_WRAP_S,this.#n.CLAMP_TO_EDGE),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_WRAP_T,this.#n.CLAMP_TO_EDGE),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_MIN_FILTER,i?this.#n.LINEAR:this.#n.NEAREST),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_MAG_FILTER,i?this.#n.LINEAR:this.#n.NEAREST)}}class s{#f;#w;#b;#x;#A;#E;constructor(t){this.#f={},this.#w={},t.renderer.canvas.addEventListener("pointermove",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY}),t.renderer.canvas.addEventListener("pointerdown",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#b=!0}),t.renderer.canvas.addEventListener("pointerup",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#x=!0}),addEventListener("keydown",t=>{this.#f[t.code]=!0}),addEventListener("keyup",t=>{this.#w[t.code]=!0})}update(){this.x===this.#A&&this.y===this.#E||(this.#A=this.x,this.#E=this.y,this.moved=!0),this.press=!1,this.#b&&(this.press=!0,this.#b=!1),this.release=!1,this.#x&&(this.release=!0,this.#x=!1),this.keyPresses={};for(const[t,e]of Object.entries(this.#f))e&&(this.keyPresses[t]=!0,this.#f[t]=!1);this.keyReleases={};for(const[t,e]of Object.entries(this.#w))e&&(this.keyReleases[t]=!0,this.#w[t]=!1);this.clickRead=!1}click(){return!this.clickRead&&(this.mouse&&this.release||!this.mouse&&this.press)}}class h{constructor(t,e,i,s,h){this.x=t,this.y=e,this.size=i,this.type=s,this.angle=0,this.enabled=!0,this.hidden=!1,this.a=1,this.setColor(h)}attributes(){return[this.x,this.y,this.size,this.type,this.r,this.g,this.b,this.hidden?0:this.a,this.angle]}setBaseColor(t){this.baseColor=t,this.setColor(t)}setColor(t){switch(t){case"primary":this.r=.85,this.g=.86,this.b=1;break;case"background":this.r=.68,this.g=.68,this.b=.94;case"highlight":this.r=.76,this.g=.55,this.b=.58;break;case"active":this.r=.65,this.g=.4,this.b=.44;break;case"inactive":this.r=.34,this.g=.34,this.b=.46;break;case"blackcat":this.r=.33,this.g=.33,this.b=.33;break;case"orangecat":this.r=.7,this.g=.45,this.b=.08;break;case"whitecat":this.r=.9,this.g=.9,this.b=.9;break;case"tabbycat":this.r=.64,this.g=.56,this.b=.38;break;case"silvercat":this.r=.6,this.g=.6,this.b=.6;break;case"black":this.r=0,this.g=0,this.b=0;break;case"primary1":this.#k(144,168,195);break;case"primary2":this.#k(70,157,137);break;case"primary3":this.#k(181,201,154);break;case"primary4":this.#k(0,166,251);break;case"primary5":this.#k(76,201,240);break;case"primary6":this.#k(244,202,224);break;case"primary7":this.#k(229,0,164);break;case"primary8":this.#k(242,0,137);break;case"primary9":this.#k(255,255,255);break;case"primary10":this.r=1,this.g=.8,this.b=.94;break;case"inactive1":this.#k(144,168,195);break;case"inactive2":this.#k(70,157,137);break;case"inactive3":this.#k(181,201,154);break;case"inactive4":this.#k(0,166,251);break;case"inactive5":this.#k(76,201,240);break;case"inactive6":this.#k(244,202,224);break;case"inactive7":this.#k(229,0,164);break;case"inactive8":this.#k(242,0,137);break;case"inactive9":this.#k(255,255,255);break;case"inactive10":this.r=1,this.g=.8,this.b=.94;break;default:this.r=1,this.g=1,this.b=1}}activate(t){this.inactive=!t,this.setColor(t?this.baseColor||"primary":"inactive")}write(t,e,i,s="active",h=null,r=null){(this.content||{}).enabled=!1,this.content=t.write(e.toString(),this.x+(this.size-i)/2,this.y+(this.size-i)/2,i,s,h,r)}draw(t,e,i,s){(this.content||{}).enabled=!1,this.content=t.add(this.x+(this.size-e)/2,this.y+(this.size-e)/2,e,i,s)}#k(t,e,i){this.r=t/255,this.g=e/255,this.b=i/255}}class r{#v;#y;#T;#B;#C;#R;constructor(t,e=!1,i="textures/sprites.png"){this.#v=t,this.#y=this.#v.renderer.createShader("sprite","#version 300 es\nuniform mat3 view;uniform mat3 projection;uniform float imageSize;uniform sampler2D tex;in vec2 vertexPosition;in vec2 vertexTexCoord;in vec2 spritePosition;in float spriteSize;in float spriteType;in vec4 spriteColor;in float spriteAngle;out vec2 texCoord;out vec4 tint;void main(){vec2 texOffset=vec2(imageSize/float(textureSize(tex,0)),imageSize/float(textureSize(tex,0).y));texCoord=vec2(texOffset.x,0.0)*spriteType+vertexTexCoord*texOffset;tint=spriteColor;tint.rgb*=tint.a;gl_Position=vec4(projection*view*vec3(vertexPosition*spriteSize+spritePosition,1.0),1.0);}","#version 300 es\nprecision highp float;uniform sampler2D tex;in vec2 texCoord;in vec4 tint;out vec4 fragmentColor;void main(){fragmentColor=texture(tex,texCoord)*tint;}"),this.#T=this.#v.renderer.createVao(),this.#v.renderer.useBuffer(this.#v.renderer.quadBuffer),this.#v.renderer.setAttribute(0,2,16,0),this.#v.renderer.setAttribute(2,2,16,8),this.#B=this.#v.renderer.createBuffer(new Float32Array,!0),this.#v.renderer.setAttribute(3,2,36,0,1),this.#v.renderer.setAttribute(4,1,36,8,1),this.#v.renderer.setAttribute(5,1,36,12,1),this.#v.renderer.setAttribute(6,4,36,16,1),this.#v.renderer.setAttribute(7,1,36,32,1),this.#C=this.#v.renderer.loadTexture(i,e),this.sprites=[],this.changed()}add(t,e,i,s,r){"center"===t&&(t=this.#v.renderer.w/2-i/2),"center"===e&&(e=this.#v.renderer.h/2-i/2);const a=new h(t,e,i,s,r);return this.sprites.push(a),this.changed(),a}changed(){this.#R=!0}update(){this.#R&&(this.sprites=this.sprites.filter(t=>t.enabled),this.#v.renderer.updateBuffer(this.#B,new Float32Array(this.sprites.map(t=>t.attributes()).flat()),!0),this.#R=!1)}draw(){this.#v.renderer.draw(this.#y,this.#T,this.#C,6,this.sprites.length)}}class a{constructor(t,e,i,s,h,r,a){this.text=t,this.x=e,this.y=i,this.size=s,this.color=h,this.animations=r??[],this.delay=a??0,this.sprites=[],this.enabled=!0,this.time=0,this.begin=null}setColor(t){for(const e of this.sprites)e.setColor(t)}update(t){let e=!1;for(const i of this.animations)switch(i){case"sine":for(let e=0;e<this.sprites.length;e++){const i=this.sprites[e];i.y=i.baseY+10*Math.sin(e+t/200)}e=!0;break;case"shake":if(this.time+=1,7===this.time){this.time=0;for(let t=0;t<this.sprites.length;t++){const e=this.sprites[t];e.x=e.baseX+5*Math.random(),e.y=e.baseY+5*Math.random()}}e=!0;break;case"typing":this.begin||(this.begin=t);for(let e=0;e<this.sprites.length;e++){this.sprites[e].hidden=(t-this.begin-this.delay)/150<e}e=!0}return e}}class n extends r{#v;#S;constructor(t){super(t,!1,"textures/font.png"),this.#v=t,this.#S=[]}write(t,e,i,s,h="active",r=null,n=null){"center"===e&&(e=Math.floor(this.#v.renderer.w/2-Math.max(...t.split("\n").map(t=>t.length))*s/2)),"center"===i&&(i=Math.floor(this.#v.renderer.h/2-t.split("\n").length*s/2));const o=new a(t,e,i,s,h,r,n);let c=e,l=i;for(const i of t){let t;if("\n"!==i){if(i>="A"&&i<="Z"?t=i.charCodeAt(0)-"A".charCodeAt(0):i>="0"&&i<="9"?t=26+i.charCodeAt(0)-"0".charCodeAt(0):"?"===i?t=36:"!"===i?t=37:","===i?t=38:"."===i?t=39:"'"===i&&(t=40),null!=t){const e=this.add(c,l,s,t,h);e.baseX=c,e.baseY=l,o.sprites.push(e)}c+=s}else l+=s,c=e}return this.#S.push(o),this.changed(),o}clear(){for(const t of this.#S)for(const e of t.sprites)e.enabled=!1;this.#S=[],this.changed()}update(t){for(const t of this.#S.filter(t=>!t.enabled))for(const e of t.sprites)e.enabled=!1;this.#S=this.#S.filter(t=>t.enabled);for(const e of this.#S)e.update(t)&&this.changed();super.update()}}class o extends r{#v;#M;#O;#L;#I;#P;#N;constructor(t,e,i,s,h,r,a,n,o,c="primary",l=0){super(t,!1,"textures/cells.png"),this.#v=t,"center"===e&&(e=this.#v.renderer.w/2-s*(r+(a??0)*(s-1)/s)/2),"center"===i&&(i=this.#v.renderer.h/2-h*(r+(n??0)*(h-1)/h)/2),this.x=e,this.y=i,this.w=s,this.h=h,this.s=r,this.#M=a??0,this.#O=n??0,this.#L=o,this.#I=c;for(let t=0;t<h;t++)for(let e=0;e<s;e++){const i=this.add(this.x+e*this.#U,this.y+t*this.#D,r,l,c);i.setColor(c),i.gridX=e,i.gridY=t}}update(){if(!this.disabled){if(this.#v.input.moved){let t=this.#H(this.#v.input.x,this.#v.input.y);t?.inactive&&(t=null),t===this.#P||this.#N||(this.onactivate||this.#L)&&this.#v.input.mouse&&(this.#P?.inactive||this.#P?.setColor(this.#P?.baseColor||this.#I),t?.setColor("highlight"),this.changed()),this.#P=t}this.#v.input.press&&(this.#N=this.#P,(this.onpress||this.#L)&&this.#v.input.mouse&&(this.#N?.setColor("active"),this.changed())),this.#v.input.click()&&(this.#L&&(this.#N?.setColor(this.#N?.baseColor||this.#I),this.#P&&this.#P===this.#N&&(this.#v.input.clickRead=!0,this.#L(this.#N)),this.changed()),this.#N=null)}super.update()}cellAt(t,e){if(t>=0&&t<this.w&&e>=0&&e<this.h)return this.sprites[this.w*e+t]}#H(t,e){const i=this.#Y(t,e);if(i)return this.cellAt(i[0],i[1])}#Y(t,e){const i=t-this.x,s=e-this.y,h=Math.trunc(i/this.#U),r=Math.trunc(s/this.#D);if(i>=0&&s>=0&&i-h*this.#U<this.s&&s-r*this.#D<this.s&&h>=0&&h<this.w&&r>=0&&r<this.h)return[h,r]}get#U(){return this.s+this.#M}get#D(){return this.s+this.#O}}class c{#G;#v;#X;#z;#W;#_;#K;#F;#j;#V;#$;#Q;#q;#Z;constructor(t){this.#G=t}init(t){this.#v=t,this.#z=new o(this.#v,this.#v.renderer.w-74,10,1,1,64,0,0,t=>this.#J(t)),this.#$=this.#z.sprites[0],this.#$=this.#z.sprites[0],this.#$.write(this.#v.text,"X",32,"active"),this.#W=new r(t),this.#_=this.#W.add("center",100,64,1,this.#G.color),this.#K=this.#W.add(this.#_.x-12,this.#_.y+60,24,0,this.#G.color),this.#F=this.#W.add(this.#_.x+46,this.#_.y+60,24,0,this.#G.color),this.#j=this.#v.text.write(this.#G.catName,"center",10,24,this.#G.color,["sine"]),this.#V=this.#v.text.write(this.#G.catText,"center",this.#_.y+100,32,this.#G.color,["typing","shake"])}update(){if(this.#Q)return new p(this.#v);this.#z.update(),!this.#q&&this.#v.input.click()?(this.#v.input.clickRead=!0,this.#_.setColor("blackcat"),this.#K.setColor("blackcat"),this.#F.setColor("blackcat"),this.#W.changed(),this.#j.enabled=!1,this.#V.enabled=!1,this.#j=this.#v.text.write("VICKI","center",10,24,"blackcat",["sine"]),this.#V=this.#v.text.write(this.#G.response,"center",this.#_.y+100,32,"blackcat",["typing","shake"]),this.#q=!0):!this.#Z&&this.#v.input.click()&&(this.#v.input.clickRead=!0,this.#_.enabled=!1,this.#K.enabled=!1,this.#F.enabled=!1,this.#j.enabled=!1,this.#V.enabled=!1,this.#W.changed(),this.#v.text.write(this.#G.title,"center",10,48,"inactive",["sine"]),this.#tt(),this.#Z=!0),this.#Z&&this.#X.update(),this.#W.update()}draw(){this.#Z&&!this.#Q&&this.#X.draw(),this.#W.draw(),this.#z.draw()}#tt(){this.#X=new this.#G(this.#v,()=>this.#et(),()=>this.#it()),this.#$=this.#z.sprites[0],this.#$.write(this.#v.text,"X",32,"active")}#et(){this.#v.scheduleTimer(500,()=>{this.#v.minigamesWon.add(this.#G),this.#Q=!0})}#it(){this.#v.scheduleTimer(500,()=>{this.#tt()})}#J(t){t===this.#$&&(this.#Q=!0)}}class l{#v;#st;#ht;#rt;#at;#nt;#ot;#ct;#z;#lt;#gt;#dt;#Z;static title="MEOWSWEEPER";static color="tabbycat";static sx=73;static type=2;static catName="QUEEN KARA";static catText="YOU, NEW CAT!!\nI NEED YOU TO SCRATCH MY BACK\nIMMEDIATELY BUT ONLY WHERE\nI LIKE IT!\n\n\nSINCE YOU'RE NEW I WILL TELL\nYOU HOW MANY DANGER ZONES\nARE AROUND WHERE YOU'RE\nSCRATCHING!";static response="OOOH, THE QUEEN HERSELF!!\n\n\nI NEED TO MAKE A GOOD\nFIRST IMPRESSION!";constructor(t,e,i){this.#v=t,this.#st=e,this.#ht=i,this.#rt=this.#v.renderer.horizontal?20:10,this.#at=this.#v.renderer.horizontal?10:20,this.#nt=10,this.#ot=26;const s=Math.floor(Math.min((this.#v.renderer.w-20)/this.#rt-4*(this.#rt-1)/this.#rt,(this.#v.renderer.h-110)/this.#at-4*(this.#at-1)/this.#at));this.#ct=new o(this.#v,"center",100,this.#rt,this.#at,s,4,4,t=>this.#mt(t)),this.#z=new o(this.#v,10,10,2,1,64,10,0,t=>this.#J(t)),this.#lt=this.#z.sprites[0],this.#lt.write(this.#v.text,"O",30,"active"),this.#gt=this.#z.sprites[1],this.#gt.write(this.#v.text,"X",30,"active"),this.#ut("dig"),this.#v.text.write("MEOWSWEEPER","center",10,48,"inactive",["sine"])}update(){(this.#v.input.keyPresses.KeyA||this.#v.input.keyPresses.ArrowLeft)&&this.#ut("dig"),(this.#v.input.keyPresses.KeyD||this.#v.input.keyPresses.ArrowRight)&&this.#ut("flag"),this.#ct.update(),this.#z.update()}draw(){this.#ct.draw(),this.#z.draw()}#mt(t){switch(this.#dt){case"dig":this.#Z||this.#pt(t),this.#ft(t.gridX,t.gridY),t.mine&&(this.#ct.disabled=!0,this.#v.scheduleTimer(2e3,()=>{for(const t of this.#ct.sprites)(t.content||{}).enabled=!1;this.#v.text.changed(),this.#ht()}));break;case"flag":t.flagged?(t.flagged=!1,t.content.enabled=!1,this.#v.text.changed()):(t.flagged=!0,t.write(this.#v.text,"X",this.#ot,"highlight"))}}#pt(t){const e=this.#ct.sprites.filter(e=>e!==t&&(Math.abs(e.gridX-t.gridX)>1||Math.abs(e.gridY-t.gridY)>1));for(let t=0;t<this.#nt;t++){const t=Math.floor(Math.random()*e.length),i=e[t];e.splice(t,1),i.mine=!0}for(let t=0;t<this.#ct.h;t++)for(let e=0;e<this.#ct.w;e++){let i=this.#ct.cellAt(e,t);if(!i.mine){i.mines=0;for(let s=-1;s<=1;s++)for(let h=-1;h<=1;h++)this.#ct.cellAt(e+h,t+s)?.mine&&(i.mines+=1)}}this.#Z=!0}#ft(t,e){this.#v.shake(200);const i=this.#ct.cellAt(t,e);if(i?.flagged&&(i.flagged=!1,i.content.enabled=!1),i?.enabled&&!i?.opened)if(i.opened=!0,i.activate(!1),0===i.mines)i.hidden=!0,this.#ft(t,e-1),this.#ft(t,e+1),this.#ft(t-1,e),this.#ft(t+1,e);else if(i.mine)for(const t of this.#ct.sprites.filter(t=>t.mine))t.activate(!1),t.write(this.#v.text,"X",this.#ot,"inactive10");else i.write(this.#v.text,i.mines,this.#ot,`inactive${i.mines}`);this.#ct.sprites.filter(t=>!t.opened).every(t=>t.mine)&&this.#st()}#J(t){t===this.#gt?this.#ut("flag"):t===this.#lt&&this.#ut("dig")}#ut(t){this.#dt=t,this.#lt.activate("dig"!==this.#dt),this.#gt.activate("flag"!==this.#dt),this.#z.changed()}}class g{#v;#st;#ht;#ct;#W;#wt;#bt;static title="PAW PAW TOE";static color="orangecat";static sx=73;static type=2;static catName="ORANGE CAT, THE USELESS BOYFRIEND";static catText="BET YOU CAN'T BEAT ME\nIN PAW PAW TOE!\n\n\nI'M THE SMARTEST\nORANGE CAT EVER!!!";static response="WELL, THAT'S\nNOT SAYING MUCH...\n\n\nLET'S SEE!";constructor(t,e,i){this.#v=t,this.#st=e,this.#ht=i,this.#ct=new o(this.#v,"center","center",3,3,96,20,20,t=>this.#mt(t)),this.#W=new r(this.#v)}update(){this.#ct.update(),this.#W.update()}draw(){this.#ct.draw(),this.#W.draw()}#mt(t){t.symbol||(this.#xt(t,"X"),this.#ct.disabled=!0,this.#wt=this.#v.scheduleTimer(1e3,()=>{if(!this.#bt){const t=this.#ct.sprites.filter(t=>!t.symbol);t.length>0&&(this.#xt(t[Math.floor(Math.random()*t.length)],"O"),this.#ct.disabled=!1,this.#ct.changed())}}))}#xt(t,e){this.#bt||(this.#v.shake(200),t.symbol=e,t.activate(!1),t.draw(this.#W,64,0,"X"===e?"blackcat":"orangecat"),this.#At())}#At(){for(let t=0;t<3;t++){const e=new Map;for(let i=0;i<3;i++){const s=this.#ct.cellAt(i,t);e.set(s.symbol,(e.get(s.symbol)||0)+1)}if(3===e.get("X"))return this.#et("X");if(3===e.get("O"))return this.#et("O")}for(let t=0;t<3;t++){const e=new Map;for(let i=0;i<3;i++){const s=this.#ct.cellAt(t,i);e.set(s.symbol,(e.get(s.symbol)||0)+1)}if(3===e.get("X"))return this.#et("X");if(3===e.get("O"))return this.#et("O")}return"X"===this.#ct.cellAt(0,0).symbol&&"X"===this.#ct.cellAt(1,1).symbol&&"X"===this.#ct.cellAt(2,2).symbol?this.#et("X"):"O"===this.#ct.cellAt(0,0).symbol&&"O"===this.#ct.cellAt(1,1).symbol&&"O"===this.#ct.cellAt(2,2).symbol?this.#et("O"):"X"===this.#ct.cellAt(2,0).symbol&&"X"===this.#ct.cellAt(1,1).symbol&&"X"===this.#ct.cellAt(0,2).symbol?this.#et("X"):"O"===this.#ct.cellAt(2,0).symbol&&"O"===this.#ct.cellAt(1,1).symbol&&"O"===this.#ct.cellAt(0,2).symbol?this.#et("O"):void 0}#et(t){this.#bt=!0,this.#ct.disabled=!0,(this.#wt||{}).disabled=!0,"X"===t?this.#st():"O"===t&&this.#ht()}}class d{#v;#st;#W;#Et;#kt;#z;#vt;static title="SUDOCAT";static color="blackcat";static sx=73;static type=4;static catName="KUMBA";static catText="I NEED ALL MY TREATS AND\nTOYS NEATLY ORGANISED!!\n\n\nTHERE SHOULD BE ONLY ONE\nTYPE IN EACH ROW, EACH\nCOLUMN AND IN EACH BOX!!";static response="KITTY MUST HAVE OCD...";constructor(t,e){this.#v=t,this.#st=e,this.#W=new r(this.#v,!0),this.#Et=[];const i=Math.floor(Math.min((this.#v.renderer.w-20)/3-32/3,(this.#v.renderer.h-200)/3-32/3));this.#kt=Math.floor(Math.min((i-0)/3-10/3,(i-0)/3-10/3));const s=this.#v.renderer.w/2-3*(i+32/3)/2;for(let t=0;t<3;t++)for(let e=0;e<3;e++){const h=new o(this.#v,s+e*(i+16),100+t*(i+16),3,3,this.#kt,5,5,t=>this.#mt(t));this.#Et.push(h)}this.#z=new o(this.#v,"center",this.#v.renderer.h-74,10,1,64,10,0,t=>this.#J(t));for(let t=1;t<=10;t++){const e=this.#z.sprites[t-1];e.draw(this.#W,128/3,t+5),e.digit=t<=9?t:null}this.#yt(),this.#Tt(1),this.#v.text.write("SUDOCAT","center",10,48,"inactive",["sine"])}update(){for(let t=1;t<=9;t++)this.#v.input.keyPresses[`Digit${t}`]&&this.#Tt(t);(this.#v.input.keyPresses.KeyA||this.#v.input.keyPresses.ArrowLeft)&&this.#vt>1&&this.#Tt(this.#vt-1),(this.#v.input.keyPresses.KeyD||this.#v.input.keyPresses.ArrowRight)&&this.#vt<9&&this.#Tt(this.#vt+1),(this.#v.input.keyPresses.KeyX||this.#v.input.keyPresses.Digit0)&&this.#Tt(null),this.#W.update();for(const t of this.#Et)t.update();this.#z.update()}draw(){for(const t of this.#Et)t.draw();this.#z.draw(),this.#W.draw()}#Bt(t,e){return this.#Et[3*Math.floor(e/3)+Math.floor(t/3)]}#Ct(t,e){return this.#Bt(t,e).cellAt(t%3,e%3)}#yt(){const t=[[6,8,0,1,0,0,0,9,0,0,3,4,5,0,8,0,2,0,2,1,0,0,6,0,3,0,0,5,0,0,4,0,7,0,0,9,3,4,2,9,0,0,0,0,6,0,0,7,0,8,0,5,0,0,9,2,0,8,0,0,0,5,3,0,0,3,2,0,0,9,1,8,0,0,0,3,0,0,0,6,7]],e=t[Math.floor(Math.random()*t.length)];for(let t=0;t<9;t++)for(let i=0;i<9;i++){const s=e[9*t+i];if(0!==s){const e=this.#Ct(i,t);e.activate(!1),e.digit=s,e.draw(this.#W,2*this.#kt/3,s+5)}}}#mt(t){t.digit=this.#vt,(t.content||{}).enabled=!1,this.#vt&&t.draw(this.#W,2*this.#kt/3,this.#vt+5),this.#Rt()&&this.#st(),this.#v.text.changed(),this.#W.changed()}#Rt(){let t=!0;this.#St();for(let e=0;e<9;e++)t&=this.#Mt(e),t&=this.#Ot(e),t&=this.#At(e);return t}#St(){for(let t=0;t<9;t++)for(let e=0;e<9;e++){const i=this.#Ct(e,t);i.inactive||i.setBaseColor("primary")}for(let t=0;t<9;t++)this.#Et[t].changed()}#Mt(t){let e=!0;const i=new Map;for(let e=0;e<9;e++){const s=this.#Ct(t,e);i.set(s.digit,(i.get(s.digit)||0)+1)}for(const[s,h]of i.entries())if(null==s)e=!1;else if(h>1){e=!1;for(let e=0;e<9;e++){const i=this.#Ct(t,e);i.inactive||i.digit!=s||(i.setBaseColor("active"),this.#Bt(t,e).changed())}}return e}#Ot(t){let e=!0;const i=new Map;for(let e=0;e<9;e++){const s=this.#Ct(e,t);i.set(s.digit,(i.get(s.digit)||0)+1)}for(const[s,h]of i.entries())if(null==s)e=!1;else if(h>1){e=!1;for(let e=0;e<9;e++){const i=this.#Ct(e,t);i.inactive||i.digit!=s||(i.setBaseColor("active"),this.#Bt(e,t).changed())}}return e}#At(t){let e=!0;const i=new Map,s=this.#Et[t];for(let t=0;t<9;t++){const e=s.sprites[t];i.set(e.digit,(i.get(e.digit)||0)+1)}for(const[t,h]of i.entries())if(null==t)e=!1;else if(h>1){e=!1;for(let e=0;e<9;e++){const i=s.sprites[e];i.inactive||i.digit!=t||(i.setBaseColor("active"),s.changed())}}return e}#J(t){t&&this.#Tt(t.digit)}#Tt(t){this.#vt=t;for(const t of this.#z.sprites)t.activate(!0);this.#z.sprites[null!=t?t-1:9].activate(!1),this.#z.changed()}}class m{#v;#st;#ct;#W;#Lt;#It;#Pt;#wt;static title="MEOWMORY";static color="silvercat";static sx=8;static type=3;static catName="MOLLY";static catText="THEY SAY I HAVE THE\nMEMORY OF A GOLDFISH...\n\n\nCAN YOU SHOW ME HOW\nTO REMEMBER THINGS??";static response="SOMEONE SAID FISHIE?!\n\n\nYUM!!!";constructor(t,e){this.#v=t,this.#st=e;const i=this.#v.renderer.horizontal?6:5,s=this.#v.renderer.horizontal?5:6,h=Math.floor(Math.min((t.renderer.w-20)/i-16*(i-1)/i,(t.renderer.h-110)/s-16*(s-1)/s));this.#ct=new o(t,"center",100,i,s,h,16,16,t=>this.#mt(t)),this.#W=new r(t,!0);const a=this.#ct.sprites.slice();for(let t=0;t<i*s/2;t++){const e=Math.floor(Math.random()*a.length),i=a[e];a.splice(e,1);const s=Math.floor(Math.random()*a.length),h=a[s];a.splice(s,1),i.secret=t,h.secret=t}}update(){this.#ct.update(),this.#W.update()}draw(){this.#ct.draw(),this.#W.draw()}#mt(t){t.open||(this.#It&&this.#Pt&&this.#Nt(),t.open=!0,t.draw(this.#W,2*this.#ct.s/3,t.secret,t.secret<5?"tabbycat":null),t.setBaseColor("active"),this.#Lt?(t.secret===this.#Lt.secret?(t.found=!0,t.activate(!1),this.#Lt.found=!0,this.#Lt.activate(!1),this.#ct.sprites.every(t=>t.found)&&this.#st()):(this.#It=this.#Lt,this.#Pt=t,this.#wt=this.#v.scheduleTimer(1e3,()=>this.#Nt())),this.#Lt=!1):this.#Lt=t)}#Nt(){(this.#wt||{}).disabled=!0,this.#It.open=!1,this.#It.content.enabled=!1,this.#It.setBaseColor("primary"),this.#Pt.open=!1,this.#Pt.content.enabled=!1,this.#Pt.setBaseColor("primary"),this.#ct.changed(),this.#v.text.changed(),this.#W.changed(),this.#It=null,this.#Pt=null}}class u{#v;#st;#Ut;#Dt;#Ht;#Yt;#rt;#at;#ct;#z;#Gt;#gt;#dt;static title="MEOWSTERPIECE";static color="whitecat";static sx=8;static type=3;static catName="CHA CHA";static catText="TODAY I DECIDED TO BE\nAN ARTIST!!\nHELP ME WITH THIS\nPAINT BY NUMBER!\n\n\nTHE CLUES WILL TELL YOU\nHOW MANY BLOCKS SHOULD\nBE PAINTED IN EACH ROW\nAND IN EACH COLUMN!";static response="SURE SURE, ARTIST TODAY,\nSOMETHING ELSE TOMORROW!\n\n\nTYPICAL KITTY...";constructor(t,e){this.#v=t,this.#st=e,this.#Ut=[[0],[1,1],[2,2],[5],[2,1,2,1],[5,2],[3,1],[6,2],[1,5,1],[8],[2,4]],this.#Dt=[[1,2],[4,1,1],[3,6],[7],[3,6],[4,4],[1,3],[2],[3,1],[2,3]],this.#Ht=Math.max(...this.#Ut.map(t=>t.length)),this.#Yt=Math.max(...this.#Dt.map(t=>t.length)),this.#rt=this.#Dt.length+this.#Ht,this.#at=this.#Ut.length+this.#Yt;const i=Math.floor(Math.min((this.#v.renderer.w-20)/this.#rt-2*(this.#rt-1)/this.#rt,(this.#v.renderer.h-110)/this.#at-2*(this.#at-1)/this.#at));this.#ct=new o(this.#v,"center",100,this.#rt,this.#at,i,2,2,t=>this.#mt(t));for(let t=0;t<this.#rt;t++)for(let e=0;e<this.#Yt;e++){const s=this.#ct.cellAt(t,e);t<this.#Ht||e<this.#Yt-this.#Dt[t-this.#Ht].length?s.hidden=!0:(s.write(this.#v.text,this.#Dt[t-this.#Ht][e-(this.#Yt-this.#Dt[t-this.#Ht].length)],2*i/3,"highlight"),s.activate(!1))}for(let t=0;t<this.#rt;t++)for(let e=0;e<this.#Ht;e++){const i=this.#ct.cellAt(e,t);t<this.#Yt||e<this.#Ht-this.#Ut[t-this.#Yt].length?i.hidden=!0:(i.write(this.#v.text,this.#Ut[t-this.#Yt][e-(this.#Ht-this.#Ut[t-this.#Yt].length)],2*this.#ct.s/3,"highlight"),i.activate(!1))}this.#z=new o(this.#v,10,10,2,1,64,10,0,t=>this.#J(t)),this.#Gt=this.#z.sprites[0],this.#Gt.write(this.#v.text,"O",30,"active"),this.#gt=this.#z.sprites[1],this.#gt.write(this.#v.text,"X",30,"active"),this.#ut("mark"),this.#ct.changed(),this.#v.text.write("MEOWSTERPIECE","center",10,48,"inactive",["sine"])}update(){(this.#v.input.keyPresses.KeyA||this.#v.input.keyPresses.ArrowLeft)&&this.#ut("mark"),(this.#v.input.keyPresses.KeyD||this.#v.input.keyPresses.ArrowRight)&&this.#ut("flag"),this.#ct.update(),this.#z.update()}draw(){this.#ct.draw(),this.#z.draw()}#mt(t){switch((t.content||{}).enabled=!1,this.#dt){case"mark":"marked"!==t.state?(t.state="marked",t.setBaseColor("active")):(t.state=null,t.setBaseColor("primary"));break;case"flag":t.setBaseColor("primary"),"flagged"!==t.state?(t.state="flagged",t.write(this.#v.text,"X",2*this.#ct.s/3,"highlight")):t.state=null}this.#v.text.changed(),this.#At()}#J(t){t===this.#gt?this.#ut("flag"):t===this.#Gt&&this.#ut("mark")}#ut(t){this.#dt=t,this.#Gt.activate("mark"!==this.#dt),this.#gt.activate("flag"!==this.#dt),this.#z.changed()}#At(){let t=0;for(let e=this.#Ht;e<this.#rt;e++){for(let t=0;t<this.#Yt;t++)this.#ct.cellAt(e,t).setBaseColor("inactive");let i=0,s=0,h=0;for(let t=this.#Yt;t<this.#at;t++)"marked"===this.#ct.cellAt(e,t).state&&(i+=1),"marked"===this.#ct.cellAt(e,t).state&&t!==this.#at-1||((i>0||t===this.#at-1)&&s<this.#Dt[e-this.#Ht].length&&(i>this.#Dt[e-this.#Ht][s]?this.#ct.cellAt(e,s+(this.#Yt-this.#Dt[e-this.#Ht].length)).setBaseColor("highlight"):i===this.#Dt[e-this.#Ht][s]&&(this.#ct.cellAt(e,s+(this.#Yt-this.#Dt[e-this.#Ht].length)).setBaseColor("primary3"),h+=1),s+=1),i=0);h===this.#Dt[e-this.#Ht].length&&(t+=1)}for(let e=this.#Yt;e<this.#at;e++){for(let t=0;t<this.#Ht;t++)this.#ct.cellAt(t,e).setBaseColor("inactive");let i=0,s=0,h=0;for(let t=this.#Ht;t<this.#rt;t++)"marked"===this.#ct.cellAt(t,e).state&&(i+=1),"marked"===this.#ct.cellAt(t,e).state&&t!==this.#rt-1||((i>0||t===this.#rt-1)&&s<this.#Ut[e-this.#Yt].length&&(i>this.#Ut[e-this.#Yt][s]?this.#ct.cellAt(s+(this.#Ht-this.#Ut[e-this.#Yt].length),e).setBaseColor("highlight"):i===this.#Ut[e-this.#Yt][s]&&(this.#ct.cellAt(s+(this.#Ht-this.#Ut[e-this.#Yt].length),e).setBaseColor("primary3"),h+=1),s+=1),i=0);h===this.#Ut[e-this.#Yt].length&&(t+=1)}t===this.#rt-this.#Ht+(this.#at-this.#Yt)&&this.#st()}}class p{#v;#Xt;#ct;#z;#W;#zt;#Wt;#_t;#Kt;#Ft;#jt;#Vt;init(t){this.#v=t,this.#Xt=t.firstStart,t.firstStart=!1,this.#ct=new o(this.#v,"center",100,6,15,128,0,0,null,"",2),this.#ct.disabled=!0,this.#z=new o(this.#v,"center",132,3,7,128,64,64,t=>this.#J(t),"",1),this.#Xt?(this.#z.disabled=!0,this.#Wt=-this.#v.renderer.h,this.#v.text.write("THIS IS A TRUE STORY\n\n\nTHE CATS DEPICTED HERE\nALL LIVE IN DUBLIN","center","center",32,"inactive",["typing","shake"]),this.#v.scheduleTimer(9e3,()=>{this.#_t=!0,this.#v.text.clear()})):this.#v.text.write("HELP THE OTHER CATS\nIN THE BUILDING!!","center",10,32,"active",["typing","shake"]),this.#W=new r(this.#v);const e=[g,m,l,d,u];for(let t=0;t<21;t++)if(!e[t]||0!=t&&this.#Xt)this.#z.sprites[t].activate(!1);else{this.#z.sprites[t].minigame=e[t];let i=e[t].sx,s=73,h=e[t].type;this.#v.minigamesWon.has(e[t])&&(this.#z.sprites[t].activate(!1),i=39,s=39,h=1),this.#W.add(this.#z.sprites[t].x+i,this.#z.sprites[t].y+s,50,h,e[t].color)}this.#Kt=this.#W.add("center",t.renderer.h,900,1,"black");for(let t=0;t<this.#z.sprites.length;t++){const e=this.#z.sprites[t];this.#v.minigamesWon.has(e.minigame)&&e.activate(!1)}}update(){if(this.#Xt)if(this.#Wt<0)this.#Wt+=3,this.#Wt>=0&&(this.#Wt=0,this.#v.shake(200)),this.#v.renderer.projection=t.ortho(0,this.#v.renderer.w,this.#v.renderer.h+this.#Wt,this.#Wt);else if(this.#_t&&!this.#Ft){if(this.#Kt.y-=3,this.#Kt.y<=this.#v.renderer.h/2-this.#Kt.size/2){this.#Ft=!0,this.#Kt.y=this.#v.renderer.h/2-this.#Kt.size/2;const t=this.#v.text.write("  A VOIDING\nYOUR PROBLEMS","center","center",48,null,["sine"]);this.#v.text.write("  A GAME BY\nATTILA HORVATH","center",t.y+180,36,"whitecat",["shake"]),this.#v.text.write("TAP TO BEGIN","center",t.y+280,36,"inactive",["typing","shake"],1200),this.#v.shake(500)}this.#Kt.x=this.#v.renderer.w/2-this.#Kt.size/2,this.#W.changed()}else if(this.#jt)this.#Vt?this.#z.disabled=!1:this.#v.input.click()&&(this.#v.input.clickRead=!0,this.#Kt.hidden=!0,this.#W.changed(),this.#v.text.clear(),this.#Vt=!0,this.#v.text.write("LET'S START WITH THIS\nGENIUS ORANGE CAT!","center",10,32,"active",["typing","shake"]));else if(this.#v.input.click()){this.#v.input.clickRead=!0,this.#v.text.clear();const t=this.#v.text.write("SO, I HEARD THIS\nIS THE DOMAIN OF","center","center",28,"inactive",["typing","shake"]);this.#v.text.write("QUEEN KARA","center",t.y+60,32,"tabbycat",["typing","sine"],4e3),this.#v.text.write("I HOPE SHE'LL ACCEPT ME\nIF I HELP THE OTHER CATS...","center",t.y+120,28,"inactive",["typing","shake"],6e3),this.#jt=!0}if(this.#ct.update(),this.#W.update(),this.#zt)return this.#zt;this.#z.update()}draw(){this.#ct.draw(),this.#z.draw(),this.#W.draw()}#J(t){t&&(this.#zt=new c(t.minigame))}}const f=new class{#Z;#$t;#Qt;#W;#qt;#Zt;#Jt;#te;constructor(){this.renderer=new i(()=>{if(!this.#Z){for(let t=0;t<128;t++){const t=Math.floor(15*Math.random());let e=null;t<5&&(e=["blackcat","orangecat","whitecat","tabbycat","silvercat"][Math.floor(5*Math.random())]);const i=this.#Qt.add(Math.random()*this.renderer.w,Math.random()*this.renderer.h,16+100*Math.random(),t,e);i.a=.33,i.dx=-.5+Math.random(),i.dy=-.5+Math.random(),i.ds=.2*Math.random()-.1}this.#Zt=new p,this.#Zt.init(this),this.#Z=!0}}),this.input=new s(this),this.#$t=[],this.#Qt=new r(this,!0),this.text=new n(this),this.#W=new r(this),this.#qt=this.#W.add(0,0,26,0,"blackcat"),this.#qt.hidden=!0,this.minigamesWon=new Set,this.firstStart=!0}step(t){this.timestamp=t,this.#ee(t),this.#ie(),this.#Jt&&(this.text.clear(),this.#Zt=this.#Jt,this.#Zt.init(this),this.#Jt=null)}scheduleTimer(t,e,i){const s={start:this.timestamp??0,delay:t,onexpire:e,repeat:i};return this.#$t.push(s),s}shake(t){navigator.vibrate(t),this.#te=!0,this.scheduleTimer(t,()=>this.#te=!1)}#ee(t){this.#te?(this.renderer.view[6]=7*Math.random(),this.renderer.view[7]=7*Math.random()):(this.renderer.view[6]=0,this.renderer.view[7]=0),this.input.update(),this.input.mouse&&this.#qt.hidden&&(this.#qt.hidden=!1,this.#W.changed()),this.input.moved&&(this.#qt.x=this.input.x-6,this.#qt.y=this.input.y-6,this.#W.changed());for(const t of this.#Qt.sprites)t.x+=t.dx,t.y+=t.dy,t.size+=t.ds,t.x<0&&(t.dx=-t.dx,t.x=0),t.y<0&&(t.dy=-t.dy,t.y=0),t.x>this.renderer.w&&(t.dx=-t.dx,t.x=this.renderer.w),t.y>this.renderer.h&&(t.dy=-t.dy,t.y=this.renderer.h),t.size<16&&(t.ds=-t.ds,t.size=16),t.size>116&&(t.ds=-t.ds,t.size=116);this.#Qt.changed(),this.#Qt.update(),this.#se(t),this.#Zt&&(this.#Jt=this.#Zt.update()),this.text.update(t),this.#W.update()}#se(t){for(const e of this.#$t)t>=e.start+e.delay&&!e.disabled&&(e.repeat?e.start=t:e.expired=!0,e.onexpire&&e.onexpire());this.#$t.some(t=>t.expired||t.disabled)&&(this.#$t=this.#$t.filter(t=>!t.expired&&!t.disabled))}#ie(){this.renderer.clear();const e=this.renderer.projection;this.renderer.projection=t.ortho(0,this.renderer.w,this.renderer.h,0),this.#Qt.draw(),this.renderer.projection=e,this.#Zt&&this.#Zt.draw(),this.renderer.projection=t.ortho(0,this.renderer.w,this.renderer.h,0),this.text.draw(),this.#W.draw(),this.renderer.projection=e}};requestAnimationFrame(function t(e){requestAnimationFrame(t),f.step(e)})}();
//# sourceMappingURL=bundle.js.map
