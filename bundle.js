!function(){"use strict";class t extends Float32Array{static identity(){return new t([1,0,0,0,1,0,0,0,1])}static ortho(e,i,s,h){return new t([2/(i-e),0,0,0,2/(h-s),0,-(i+e)/(i-e),-(h+s)/(h-s),1])}}class e{#t;#e;#i;#s;#h;constructor(t,e,i){const s=this.#r(t,t.VERTEX_SHADER,e),h=this.#r(t,t.FRAGMENT_SHADER,i);this.#t=t.createProgram(),t.attachShader(this.#t,s),t.attachShader(this.#t,h),t.bindAttribLocation(this.#t,0,"vertexPosition"),t.bindAttribLocation(this.#t,1,"vertexColor"),t.bindAttribLocation(this.#t,2,"vertexTexCoord"),t.bindAttribLocation(this.#t,3,"spritePosition"),t.bindAttribLocation(this.#t,4,"spriteSize"),t.bindAttribLocation(this.#t,5,"spriteType"),t.bindAttribLocation(this.#t,6,"spriteColor"),t.bindAttribLocation(this.#t,7,"spriteAngle"),t.linkProgram(this.#t),this.#e=t.getUniformLocation(this.#t,"view"),this.#i=t.getUniformLocation(this.#t,"projection"),this.#s=t.getUniformLocation(this.#t,"tex"),this.#h=t.getUniformLocation(this.#t,"imageSize"),console.log(t.getProgramInfoLog(this.#t))}use(t,e,i){t.useProgram(this.#t),this.setUniforms(t,e,i)}setUniforms(t,e,i){null!=this.#e&&t.uniformMatrix3fv(this.#e,!1,e),null!=this.#i&&t.uniformMatrix3fv(this.#i,!1,i),null!=this.#s&&t.uniform1i(this.#s,0),null!=this.#h&&t.uniform1f(this.#h,16)}#r(t,e,i){const s=t.createShader(e);return t.shaderSource(s,i),t.compileShader(s),console.log(t.getShaderInfoLog(s)),s}}class i{#a;#n;#o;#c;#l;#g;#d;#m;constructor(e){this.#a=e,document.body.style.margin="0",document.body.style.padding="0",this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.canvas.style.width="100dvw",this.canvas.style.height="100dvh",this.canvas.style.cursor="none",this.canvas.style.touchAction="none",new ResizeObserver(()=>{this.w=this.canvas.clientWidth,this.h=this.canvas.clientHeight,this.canvas.width=this.w,this.canvas.height=this.h,this.horizontal=this.w>this.h,this.#n.viewport(0,0,this.w,this.h),this.projection=t.ortho(0,this.w,this.h,0),this.#a&&this.#a()}).observe(this.canvas,{box:"content-box"}),document.body.appendChild(this.canvas),this.#n=this.canvas.getContext("webgl2"),this.#n.viewport(0,0,this.canvas.width,this.canvas.height),this.#n.clearColor(.68,.68,.94,1),this.#n.pixelStorei(this.#n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.#n.enable(this.#n.BLEND),this.#n.blendFunc(this.#n.ONE,this.#n.ONE_MINUS_SRC_ALPHA),this.quadBuffer=this.#u(),this.#o=new Map,this.#c=new Map,this.#l=[],this.view=t.identity(),this.projection=t.ortho(0,0,this.canvas.width,this.canvas.height)}createShader(t,i,s){const h=this.#o.get(t);if(h)return h;const r=new e(this.#n,i,s);return this.#o.set(t,r),r}createVao(){const t=this.#n.createVertexArray();return this.#n.bindVertexArray(t),t}createBuffer(t,e){const i=this.#n.createBuffer();return this.updateBuffer(i,t,e),i}updateBuffer(t,e,i){this.useBuffer(t),this.#n.bufferData(this.#n.ARRAY_BUFFER,e,i?this.#n.DYNAMIC_DRAW:this.#n.STATIC_DRAW)}useBuffer(t){this.#n.bindBuffer(this.#n.ARRAY_BUFFER,t)}setAttribute(t,e,i,s,h){this.#n.vertexAttribPointer(t,e,this.#n.FLOAT,!1,i,s),this.#n.enableVertexAttribArray(t),null!=h&&this.#n.vertexAttribDivisor(t,h)}loadTexture(t,e){const i=this.#c.get(`${t}_${e}`);if(i)return i;const s=this.#n.createTexture();this.#p(s,null,e);const h=this.#l.length,r=new Image;return r.src=t,r.onload=()=>this.#p(s,h,e),this.#c.set(`${t}_${e}`,s),this.#l[h]=r,s}clear(){this.#n.clear(this.#n.COLOR_BUFFER_BIT)}draw(t,e,i,s,h){t!==this.#g?(t.use(this.#n,this.view,this.projection),this.#g=t):this.#g.setUniforms(this.#n,this.view,this.projection),e!==this.#d&&(this.#n.bindVertexArray(e),this.#d=e),i!==this.#m&&(this.#n.activeTexture(this.#n.TEXTURE0),this.#n.bindTexture(this.#n.TEXTURE_2D,i),this.#m=i),null!=h?this.#n.drawArraysInstanced(this.#n.TRIANGLES,0,s,h):this.#n.drawArrays(this.#n.TRIANGLES,0,s)}#u(){return this.createBuffer(new Float32Array([0,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,1,1,1]),!1)}#p(t,e,i){this.#n.activeTexture(this.#n.TEXTURE0),this.#n.bindTexture(this.#n.TEXTURE_2D,t),null!=e?this.#n.texImage2D(this.#n.TEXTURE_2D,0,this.#n.RGBA,this.#n.RGBA,this.#n.UNSIGNED_BYTE,this.#l[e]):this.#n.texImage2D(this.#n.TEXTURE_2D,0,this.#n.RGBA,1,1,0,this.#n.RGBA,this.#n.UNSIGNED_BYTE,new Uint8Array([255,0,255,255])),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_WRAP_S,this.#n.CLAMP_TO_EDGE),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_WRAP_T,this.#n.CLAMP_TO_EDGE),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_MIN_FILTER,i?this.#n.LINEAR:this.#n.NEAREST),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_MAG_FILTER,i?this.#n.LINEAR:this.#n.NEAREST)}}class s{#f;#w;#b;#x;#A;#v;constructor(t){this.#f={},this.#w={},t.renderer.canvas.addEventListener("pointermove",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY}),t.renderer.canvas.addEventListener("pointerdown",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#b=!0}),t.renderer.canvas.addEventListener("pointerup",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#x=!0}),addEventListener("keydown",t=>{this.#f[t.code]=!0}),addEventListener("keyup",t=>{this.#w[t.code]=!0})}update(){this.x===this.#A&&this.y===this.#v||(this.#A=this.x,this.#v=this.y,this.moved=!0),this.press=!1,this.#b&&(this.press=!0,this.#b=!1),this.release=!1,this.#x&&(this.release=!0,this.#x=!1),this.keyPresses={};for(const[t,e]of Object.entries(this.#f))e&&(this.keyPresses[t]=!0,this.#f[t]=!1);this.keyReleases={};for(const[t,e]of Object.entries(this.#w))e&&(this.keyReleases[t]=!0,this.#w[t]=!1);this.clickRead=!1}click(){return!this.clickRead&&(this.mouse&&this.release||!this.mouse&&this.press)}}class h{constructor(t,e,i,s,h){this.x=t,this.y=e,this.size=i,this.type=s,this.angle=0,this.enabled=!0,this.hidden=!1,this.a=1,this.setColor(h)}attributes(){return[this.x,this.y,this.size,this.type,this.r,this.g,this.b,this.hidden?0:this.a,this.angle]}setBaseColor(t){this.baseColor=t,this.setColor(t)}setColor(t){switch(t){case"primary":this.r=.85,this.g=.86,this.b=1;break;case"background":this.r=.68,this.g=.68,this.b=.94;case"highlight":this.r=.76,this.g=.55,this.b=.58;break;case"active":this.r=.65,this.g=.4,this.b=.44;break;case"inactive":this.r=.34,this.g=.34,this.b=.46;break;case"blackcat":this.r=.33,this.g=.33,this.b=.33;break;case"orangecat":this.r=.7,this.g=.45,this.b=.08;break;case"whitecat":this.r=.9,this.g=.9,this.b=.9;break;case"tabbycat":this.r=.64,this.g=.56,this.b=.38;break;case"silvercat":this.r=.6,this.g=.6,this.b=.6;break;case"black":this.r=0,this.g=0,this.b=0;break;case"primary1":this.#y(144,168,195);break;case"primary2":this.#y(70,157,137);break;case"primary3":this.#y(181,201,154);break;case"primary4":this.#y(0,166,251);break;case"primary5":this.#y(76,201,240);break;case"primary6":this.#y(244,202,224);break;case"primary7":this.#y(229,0,164);break;case"primary8":this.#y(242,0,137);break;case"primary9":this.#y(255,255,255);break;case"primary10":this.r=1,this.g=.8,this.b=.94;break;case"inactive1":this.#y(144,168,195);break;case"inactive2":this.#y(70,157,137);break;case"inactive3":this.#y(181,201,154);break;case"inactive4":this.#y(0,166,251);break;case"inactive5":this.#y(76,201,240);break;case"inactive6":this.#y(244,202,224);break;case"inactive7":this.#y(229,0,164);break;case"inactive8":this.#y(242,0,137);break;case"inactive9":this.#y(255,255,255);break;case"inactive10":this.r=1,this.g=.8,this.b=.94;break;default:this.r=1,this.g=1,this.b=1}}activate(t){this.inactive=!t,this.setColor(t?this.baseColor||"primary":"inactive")}write(t,e,i,s="active",h=null,r=null){(this.content||{}).enabled=!1,this.content=t.write(e.toString(),this.x+(this.size-i)/2,this.y+(this.size-i)/2,i,s,h,r)}draw(t,e,i,s){(this.content||{}).enabled=!1,this.content=t.add(this.x+(this.size-e)/2,this.y+(this.size-e)/2,e,i,s)}#y(t,e,i){this.r=t/255,this.g=e/255,this.b=i/255}}class r{#B;#k;#E;#T;#R;#C;constructor(t,e=!1,i="textures/sprites.png"){this.#B=t,this.#k=this.#B.renderer.createShader("sprite","#version 300 es\nuniform mat3 view;uniform mat3 projection;uniform float imageSize;uniform sampler2D tex;in vec2 vertexPosition;in vec2 vertexTexCoord;in vec2 spritePosition;in float spriteSize;in float spriteType;in vec4 spriteColor;in float spriteAngle;out vec2 texCoord;out vec4 tint;void main(){vec2 texOffset=vec2(imageSize/float(textureSize(tex,0)),imageSize/float(textureSize(tex,0).y));texCoord=vec2(texOffset.x,0.0)*spriteType+vertexTexCoord*texOffset;tint=spriteColor;tint.rgb*=tint.a;gl_Position=vec4(projection*view*vec3(vertexPosition*spriteSize+spritePosition,1.0),1.0);}","#version 300 es\nprecision highp float;uniform sampler2D tex;in vec2 texCoord;in vec4 tint;out vec4 fragmentColor;void main(){fragmentColor=texture(tex,texCoord)*tint;}"),this.#E=this.#B.renderer.createVao(),this.#B.renderer.useBuffer(this.#B.renderer.quadBuffer),this.#B.renderer.setAttribute(0,2,16,0),this.#B.renderer.setAttribute(2,2,16,8),this.#T=this.#B.renderer.createBuffer(new Float32Array,!0),this.#B.renderer.setAttribute(3,2,36,0,1),this.#B.renderer.setAttribute(4,1,36,8,1),this.#B.renderer.setAttribute(5,1,36,12,1),this.#B.renderer.setAttribute(6,4,36,16,1),this.#B.renderer.setAttribute(7,1,36,32,1),this.#R=this.#B.renderer.loadTexture(i,e),this.sprites=[],this.changed()}add(t,e,i,s,r){"center"===t&&(t=this.#B.renderer.w/2-i/2),"center"===e&&(e=this.#B.renderer.h/2-i/2);const a=new h(t,e,i,s,r);return this.sprites.push(a),this.changed(),a}changed(){this.#C=!0}update(){this.#C&&(this.sprites=this.sprites.filter(t=>t.enabled),this.#B.renderer.updateBuffer(this.#T,new Float32Array(this.sprites.map(t=>t.attributes()).flat()),!0),this.#C=!1)}draw(){this.#B.renderer.draw(this.#k,this.#E,this.#R,6,this.sprites.length)}}class a{constructor(t,e,i,s,h,r,a){this.text=t,this.x=e,this.y=i,this.size=s,this.color=h,this.animations=r??[],this.delay=a??0,this.sprites=[],this.enabled=!0,this.time=0,this.begin=null}setColor(t){for(const e of this.sprites)e.setColor(t)}update(t){let e=!1;for(const i of this.animations)switch(i){case"sine":for(let e=0;e<this.sprites.length;e++){const i=this.sprites[e];i.y=i.baseY+10*Math.sin(e+t/200)}e=!0;break;case"shake":if(this.time+=1,7===this.time){this.time=0;for(let t=0;t<this.sprites.length;t++){const e=this.sprites[t];e.x=e.baseX+5*Math.random(),e.y=e.baseY+5*Math.random()}}e=!0;break;case"typing":this.begin||(this.begin=t);for(let e=0;e<this.sprites.length;e++){this.sprites[e].hidden=(t-this.begin-this.delay)/150<e}e=!0}return e}}class n extends r{#B;#S;constructor(t){super(t,!1,"textures/font.png"),this.#B=t,this.#S=[]}write(t,e,i,s,h="active",r=null,n=null){"center"===e&&(e=Math.floor(this.#B.renderer.w/2-Math.max(...t.split("\n").map(t=>t.length))*s/2)),"center"===i&&(i=Math.floor(this.#B.renderer.h/2-t.split("\n").length*s/2));const o=new a(t,e,i,s,h,r,n);let c=e,l=i;for(const i of t){let t;if("\n"!==i){if(i>="A"&&i<="Z"?t=i.charCodeAt(0)-"A".charCodeAt(0):i>="0"&&i<="9"?t=26+i.charCodeAt(0)-"0".charCodeAt(0):"?"===i?t=36:"!"===i?t=37:","===i?t=38:"."===i?t=39:"'"===i&&(t=40),null!=t){const e=this.add(c,l,s,t,h);e.baseX=c,e.baseY=l,o.sprites.push(e)}c+=s}else l+=s,c=e}return this.#S.push(o),this.changed(),o}clear(){for(const t of this.#S)for(const e of t.sprites)e.enabled=!1;this.#S=[],this.changed()}update(t){for(const t of this.#S.filter(t=>!t.enabled))for(const e of t.sprites)e.enabled=!1;this.#S=this.#S.filter(t=>t.enabled);for(const e of this.#S)e.update(t)&&this.changed();super.update()}}class o extends r{#B;#M;#P;#O;#L;#U;#G;constructor(t,e,i,s,h,r,a,n,o,c="primary",l=0){super(t,!1,"textures/cells.png"),this.#B=t,"center"===e&&(e=this.#B.renderer.w/2-s*(r+(a??0)*(s-1)/s)/2),"center"===i&&(i=this.#B.renderer.h/2-h*(r+(n??0)*(h-1)/h)/2),this.x=e,this.y=i,this.w=s,this.h=h,this.s=r,this.#M=a??0,this.#P=n??0,this.#O=o,this.#L=c;for(let t=0;t<h;t++)for(let e=0;e<s;e++){const i=this.add(this.x+e*this.#N,this.y+t*this.#X,r,l,c);i.setColor(c),i.gridX=e,i.gridY=t}}update(){if(!this.disabled){if(this.#B.input.moved){let t=this.#z(this.#B.input.x,this.#B.input.y);t?.inactive&&(t=null),t===this.#U||this.#G||(this.onactivate||this.#O)&&this.#B.input.mouse&&(this.#U?.inactive||this.#U?.setColor(this.#U?.baseColor||this.#L),t?.setColor("highlight"),this.changed()),this.#U=t}this.#B.input.press&&(this.#G=this.#U,(this.onpress||this.#O)&&this.#B.input.mouse&&(this.#G?.setColor("active"),this.changed())),this.#B.input.click()&&(this.#O&&(this.#G?.setColor(this.#G?.baseColor||this.#L),this.#U&&this.#U===this.#G&&(this.#B.input.clickRead=!0,this.#O(this.#G)),this.changed()),this.#G=null)}super.update()}cellAt(t,e){if(t>=0&&t<this.w&&e>=0&&e<this.h)return this.sprites[this.w*e+t]}#z(t,e){const i=this.#D(t,e);if(i)return this.cellAt(i[0],i[1])}#D(t,e){const i=t-this.x,s=e-this.y,h=Math.trunc(i/this.#N),r=Math.trunc(s/this.#X);if(i>=0&&s>=0&&i-h*this.#N<this.s&&s-r*this.#X<this.s&&h>=0&&h<this.w&&r>=0&&r<this.h)return[h,r]}get#N(){return this.s+this.#M}get#X(){return this.s+this.#P}}class c{#Y;#B;#I;#_;#H;#W;#F;#j;#K;#V;#$;#q;#Q;constructor(t){this.#Y=t}init(t){this.#B=t,this.#_=new o(this.#B,this.#B.renderer.w-74,10,1,1,64,0,0,t=>this.#Z(t)),this.#$=this.#_.sprites[0],this.#$=this.#_.sprites[0],this.#$.write(this.#B.text,"X",32,"active"),this.#H=new r(t),this.#W=this.#H.add("center","center",64,1,this.#Y.color),this.#F=this.#H.add(this.#W.x-12,this.#W.y+60,24,0,this.#Y.color),this.#j=this.#H.add(this.#W.x+46,this.#W.y+60,24,0,this.#Y.color),this.#K=this.#B.text.write(this.#Y.catName,"center",10,24,this.#Y.color,["sine"]),this.#V=this.#B.text.write(this.#Y.catText,"center",this.#W.y+100,32,this.#Y.color,["typing","shake"])}update(){if(this.#q)return new p(this.#B);this.#_.update(),!this.#Q&&this.#B.input.click()&&(this.#B.input.clickRead=!0,this.#W.enabled=!1,this.#F.enabled=!1,this.#j.enabled=!1,this.#H.changed(),this.#K.enabled=!1,this.#V.enabled=!1,this.#B.text.write(this.#Y.title,"center",10,48,"inactive",["sine"]),this.#J(),this.#Q=!0),this.#Q&&this.#I.update(),this.#H.update()}draw(){this.#Q&&!this.#q&&this.#I.draw(),this.#H.draw(),this.#_.draw()}#J(){this.#I=new this.#Y(this.#B,()=>this.#tt(),()=>this.#et()),this.#$=this.#_.sprites[0],this.#$.write(this.#B.text,"X",32,"active")}#tt(){this.#B.scheduleTimer(500,()=>{this.#B.minigamesWon.add(this.#Y),this.#q=!0})}#et(){this.#B.scheduleTimer(500,()=>{this.#J()})}#Z(t){t===this.#$&&(this.#q=!0)}}class l{#B;#it;#st;#ht;#rt;#at;#nt;#ot;#_;#ct;#lt;#gt;#Q;static color="tabbycat";static sx=73;static type=4;static catName="ORANGE CAT, THE USELESS BOYFRIEND";static catText="BET YOU CAN'T BEAT ME!\nI'M THE SMARTEST ORANGE EVER!!";static title="MEOWSWEEPER";constructor(t,e,i){this.#B=t,this.#it=e,this.#st=i,this.#ht=this.#B.renderer.horizontal?20:10,this.#rt=this.#B.renderer.horizontal?10:20,this.#at=10,this.#nt=26;const s=Math.floor(Math.min((this.#B.renderer.w-20)/this.#ht-4*(this.#ht-1)/this.#ht,(this.#B.renderer.h-110)/this.#rt-4*(this.#rt-1)/this.#rt));this.#ot=new o(this.#B,"center",100,this.#ht,this.#rt,s,4,4,t=>this.#dt(t)),this.#_=new o(this.#B,10,10,2,1,64,10,0,t=>this.#Z(t)),this.#ct=this.#_.sprites[0],this.#ct.write(this.#B.text,"O",30,"active"),this.#lt=this.#_.sprites[1],this.#lt.write(this.#B.text,"X",30,"active"),this.#mt("dig"),this.#B.text.write("MEOWSWEEPER","center",10,48,"inactive",["sine"])}update(){(this.#B.input.keyPresses.KeyA||this.#B.input.keyPresses.ArrowLeft)&&this.#mt("dig"),(this.#B.input.keyPresses.KeyD||this.#B.input.keyPresses.ArrowRight)&&this.#mt("flag"),this.#ot.update(),this.#_.update()}draw(){this.#ot.draw(),this.#_.draw()}#dt(t){switch(this.#gt){case"dig":this.#Q||this.#ut(t),this.#pt(t.gridX,t.gridY),t.mine&&(this.#ot.disabled=!0,this.#B.scheduleTimer(2e3,()=>{for(const t of this.#ot.sprites)(t.content||{}).enabled=!1;this.#B.text.changed(),this.#st()}));break;case"flag":t.flagged?(t.flagged=!1,t.content.enabled=!1,this.#B.text.changed()):(t.flagged=!0,t.write(this.#B.text,"X",this.#nt,"highlight"))}}#ut(t){const e=this.#ot.sprites.filter(e=>e!==t&&(Math.abs(e.gridX-t.gridX)>1||Math.abs(e.gridY-t.gridY)>1));for(let t=0;t<this.#at;t++){const t=Math.floor(Math.random()*e.length),i=e[t];e.splice(t,1),i.mine=!0}for(let t=0;t<this.#ot.h;t++)for(let e=0;e<this.#ot.w;e++){let i=this.#ot.cellAt(e,t);if(!i.mine){i.mines=0;for(let s=-1;s<=1;s++)for(let h=-1;h<=1;h++)this.#ot.cellAt(e+h,t+s)?.mine&&(i.mines+=1)}}this.#Q=!0}#pt(t,e){this.#B.shake(200);const i=this.#ot.cellAt(t,e);if(i?.flagged&&(i.flagged=!1,i.content.enabled=!1),i?.enabled&&!i?.opened)if(i.opened=!0,i.activate(!1),0===i.mines)i.hidden=!0,this.#pt(t,e-1),this.#pt(t,e+1),this.#pt(t-1,e),this.#pt(t+1,e);else if(i.mine)for(const t of this.#ot.sprites.filter(t=>t.mine))t.activate(!1),t.write(this.#B.text,"X",this.#nt,"inactive10");else i.write(this.#B.text,i.mines,this.#nt,`inactive${i.mines}`);this.#ot.sprites.filter(t=>!t.opened).every(t=>t.mine)&&this.#it()}#Z(t){t===this.#lt?this.#mt("flag"):t===this.#ct&&this.#mt("dig")}#mt(t){this.#gt=t,this.#ct.activate("dig"!==this.#gt),this.#lt.activate("flag"!==this.#gt),this.#_.changed()}}class g{#B;#it;#st;#ot;#H;#ft;#wt;static color="orangecat";static sx=73;static type=2;static catName="ORANGE CAT, THE USELESS BOYFRIEND";static catText="BET YOU CAN'T BEAT ME!\nI'M THE SMARTEST ORANGE EVER!!";static title="PAW PAW TOE";constructor(t,e,i){this.#B=t,this.#it=e,this.#st=i,this.#ot=new o(this.#B,"center","center",3,3,96,20,20,t=>this.#dt(t)),this.#H=new r(this.#B)}update(){this.#ot.update(),this.#H.update()}draw(){this.#ot.draw(),this.#H.draw()}#dt(t){t.symbol||(this.#bt(t,"X"),this.#ot.disabled=!0,this.#ft=this.#B.scheduleTimer(1e3,()=>{if(!this.#wt){const t=this.#ot.sprites.filter(t=>!t.symbol);t.length>0&&(this.#bt(t[Math.floor(Math.random()*t.length)],"O"),this.#ot.disabled=!1,this.#ot.changed())}}))}#bt(t,e){this.#wt||(this.#B.shake(200),t.symbol=e,t.activate(!1),t.draw(this.#H,64,0,"X"===e?"blackcat":"orangecat"),this.#xt())}#xt(){for(let t=0;t<3;t++){const e=new Map;for(let i=0;i<3;i++){const s=this.#ot.cellAt(i,t);e.set(s.symbol,(e.get(s.symbol)||0)+1)}if(3===e.get("X"))return this.#tt("X");if(3===e.get("O"))return this.#tt("O")}for(let t=0;t<3;t++){const e=new Map;for(let i=0;i<3;i++){const s=this.#ot.cellAt(t,i);e.set(s.symbol,(e.get(s.symbol)||0)+1)}if(3===e.get("X"))return this.#tt("X");if(3===e.get("O"))return this.#tt("O")}return"X"===this.#ot.cellAt(0,0).symbol&&"X"===this.#ot.cellAt(1,1).symbol&&"X"===this.#ot.cellAt(2,2).symbol?this.#tt("X"):"O"===this.#ot.cellAt(0,0).symbol&&"O"===this.#ot.cellAt(1,1).symbol&&"O"===this.#ot.cellAt(2,2).symbol?this.#tt("O"):"X"===this.#ot.cellAt(2,0).symbol&&"X"===this.#ot.cellAt(1,1).symbol&&"X"===this.#ot.cellAt(0,2).symbol?this.#tt("X"):"O"===this.#ot.cellAt(2,0).symbol&&"O"===this.#ot.cellAt(1,1).symbol&&"O"===this.#ot.cellAt(0,2).symbol?this.#tt("O"):void 0}#tt(t){this.#wt=!0,this.#ot.disabled=!0,(this.#ft||{}).disabled=!0,"X"===t?this.#it():"O"===t&&this.#st()}}class d{#B;#it;#H;#At;#vt;#_;#yt;static color="blackcat";static sx=73;static type=3;static catName="ORANGE CAT, THE USELESS BOYFRIEND";static catText="BET YOU CAN'T BEAT ME!\nI'M THE SMARTEST ORANGE EVER!!";static title="SUDOCAT";constructor(t,e){this.#B=t,this.#it=e,this.#H=new r(this.#B,!0),this.#At=[];const i=Math.floor(Math.min((this.#B.renderer.w-20)/3-32/3,(this.#B.renderer.h-200)/3-32/3));this.#vt=Math.floor(Math.min((i-0)/3-10/3,(i-0)/3-10/3));const s=this.#B.renderer.w/2-3*(i+32/3)/2;for(let t=0;t<3;t++)for(let e=0;e<3;e++){const h=new o(this.#B,s+e*(i+16),100+t*(i+16),3,3,this.#vt,5,5,t=>this.#dt(t));this.#At.push(h)}this.#_=new o(this.#B,"center",this.#B.renderer.h-74,10,1,64,10,0,t=>this.#Z(t));for(let t=1;t<=10;t++){const e=this.#_.sprites[t-1];e.draw(this.#H,128/3,t+5),e.digit=t<=9?t:null}this.#Bt(),this.#kt(1),this.#B.text.write("SUDOCAT","center",10,48,"inactive",["sine"])}update(){for(let t=1;t<=9;t++)this.#B.input.keyPresses[`Digit${t}`]&&this.#kt(t);(this.#B.input.keyPresses.KeyA||this.#B.input.keyPresses.ArrowLeft)&&this.#yt>1&&this.#kt(this.#yt-1),(this.#B.input.keyPresses.KeyD||this.#B.input.keyPresses.ArrowRight)&&this.#yt<9&&this.#kt(this.#yt+1),(this.#B.input.keyPresses.KeyX||this.#B.input.keyPresses.Digit0)&&this.#kt(null),this.#H.update();for(const t of this.#At)t.update();this.#_.update()}draw(){for(const t of this.#At)t.draw();this.#_.draw(),this.#H.draw()}#Et(t,e){return this.#At[3*Math.floor(e/3)+Math.floor(t/3)]}#Tt(t,e){return this.#Et(t,e).cellAt(t%3,e%3)}#Bt(){const t=[[6,8,0,1,0,0,0,9,0,0,3,4,5,0,8,0,2,0,2,1,0,0,6,0,3,0,0,5,0,0,4,0,7,0,0,9,3,4,2,9,0,0,0,0,6,0,0,7,0,8,0,5,0,0,9,2,0,8,0,0,0,5,3,0,0,3,2,0,0,9,1,8,0,0,0,3,0,0,0,6,7]],e=t[Math.floor(Math.random()*t.length)];for(let t=0;t<9;t++)for(let i=0;i<9;i++){const s=e[9*t+i];if(0!==s){const e=this.#Tt(i,t);e.activate(!1),e.digit=s,e.draw(this.#H,2*this.#vt/3,s+5)}}}#dt(t){t.digit=this.#yt,(t.content||{}).enabled=!1,this.#yt&&t.draw(this.#H,2*this.#vt/3,this.#yt+5),this.#Rt()&&this.#it(),this.#B.text.changed(),this.#H.changed()}#Rt(){let t=!0;this.#Ct();for(let e=0;e<9;e++)t&=this.#St(e),t&=this.#Mt(e),t&=this.#xt(e);return t}#Ct(){for(let t=0;t<9;t++)for(let e=0;e<9;e++){const i=this.#Tt(e,t);i.inactive||i.setBaseColor("primary")}for(let t=0;t<9;t++)this.#At[t].changed()}#St(t){let e=!0;const i=new Map;for(let e=0;e<9;e++){const s=this.#Tt(t,e);i.set(s.digit,(i.get(s.digit)||0)+1)}for(const[s,h]of i.entries())if(null==s)e=!1;else if(h>1){e=!1;for(let e=0;e<9;e++){const i=this.#Tt(t,e);i.inactive||i.digit!=s||(i.setBaseColor("active"),this.#Et(t,e).changed())}}return e}#Mt(t){let e=!0;const i=new Map;for(let e=0;e<9;e++){const s=this.#Tt(e,t);i.set(s.digit,(i.get(s.digit)||0)+1)}for(const[s,h]of i.entries())if(null==s)e=!1;else if(h>1){e=!1;for(let e=0;e<9;e++){const i=this.#Tt(e,t);i.inactive||i.digit!=s||(i.setBaseColor("active"),this.#Et(e,t).changed())}}return e}#xt(t){let e=!0;const i=new Map,s=this.#At[t];for(let t=0;t<9;t++){const e=s.sprites[t];i.set(e.digit,(i.get(e.digit)||0)+1)}for(const[t,h]of i.entries())if(null==t)e=!1;else if(h>1){e=!1;for(let e=0;e<9;e++){const i=s.sprites[e];i.inactive||i.digit!=t||(i.setBaseColor("active"),s.changed())}}return e}#Z(t){t&&this.#kt(t.digit)}#kt(t){this.#yt=t;for(const t of this.#_.sprites)t.activate(!0);this.#_.sprites[null!=t?t-1:9].activate(!1),this.#_.changed()}}class m{#B;#it;#ot;#H;#Pt;#Ot;#Lt;#ft;static color="whitecat";static sx=8;static type=2;static catName="ORANGE CAT, THE USELESS BOYFRIEND";static catText="BET YOU CAN'T BEAT ME!\nI'M THE SMARTEST ORANGE EVER!!";static title="MEOWMORY";constructor(t,e){this.#B=t,this.#it=e;const i=Math.floor(Math.min((t.renderer.w-20)/6-80/6,(t.renderer.h-110)/5-12.8));this.#ot=new o(t,"center",100,6,5,i,16,16,t=>this.#dt(t)),this.#H=new r(t,!0);const s=this.#ot.sprites.slice();for(let t=0;t<15;t++){const e=Math.floor(Math.random()*s.length),i=s[e];s.splice(e,1);const h=Math.floor(Math.random()*s.length),r=s[h];s.splice(h,1),i.secret=t,r.secret=t}t.text.write("MEOWMORY","center",10,48,"inactive",["sine"])}update(){this.#ot.update(),this.#H.update()}draw(){this.#ot.draw(),this.#H.draw()}#dt(t){t.open||(this.#Ot&&this.#Lt&&this.#Ut(),t.open=!0,t.draw(this.#H,2*this.#ot.s/3,t.secret,t.secret<5?"tabbycat":null),t.setBaseColor("active"),this.#Pt?(t.secret===this.#Pt.secret?(t.found=!0,t.activate(!1),this.#Pt.found=!0,this.#Pt.activate(!1),this.#ot.sprites.every(t=>t.found)&&this.#it()):(this.#Ot=this.#Pt,this.#Lt=t,this.#ft=this.#B.scheduleTimer(1e3,()=>this.#Ut())),this.#Pt=!1):this.#Pt=t)}#Ut(){(this.#ft||{}).disabled=!0,this.#Ot.open=!1,this.#Ot.content.enabled=!1,this.#Ot.setBaseColor("primary"),this.#Lt.open=!1,this.#Lt.content.enabled=!1,this.#Lt.setBaseColor("primary"),this.#ot.changed(),this.#B.text.changed(),this.#H.changed(),this.#Ot=null,this.#Lt=null}}class u{#B;#it;#Gt;#Nt;#Xt;#zt;#ht;#rt;#ot;#_;#Dt;#lt;#gt;static color="silvercat";static sx=8;static type=3;static catName="ORANGE CAT, THE USELESS BOYFRIEND";static catText="BET YOU CAN'T BEAT ME!\nI'M THE SMARTEST ORANGE EVER!!";static title="MEOWSTERPIECE";constructor(t,e){this.#B=t,this.#it=e,this.#Gt=[[0],[1,1],[2,2],[5],[2,1,2,1],[5,2],[3,1],[6,2],[1,5,1],[8],[2,4]],this.#Nt=[[1,2],[4,1,1],[3,6],[7],[3,6],[4,4],[1,3],[2],[3,1],[2,3]],this.#Xt=Math.max(...this.#Gt.map(t=>t.length)),this.#zt=Math.max(...this.#Nt.map(t=>t.length)),this.#ht=this.#Nt.length+this.#Xt,this.#rt=this.#Gt.length+this.#zt;const i=Math.floor(Math.min((this.#B.renderer.w-20)/this.#ht-2*(this.#ht-1)/this.#ht,(this.#B.renderer.h-110)/this.#rt-2*(this.#rt-1)/this.#rt));this.#ot=new o(this.#B,"center",100,this.#ht,this.#rt,i,2,2,t=>this.#dt(t));for(let t=0;t<this.#ht;t++)for(let e=0;e<this.#zt;e++){const s=this.#ot.cellAt(t,e);t<this.#Xt||e<this.#zt-this.#Nt[t-this.#Xt].length?s.hidden=!0:(s.write(this.#B.text,this.#Nt[t-this.#Xt][e-(this.#zt-this.#Nt[t-this.#Xt].length)],2*i/3,"highlight"),s.activate(!1))}for(let t=0;t<this.#ht;t++)for(let e=0;e<this.#Xt;e++){const i=this.#ot.cellAt(e,t);t<this.#zt||e<this.#Xt-this.#Gt[t-this.#zt].length?i.hidden=!0:(i.write(this.#B.text,this.#Gt[t-this.#zt][e-(this.#Xt-this.#Gt[t-this.#zt].length)],2*this.#ot.s/3,"highlight"),i.activate(!1))}this.#_=new o(this.#B,10,10,2,1,64,10,0,t=>this.#Z(t)),this.#Dt=this.#_.sprites[0],this.#Dt.write(this.#B.text,"O",30,"active"),this.#lt=this.#_.sprites[1],this.#lt.write(this.#B.text,"X",30,"active"),this.#mt("mark"),this.#ot.changed(),this.#B.text.write("MEOWSTERPIECE","center",10,48,"inactive",["sine"])}update(){(this.#B.input.keyPresses.KeyA||this.#B.input.keyPresses.ArrowLeft)&&this.#mt("mark"),(this.#B.input.keyPresses.KeyD||this.#B.input.keyPresses.ArrowRight)&&this.#mt("flag"),this.#ot.update(),this.#_.update()}draw(){this.#ot.draw(),this.#_.draw()}#dt(t){switch((t.content||{}).enabled=!1,this.#gt){case"mark":"marked"!==t.state?(t.state="marked",t.setBaseColor("active")):(t.state=null,t.setBaseColor("primary"));break;case"flag":t.setBaseColor("primary"),"flagged"!==t.state?(t.state="flagged",t.write(this.#B.text,"X",2*this.#ot.s/3,"highlight")):t.state=null}this.#B.text.changed(),this.#xt()}#Z(t){t===this.#lt?this.#mt("flag"):t===this.#Dt&&this.#mt("mark")}#mt(t){this.#gt=t,this.#Dt.activate("mark"!==this.#gt),this.#lt.activate("flag"!==this.#gt),this.#_.changed()}#xt(){let t=0;for(let e=this.#Xt;e<this.#ht;e++){for(let t=0;t<this.#zt;t++)this.#ot.cellAt(e,t).setBaseColor("inactive");let i=0,s=0,h=0;for(let t=this.#zt;t<this.#rt;t++)"marked"===this.#ot.cellAt(e,t).state&&(i+=1),"marked"===this.#ot.cellAt(e,t).state&&t!==this.#rt-1||((i>0||t===this.#rt-1)&&s<this.#Nt[e-this.#Xt].length&&(i>this.#Nt[e-this.#Xt][s]?this.#ot.cellAt(e,s+(this.#zt-this.#Nt[e-this.#Xt].length)).setBaseColor("highlight"):i===this.#Nt[e-this.#Xt][s]&&(this.#ot.cellAt(e,s+(this.#zt-this.#Nt[e-this.#Xt].length)).setBaseColor("primary3"),h+=1),s+=1),i=0);h===this.#Nt[e-this.#Xt].length&&(t+=1)}for(let e=this.#zt;e<this.#rt;e++){for(let t=0;t<this.#Xt;t++)this.#ot.cellAt(t,e).setBaseColor("inactive");let i=0,s=0,h=0;for(let t=this.#Xt;t<this.#ht;t++)"marked"===this.#ot.cellAt(t,e).state&&(i+=1),"marked"===this.#ot.cellAt(t,e).state&&t!==this.#ht-1||((i>0||t===this.#ht-1)&&s<this.#Gt[e-this.#zt].length&&(i>this.#Gt[e-this.#zt][s]?this.#ot.cellAt(s+(this.#Xt-this.#Gt[e-this.#zt].length),e).setBaseColor("highlight"):i===this.#Gt[e-this.#zt][s]&&(this.#ot.cellAt(s+(this.#Xt-this.#Gt[e-this.#zt].length),e).setBaseColor("primary3"),h+=1),s+=1),i=0);h===this.#Gt[e-this.#zt].length&&(t+=1)}t===this.#ht-this.#Xt+(this.#rt-this.#zt)&&this.#it()}}class p{#B;#Yt;#ot;#_;#H;#It;#_t;#Ht;#Wt;#Ft;init(t){this.#B=t,this.#Yt=t.firstStart,t.firstStart=!1,this.#ot=new o(this.#B,"center",100,6,15,128,0,0,null,"",2),this.#ot.disabled=!0,this.#_=new o(this.#B,"center",132,3,7,128,64,64,t=>this.#Z(t),"",1),this.#Yt?(this.#_.disabled=!0,this.#_t=-this.#B.renderer.h):this.#B.text.write("HELP THE OTHER CATS\nIN THE BUILDING!!","center",10,32,"active",["typing","shake"]),this.#H=new r(this.#B);const e=[g,l,m,d,u];for(let t=0;t<21;t++)if(!e[t]||0!=t&&this.#Yt)this.#_.sprites[t].activate(!1);else{this.#_.sprites[t].minigame=e[t];let i=e[t].sx,s=73,h=e[t].type;this.#B.minigamesWon.has(e[t])&&(this.#_.sprites[t].activate(!1),i=39,s=39,h=1),this.#H.add(this.#_.sprites[t].x+i,this.#_.sprites[t].y+s,50,h,e[t].color)}this.#Ht=this.#H.add("center",t.renderer.h,900,1,"black");for(let t=0;t<this.#_.sprites.length;t++){const e=this.#_.sprites[t];this.#B.minigamesWon.has(e.minigame)&&e.activate(!1)}}update(){if(this.#Yt)if(this.#_t<0)this.#_t+=3,this.#_t>=0&&(this.#_t=0,this.#B.shake(200)),this.#B.renderer.projection=t.ortho(0,this.#B.renderer.w,this.#B.renderer.h+this.#_t,this.#_t);else if(this.#Wt)this.#Ft?this.#_.disabled=!1:this.#B.input.click()&&(this.#B.input.clickRead=!0,this.#Ht.hidden=!0,this.#H.changed(),this.#B.text.clear(),this.#Ft=!0,this.#B.text.write("LET'S START WITH\nTHIS GENIUS ORANGE!","center",10,32,"active",["typing","shake"]));else{if(this.#Ht.y-=3,this.#Ht.y<=this.#B.renderer.h/2-this.#Ht.size/2){this.#Wt=!0,this.#Ht.y=this.#B.renderer.h/2-this.#Ht.size/2;const t=this.#B.text.write("  A VOIDING\nYOUR PROBLEMS","center","center",48,null,["sine"]);this.#B.text.write("  A GAME BY\nATTILA HORVATH","center",t.y+200,36,"whitecat",["shake"]),this.#B.text.write("TAP TO BEGIN","center",t.y+300,36,"inactive",["typing","shake"],1200),this.#B.shake(500)}this.#Ht.x=this.#B.renderer.w/2-this.#Ht.size/2,this.#H.changed()}if(this.#ot.update(),this.#H.update(),this.#It)return this.#It;this.#_.update()}draw(){this.#ot.draw(),this.#_.draw(),this.#H.draw()}#Z(t){t&&(this.#It=new c(t.minigame))}}const f=new class{#Q;#jt;#Kt;#H;#Vt;#$t;#qt;#Qt;constructor(){this.renderer=new i(()=>{if(!this.#Q){for(let t=0;t<100;t++){const t=Math.floor(15*Math.random());let e=null;t<5&&(e=["blackcat","orangecat","whitecat","tabbycat","silvercat"][Math.floor(5*Math.random())]);const i=this.#Kt.add(Math.random()*this.renderer.w,Math.random()*this.renderer.h,16+100*Math.random(),t,e);i.dx=-.5+Math.random(),i.dy=-.5+Math.random(),i.ds=.2*Math.random()-.1}this.#$t=new p,this.#$t.init(this),this.#Q=!0}}),this.input=new s(this),this.#jt=[],this.#Kt=new r(this,!0),this.text=new n(this),this.#H=new r(this),this.#Vt=this.#H.add(0,0,26,0,"blackcat"),this.#Vt.hidden=!0,this.minigamesWon=new Set,this.firstStart=!0}step(t){this.timestamp=t,this.#Zt(t),this.#Jt(),this.#qt&&(this.text.clear(),this.#$t=this.#qt,this.#$t.init(this),this.#qt=null)}scheduleTimer(t,e,i){const s={start:this.timestamp??0,delay:t,onexpire:e,repeat:i};return this.#jt.push(s),s}shake(t){navigator.vibrate(t),this.#Qt=!0,this.scheduleTimer(t,()=>this.#Qt=!1)}#Zt(t){this.#Qt?(this.renderer.view[6]=7*Math.random(),this.renderer.view[7]=7*Math.random()):(this.renderer.view[6]=0,this.renderer.view[7]=0),this.input.update(),this.input.mouse&&this.#Vt.hidden&&(this.#Vt.hidden=!1,this.#H.changed()),this.input.moved&&(this.#Vt.x=this.input.x-6,this.#Vt.y=this.input.y-6,this.#H.changed());for(const t of this.#Kt.sprites)t.x+=t.dx,t.y+=t.dy,t.size+=t.ds,t.x<0&&(t.dx=-t.dx,t.x=0),t.y<0&&(t.dy=-t.dy,t.y=0),t.x>this.renderer.w&&(t.dx=-t.dx,t.x=this.renderer.w),t.y>this.renderer.h&&(t.dy=-t.dy,t.y=this.renderer.h),t.size<16&&(t.ds=-t.ds,t.size=16),t.size>116&&(t.ds=-t.ds,t.size=116);this.#Kt.changed(),this.#Kt.update(),this.#te(t),this.#$t&&(this.#qt=this.#$t.update()),this.text.update(t),this.#H.update()}#te(t){for(const e of this.#jt)t>=e.start+e.delay&&!e.disabled&&(e.repeat?e.start=t:e.expired=!0,e.onexpire&&e.onexpire());this.#jt.some(t=>t.expired||t.disabled)&&(this.#jt=this.#jt.filter(t=>!t.expired&&!t.disabled))}#Jt(){this.renderer.clear();const e=this.renderer.projection;this.renderer.projection=t.ortho(0,this.renderer.w,this.renderer.h,0),this.#Kt.draw(),this.renderer.projection=e,this.#$t&&this.#$t.draw(),this.text.draw(),this.renderer.projection=t.ortho(0,this.renderer.w,this.renderer.h,0),this.#H.draw(),this.renderer.projection=e}};requestAnimationFrame(function t(e){requestAnimationFrame(t),f.step(e)})}();
//# sourceMappingURL=bundle.js.map
