!function(){"use strict";class t extends Float32Array{static identity(){return new t([1,0,0,0,1,0,0,0,1])}static ortho(s,i,e,h){return new t([2/(i-s),0,0,0,2/(h-e),0,-(i+s)/(i-s),-(h+e)/(h-e),1])}}class s{#t;#s;#i;#e;#h;constructor(t,s,i){const e=this.#r(t,t.VERTEX_SHADER,s),h=this.#r(t,t.FRAGMENT_SHADER,i);this.#t=t.createProgram();const r=t.attachShader.bind(t),a=t.bindAttribLocation.bind(t),n=t.getUniformLocation.bind(t);r(this.#t,e),r(this.#t,h),a(this.#t,0,"vp"),a(this.#t,1,"vertexColor"),a(this.#t,2,"vt"),a(this.#t,3,"sp"),a(this.#t,4,"ss"),a(this.#t,5,"st"),a(this.#t,6,"sc"),a(this.#t,7,"sa"),t.linkProgram(this.#t),this.#s=n(this.#t,"v"),this.#i=n(this.#t,"p"),this.#e=n(this.#t,"tex"),this.#h=n(this.#t,"is")}use(t,s,i){t.useProgram(this.#t),this.setup(t,s,i)}setup(t,s,i){null!=this.#s&&t.uniformMatrix3fv(this.#s,!1,s),null!=this.#i&&t.uniformMatrix3fv(this.#i,!1,i),null!=this.#e&&t.uniform1i(this.#e,0),null!=this.#h&&t.uniform1f(this.#h,16)}#r(t,s,i){const e=t.createShader(s);return t.shaderSource(e,i),t.compileShader(e),e}}class i{#a;#n;#c;#o;#l;#g;#d;#m;constructor(s){this.#a=s,document.body.style.margin="0",document.body.style.padding="0",this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.canvas.style.width="100dvw",this.canvas.style.height="100dvh",this.canvas.style.cursor="none",this.canvas.style.touchAction="none",new ResizeObserver(()=>{this.w=this.canvas.clientWidth,this.h=this.canvas.clientHeight,this.canvas.width=this.w,this.canvas.height=this.h,this.horizontal=this.w>this.h,this.#n.viewport(0,0,this.w,this.h),this.p=t.ortho(0,this.w,this.h,0),this.#a()}).observe(this.canvas,{box:"content-box"}),document.body.appendChild(this.canvas),this.#n=this.canvas.getContext("webgl2"),this.#n.viewport(0,0,this.canvas.width,this.canvas.height),this.#n.clearColor(.68,.68,.94,1),this.#n.pixelStorei(this.#n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.#n.enable(this.#n.BLEND),this.#n.blendFunc(this.#n.ONE,this.#n.ONE_MINUS_SRC_ALPHA),this.quadBuffer=this.#u(),this.#c=new Map,this.#o=new Map,this.#l=[],this.v=t.identity(),this.p=t.ortho(0,0,this.canvas.width,this.canvas.height)}createShader(t,i,e){const h=this.#c.get(t);if(h)return h;const r=new s(this.#n,i,e);return this.#c.set(t,r),r}createVao(){const t=this.#n.createVertexArray();return this.#n.bindVertexArray(t),t}createBuffer(t,s){const i=this.#n.createBuffer();return this.updateBuffer(i,t,s),i}updateBuffer(t,s,i){this.useBuffer(t),this.#n.bufferData(this.#n.ARRAY_BUFFER,s,i?this.#n.DYNAMIC_DRAW:this.#n.STATIC_DRAW)}useBuffer(t){this.#n.bindBuffer(this.#n.ARRAY_BUFFER,t)}a(t,s,i,e,h){this.#n.vertexAttribPointer(t,s,this.#n.FLOAT,!1,i,e),this.#n.enableVertexAttribArray(t),null!=h&&this.#n.vertexAttribDivisor(t,h)}loadTexture(t,s){const i=`textures/${t}.png`,e=this.#o.get(`${i}_${s}`);if(e)return e;const h=this.#n.createTexture();this.#p(h,null,s);const r=this.#l.length,a=new Image;return a.src=i,a.onload=()=>this.#p(h,r,s),this.#o.set(`${i}_${s}`,h),this.#l[r]=a,h}clear(){this.#n.clear(this.#n.COLOR_BUFFER_BIT)}d(t,s,i,e,h){t!==this.#g?(t.use(this.#n,this.v,this.p),this.#g=t):this.#g.setup(this.#n,this.v,this.p),s!==this.#d&&(this.#n.bindVertexArray(s),this.#d=s),i!==this.#m&&(this.#n.activeTexture(this.#n.TEXTURE0),this.#n.bindTexture(this.#n.TEXTURE_2D,i),this.#m=i),null!=h?this.#n.drawArraysInstanced(this.#n.TRIANGLES,0,e,h):this.#n.drawArrays(this.#n.TRIANGLES,0,e)}#u(){return this.createBuffer(new Float32Array([0,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,1,1,1]),!1)}#p(t,s,i){this.#n.activeTexture(this.#n.TEXTURE0),this.#n.bindTexture(this.#n.TEXTURE_2D,t),null!=s?this.#n.texImage2D(this.#n.TEXTURE_2D,0,this.#n.RGBA,this.#n.RGBA,this.#n.UNSIGNED_BYTE,this.#l[s]):this.#n.texImage2D(this.#n.TEXTURE_2D,0,this.#n.RGBA,1,1,0,this.#n.RGBA,this.#n.UNSIGNED_BYTE,new Uint8Array([255,0,255,255])),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_WRAP_S,this.#n.CLAMP_TO_EDGE),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_WRAP_T,this.#n.CLAMP_TO_EDGE),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_MIN_FILTER,i?this.#n.LINEAR:this.#n.NEAREST),this.#n.texParameteri(this.#n.TEXTURE_2D,this.#n.TEXTURE_MAG_FILTER,i?this.#n.LINEAR:this.#n.NEAREST)}}class e{#f;#w;#b;#x;#A;#E;constructor(t){this.#f={},this.#w={},t.renderer.canvas.addEventListener("pointermove",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY}),t.renderer.canvas.addEventListener("pointerdown",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#b=!0}),t.renderer.canvas.addEventListener("pointerup",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#x=!0}),addEventListener("keydown",t=>{this.#f[t.code]=!0}),addEventListener("keyup",t=>{this.#w[t.code]=!0})}u(){this.x===this.#A&&this.y===this.#E||(this.#A=this.x,this.#E=this.y,this.moved=!0),this.press=!1,this.#b&&(this.press=!0,this.#b=!1),this.release=!1,this.#x&&(this.release=!0,this.#x=!1),this.keyPresses={};for(const[t,s]of Object.entries(this.#f))s&&(this.keyPresses[t]=!0,this.#f[t]=!1);this.keyReleases={};for(const[t,s]of Object.entries(this.#w))s&&(this.keyReleases[t]=!0,this.#w[t]=!1);this.clickRead=!1}click(){return!this.clickRead&&(this.mouse&&this.release||!this.mouse&&this.press)}}class h{constructor(t,s,i,e,h){this.x=t,this.y=s,this.size=i,this.type=e,this.angle=0,this.enabled=!0,this.hidden=!1,this.a=1,this.cc(h)}attributes(){return[this.x,this.y,this.size,this.type,this.r,this.g,this.b,this.hidden?0:this.a,this.angle]}cb(t){this.baseColor=t,this.cc(t)}cc(t){switch(t){case"primary":this.r=.85,this.g=.86,this.b=1;break;case"background":this.r=.68,this.g=.68,this.b=.94;case"highlight":this.r=.76,this.g=.55,this.b=.58;break;case"active":this.r=.65,this.g=.4,this.b=.44;break;case"inactive":this.r=.34,this.g=.34,this.b=.46;break;case"bc":this.r=.33,this.g=.33,this.b=.33;break;case"oc":this.r=.7,this.g=.45,this.b=.08;break;case"wc":this.r=.9,this.g=.9,this.b=.9;break;case"tc":this.r=.64,this.g=.56,this.b=.38;break;case"sc":this.r=.6,this.g=.6,this.b=.6;break;case"black":this.r=0,this.g=0,this.b=0;break;case"primary1":case"inactive1":this.#v(144,168,195);break;case"inactive2":this.#v(70,157,137);break;case"inactive3":this.#v(181,201,154);break;case"inactive4":this.#v(0,166,251);break;case"inactive5":this.#v(76,201,240);break;case"inactive6":this.#v(244,202,224);break;case"inactive7":this.#v(229,0,164);break;case"inactive8":this.#v(242,0,137);break;case"inactive9":this.#v(255,255,255);break;case"inactive10":this.r=1,this.g=.8,this.b=.94;break;default:this.r=1,this.g=1,this.b=1}}activate(t){this.inactive=!t,this.cc(t?this.baseColor||"primary":"inactive")}w(t,s,i,e="active",h=null,r=null){(this.content||{}).enabled=!1,this.content=t.w(s.toString(),this.x+(this.size-i)/2,this.y+(this.size-i)/2,i,e,h,r)}d(t,s,i,e){(this.content||{}).enabled=!1,this.content=t.add(this.x+(this.size-s)/2,this.y+(this.size-s)/2,s,i,e)}#v(t,s,i){this.r=t/255,this.g=s/255,this.b=i/255}}class r{#T;#k;#y;#R;#B;#S;constructor(t,s=!1,i="sprites"){this.#T=t,this.#k=this.#T.renderer.createShader("sprite","#version 300 es\nuniform mat3 v;uniform mat3 p;uniform float is;uniform sampler2D tex;in vec2 vp;in vec2 vt;in vec2 sp;in float ss;in float st;in vec4 sc;in float sa;out vec2 tc;out vec4 tint;void main(){vec2 texOffset=vec2(is/float(textureSize(tex,0)),is/float(textureSize(tex,0).y));tc=vec2(texOffset.x,0.0)*st+vt*texOffset;tint=sc;tint.rgb*=tint.a;gl_Position=vec4(p*v*vec3(vp*ss+sp,1.0),1.0);}","#version 300 es\nprecision highp float;uniform sampler2D tex;in vec2 tc;in vec4 tint;out vec4 fc;void main(){fc=texture(tex,tc)*tint;}"),this.#y=this.#T.renderer.createVao(),this.#T.renderer.useBuffer(this.#T.renderer.quadBuffer),this.#T.renderer.a(0,2,16,0),this.#T.renderer.a(2,2,16,8),this.#R=this.#T.renderer.createBuffer(new Float32Array,!0),this.#T.renderer.a(3,2,36,0,1),this.#T.renderer.a(4,1,36,8,1),this.#T.renderer.a(5,1,36,12,1),this.#T.renderer.a(6,4,36,16,1),this.#T.renderer.a(7,1,36,32,1),this.#B=this.#T.renderer.loadTexture(i,s),this.sprites=[],this.c()}add(t,s,i,e,r){"c"===t&&(t=this.#T.renderer.w/2-i/2),"c"===s&&(s=this.#T.renderer.h/2-i/2);const a=new h(t,s,i,e,r);return this.sprites.push(a),this.c(),a}c(){this.#S=!0}u(){this.#S&&(this.sprites=this.sprites.filter(t=>t.enabled),this.#T.renderer.updateBuffer(this.#R,new Float32Array(this.sprites.map(t=>t.attributes()).flat()),!0),this.#S=!1)}d(){this.#T.renderer.d(this.#k,this.#y,this.#B,6,this.sprites.length)}}class a{constructor(t,s,i,e,h,r,a){this.text=t,this.x=s,this.y=i,this.size=e,this.color=h,this.animations=r??[],this.delay=a??0,this.sprites=[],this.enabled=!0,this.time=0,this.begin=null}cc(t){for(const s of this.sprites)s.cc(t)}u(t){let s=!1;for(const i of this.animations)switch(i){case"sine":for(let s=0;s<this.sprites.length;s++){const i=this.sprites[s];i.y=i.baseY+10*Math.sin(s+t/200)}s=!0;break;case"shake":if(this.time+=1,7===this.time){this.time=0;for(let t=0;t<this.sprites.length;t++){const s=this.sprites[t];s.x=s.baseX+5*Math.random(),s.y=s.baseY+5*Math.random()}}s=!0;break;case"typing":this.begin||(this.begin=t);for(let s=0;s<this.sprites.length;s++){this.sprites[s].hidden=(t-this.begin-this.delay)/150<s}s=!0}return s}}class n extends r{#T;#C;constructor(t){super(t,!1,"font"),this.#T=t,this.#C=[]}w(t,s,i,e,h="active",r=null,n=null){"c"===s&&(s=Math.floor(this.#T.renderer.w/2-Math.max(...t.split("\n").map(t=>t.length))*e/2)),"c"===i&&(i=Math.floor(this.#T.renderer.h/2-t.split("\n").length*e/2));const c=new a(t,s,i,e,h,r,n);let o=s,l=i;for(const i of t){let t;if("\n"!==i){if(i>="A"&&i<="Z"?t=i.charCodeAt(0)-"A".charCodeAt(0):i>="0"&&i<="9"?t=26+i.charCodeAt(0)-"0".charCodeAt(0):"?"===i?t=36:"!"===i?t=37:","===i?t=38:"."===i?t=39:"'"===i&&(t=40),null!=t){const s=this.add(o,l,e,t,h);s.baseX=o,s.baseY=l,c.sprites.push(s)}o+=e}else l+=e,o=s}return this.#C.push(c),this.c(),c}clear(){for(const t of this.#C)for(const s of t.sprites)s.enabled=!1;this.#C=[],this.c()}u(t){for(const t of this.#C.filter(t=>!t.enabled))for(const s of t.sprites)s.enabled=!1;this.#C=this.#C.filter(t=>t.enabled);for(const s of this.#C)s.u(t)&&this.c();super.u()}}class c extends r{#T;#M;#O;#I;#L;#N;#P;constructor(t,s,i,e,h,r,a,n,c,o="primary",l=0){super(t,!1,"cells"),this.#T=t,"c"===s&&(s=t.renderer.w/2-e*(r+(a??0)*(e-1)/e)/2),"c"===i&&(i=t.renderer.h/2-h*(r+(n??0)*(h-1)/h)/2),this.x=s,this.y=i,this.w=e,this.h=h,this.s=r,this.#M=a??0,this.#O=n??0,this.#I=c,this.#L=o;for(let t=0;t<h;t++)for(let h=0;h<e;h++){const e=this.add(s+h*this.#U,i+t*this.#D,r,l,o);e.cc(o),e.gridX=h,e.gridY=t}}u(){if(!this.disabled){if(this.#T.input.moved){let t=this.#H(this.#T.input.x,this.#T.input.y);t?.inactive&&(t=null),t===this.#N||this.#P||this.#I&&this.#T.input.mouse&&(this.#N?.inactive||this.#N?.cc(this.#N?.baseColor||this.#L),t?.cc("highlight"),this.c()),this.#N=t}this.#T.input.press&&(this.#P=this.#N,this.#I&&this.#T.input.mouse&&(this.#P?.cc("active"),this.c())),this.#T.input.click()&&(this.#I&&(this.#P?.cc(this.#P?.baseColor||this.#L),this.#N&&this.#N===this.#P&&(this.#T.input.clickRead=!0,this.#I(this.#P)),this.c()),this.#P=null)}super.u()}cellAt(t,s){if(t>=0&&t<this.w&&s>=0&&s<this.h)return this.sprites[this.w*s+t]}#H(t,s){const i=this.#Y(t,s);if(i)return this.cellAt(i[0],i[1])}#Y(t,s){const i=t-this.x,e=s-this.y,h=Math.trunc(i/this.#U),r=Math.trunc(e/this.#D);if(i>=0&&e>=0&&i-h*this.#U<this.s&&e-r*this.#D<this.s&&h>=0&&h<this.w&&r>=0&&r<this.h)return[h,r]}get#U(){return this.s+this.#M}get#D(){return this.s+this.#O}}class o{#X;#T;#G;#z;#_;#W;#K;#F;#V;#$;#j;#Q;#q;#Z;constructor(t){this.#X=t}init(t){this.#T=t,this.#z=new c(t,t.renderer.w-74,10,1,1,64,0,0,t=>this.#J(t)),this.#j=this.#z.sprites[0],this.#j=this.#z.sprites[0],this.#j.w(t.text,"X",32,"active"),this.#_=new r(t),this.#W=this.#_.add("c",100,64,1,this.#X.color),this.#K=this.#_.add(this.#W.x-12,this.#W.y+60,24,0,this.#X.color),this.#F=this.#_.add(this.#W.x+46,this.#W.y+60,24,0,this.#X.color),this.#V=t.text.w(this.#X.cn,"c",10,24,this.#X.color,["sine"]),this.#$=t.text.w(this.#X.ct,"c",this.#W.y+100,32,this.#X.color,["typing","shake"])}u(){if(this.#Q)return new p(this.#T);this.#z.u(),!this.#q&&this.#T.input.click()?(this.#T.input.clickRead=!0,this.#W.cc("bc"),this.#K.cc("bc"),this.#F.cc("bc"),this.#_.c(),this.#V.enabled=!1,this.#$.enabled=!1,this.#V=this.#T.text.w("VICKI","c",10,24,"bc",["sine"]),this.#$=this.#T.text.w(this.#X.cr,"c",this.#W.y+100,32,"bc",["typing","shake"]),this.#q=!0):!this.#Z&&this.#T.input.click()&&(this.#T.input.clickRead=!0,this.#W.enabled=!1,this.#K.enabled=!1,this.#F.enabled=!1,this.#V.enabled=!1,this.#$.enabled=!1,this.#_.c(),this.#T.text.w(this.#X.title,"c",10,48,"inactive",["sine"]),this.#tt(),this.#Z=!0),this.#Z&&this.#G.u(),this.#_.u()}d(){this.#Z&&!this.#Q&&this.#G.d(),this.#_.d(),this.#z.d()}#tt(){this.#G=new this.#X(this.#T,()=>this.#st(),()=>this.#it()),this.#j=this.#z.sprites[0],this.#j.w(this.#T.text,"X",32,"active")}#st(){this.#T.tt(500,()=>{this.#T.minigamesWon.add(this.#X),this.#Q=!0})}#it(){this.#T.tt(500,()=>{this.#tt()})}#J(t){t===this.#j&&(this.#Q=!0)}}class l{#T;#et;#ht;#rt;#at;#nt;#ct;#ot;#z;#lt;#gt;#dt;#Z;static title="MEOWSWEEPER";static color="tc";static sx=73;static type=2;static cn="QUEEN KARA";static ct="YOU, NEW CAT!!\nI NEED YOU TO SCRATCH MY BACK\nIMMEDIATELY BUT ONLY WHERE\nI LIKE IT!\n\n\nSINCE YOU'RE NEW I WILL TELL\nYOU HOW MANY DANGER ZONES\nARE AROUND WHERE YOU'RE\nSCRATCHING!";static cr="OOOH, THE QUEEN HERSELF!!\n\n\nI NEED TO MAKE A GOOD\nFIRST IMPRESSION!";constructor(t,s,i){this.#T=t,this.#et=s,this.#ht=i,this.#rt=t.renderer.horizontal?20:10,this.#at=t.renderer.horizontal?10:20,this.#nt=10,this.#ct=26;const e=Math.floor(Math.min((t.renderer.w-20)/this.#rt-4*(this.#rt-1)/this.#rt,(t.renderer.h-110)/this.#at-4*(this.#at-1)/this.#at));this.#ot=new c(t,"c",100,this.#rt,this.#at,e,4,4,t=>this.#mt(t)),this.#z=new c(t,10,10,2,1,64,10,0,t=>this.#J(t)),this.#lt=this.#z.sprites[0],this.#lt.w(t.text,"O",30,"active"),this.#gt=this.#z.sprites[1],this.#gt.w(t.text,"X",30,"active"),this.#ut("dig")}u(){(this.#T.input.keyPresses.KeyA||this.#T.input.keyPresses.ArrowLeft)&&this.#ut("dig"),(this.#T.input.keyPresses.KeyD||this.#T.input.keyPresses.ArrowRight)&&this.#ut("flag"),this.#ot.u(),this.#z.u()}d(){this.#ot.d(),this.#z.d()}#mt(t){switch(this.#dt){case"dig":this.#Z||this.#pt(t),this.#ft(t.gridX,t.gridY),t.mine&&(this.#ot.disabled=!0,this.#T.tt(2e3,()=>{for(const t of this.#ot.sprites)(t.content||{}).enabled=!1;this.#T.text.c(),this.#ht()}));break;case"flag":t.flagged?(t.flagged=!1,t.content.enabled=!1,this.#T.text.c()):(t.flagged=!0,t.w(this.#T.text,"X",this.#ct,"highlight"))}}#pt(t){const s=this.#ot.sprites.filter(s=>s!==t&&(Math.abs(s.gridX-t.gridX)>1||Math.abs(s.gridY-t.gridY)>1));for(let t=0;t<this.#nt;t++){const t=Math.floor(Math.random()*s.length),i=s[t];s.splice(t,1),i.mine=!0}for(let t=0;t<this.#ot.h;t++)for(let s=0;s<this.#ot.w;s++){let i=this.#ot.cellAt(s,t);if(!i.mine){i.mines=0;for(let e=-1;e<=1;e++)for(let h=-1;h<=1;h++)this.#ot.cellAt(s+h,t+e)?.mine&&(i.mines+=1)}}this.#Z=!0}#ft(t,s){this.#T.shake(200);const i=this.#ot.cellAt(t,s);if(i?.flagged&&(i.flagged=!1,i.content.enabled=!1),i?.enabled&&!i?.opened)if(i.opened=!0,i.activate(!1),0===i.mines)i.hidden=!0,this.#ft(t,s-1),this.#ft(t,s+1),this.#ft(t-1,s),this.#ft(t+1,s);else if(i.mine)for(const t of this.#ot.sprites.filter(t=>t.mine))t.activate(!1),t.w(this.#T.text,"X",this.#ct,"inactive10");else i.w(this.#T.text,i.mines,this.#ct,`inactive${i.mines}`);this.#ot.sprites.filter(t=>!t.opened).every(t=>t.mine)&&this.#et()}#J(t){t===this.#gt?this.#ut("flag"):t===this.#lt&&this.#ut("dig")}#ut(t){this.#dt=t,this.#lt.activate("dig"!==this.#dt),this.#gt.activate("flag"!==this.#dt),this.#z.c()}}class g{#T;#et;#ht;#ot;#_;#wt;#bt;static title="PAW PAW TOE";static color="oc";static sx=73;static type=2;static cn="ORANGE CAT, THE USELESS BOYFRIEND";static ct="BET YOU CAN'T BEAT ME\nIN PAW PAW TOE!\n\n\nI'M THE SMARTEST\nORANGE CAT EVER!!!";static cr="WELL, THAT'S\nNOT SAYING MUCH...\n\n\nLET'S SEE!";constructor(t,s,i){this.#T=t,this.#et=s,this.#ht=i,this.#ot=new c(t,"c","c",3,3,96,20,20,t=>this.#mt(t)),this.#_=new r(t)}u(){this.#ot.u(),this.#_.u()}d(){this.#ot.d(),this.#_.d()}#mt(t){t.symbol||(this.#xt(t,"X"),this.#ot.disabled=!0,this.#wt=this.#T.tt(1e3,()=>{if(!this.#bt){const t=this.#ot.sprites.filter(t=>!t.symbol);t.length>0&&(this.#xt(t[Math.floor(Math.random()*t.length)],"O"),this.#ot.disabled=!1,this.#ot.c())}}))}#xt(t,s){this.#bt||(this.#T.shake(200),t.symbol=s,t.activate(!1),t.d(this.#_,64,0,"X"===s?"bc":"oc"),this.#At())}#At(){for(let t=0;t<3;t++){const s=new Map;for(let i=0;i<3;i++){const e=this.#ot.cellAt(i,t);s.set(e.symbol,(s.get(e.symbol)||0)+1)}if(3===s.get("X"))return this.#st("X");if(3===s.get("O"))return this.#st("O")}for(let t=0;t<3;t++){const s=new Map;for(let i=0;i<3;i++){const e=this.#ot.cellAt(t,i);s.set(e.symbol,(s.get(e.symbol)||0)+1)}if(3===s.get("X"))return this.#st("X");if(3===s.get("O"))return this.#st("O")}return"X"===this.#ot.cellAt(0,0).symbol&&"X"===this.#ot.cellAt(1,1).symbol&&"X"===this.#ot.cellAt(2,2).symbol?this.#st("X"):"O"===this.#ot.cellAt(0,0).symbol&&"O"===this.#ot.cellAt(1,1).symbol&&"O"===this.#ot.cellAt(2,2).symbol?this.#st("O"):"X"===this.#ot.cellAt(2,0).symbol&&"X"===this.#ot.cellAt(1,1).symbol&&"X"===this.#ot.cellAt(0,2).symbol?this.#st("X"):"O"===this.#ot.cellAt(2,0).symbol&&"O"===this.#ot.cellAt(1,1).symbol&&"O"===this.#ot.cellAt(0,2).symbol?this.#st("O"):void 0}#st(t){this.#bt=!0,this.#ot.disabled=!0,(this.#wt||{}).disabled=!0,"X"===t?this.#et():"O"===t&&this.#ht()}}class d{#T;#et;#_;#Et;#vt;#z;#Tt;static title="SUDOCAT";static color="bc";static sx=73;static type=4;static cn="KUMBA";static ct="I NEED ALL MY TREATS AND\nTOYS NEATLY ORGANISED!!\n\n\nTHERE SHOULD BE ONLY ONE\nTYPE IN EACH ROW, EACH\nCOLUMN AND IN EACH BOX!!";static cr="KITTY MUST HAVE OCD...";constructor(t,s){this.#T=t,this.#et=s,this.#_=new r(t,!0),this.#Et=[];const i=Math.floor(Math.min((t.renderer.w-20)/3-32/3,(t.renderer.h-200)/3-32/3));this.#vt=Math.floor(Math.min((i-0)/3-10/3,(i-0)/3-10/3));const e=t.renderer.w/2-3*(i+32/3)/2;for(let s=0;s<3;s++)for(let h=0;h<3;h++){const r=new c(t,e+h*(i+16),100+s*(i+16),3,3,this.#vt,5,5,t=>this.#mt(t));this.#Et.push(r)}this.#z=new c(t,"c",t.renderer.h-74,10,1,64,10,0,t=>this.#J(t));for(let t=1;t<=10;t++){const s=this.#z.sprites[t-1];s.d(this.#_,128/3,t+5),s.digit=t<=9?t:null}this.#kt(),this.#yt(1)}u(){for(let t=1;t<=9;t++)this.#T.input.keyPresses[`Digit${t}`]&&this.#yt(t);(this.#T.input.keyPresses.KeyA||this.#T.input.keyPresses.ArrowLeft)&&this.#Tt>1&&this.#yt(this.#Tt-1),(this.#T.input.keyPresses.KeyD||this.#T.input.keyPresses.ArrowRight)&&this.#Tt<9&&this.#yt(this.#Tt+1),(this.#T.input.keyPresses.KeyX||this.#T.input.keyPresses.Digit0)&&this.#yt(null),this.#_.u();for(const t of this.#Et)t.u();this.#z.u()}d(){for(const t of this.#Et)t.d();this.#z.d(),this.#_.d()}#Rt(t,s){return this.#Et[3*Math.floor(s/3)+Math.floor(t/3)]}#Bt(t,s){return this.#Rt(t,s).cellAt(t%3,s%3)}#kt(){const t=[[6,8,0,1,0,0,0,9,0,0,3,4,5,0,8,0,2,0,2,1,0,0,6,0,3,0,0,5,0,0,4,0,7,0,0,9,3,4,2,9,0,0,0,0,6,0,0,7,0,8,0,5,0,0,9,2,0,8,0,0,0,5,3,0,0,3,2,0,0,9,1,8,0,0,0,3,0,0,0,6,7]],s=t[Math.floor(Math.random()*t.length)];for(let t=0;t<9;t++)for(let i=0;i<9;i++){const e=s[9*t+i];if(0!==e){const s=this.#Bt(i,t);s.activate(!1),s.digit=e,s.d(this.#_,2*this.#vt/3,e+5)}}}#mt(t){t.digit=this.#Tt,(t.content||{}).enabled=!1,this.#Tt&&t.d(this.#_,2*this.#vt/3,this.#Tt+5),this.#St()&&this.#et(),this.#T.text.c(),this.#_.c()}#St(){let t=!0;this.#Ct();for(let s=0;s<9;s++)t&=this.#Mt(s),t&=this.#Ot(s),t&=this.#At(s);return t}#Ct(){for(let t=0;t<9;t++)for(let s=0;s<9;s++){const i=this.#Bt(s,t);i.inactive||i.cb("primary")}for(let t=0;t<9;t++)this.#Et[t].c()}#Mt(t){let s=!0;const i=new Map;for(let s=0;s<9;s++){const e=this.#Bt(t,s);i.set(e.digit,(i.get(e.digit)||0)+1)}for(const[e,h]of i.entries())if(null==e)s=!1;else if(h>1){s=!1;for(let s=0;s<9;s++){const i=this.#Bt(t,s);i.inactive||i.digit!=e||(i.cb("active"),this.#Rt(t,s).c())}}return s}#Ot(t){let s=!0;const i=new Map;for(let s=0;s<9;s++){const e=this.#Bt(s,t);i.set(e.digit,(i.get(e.digit)||0)+1)}for(const[e,h]of i.entries())if(null==e)s=!1;else if(h>1){s=!1;for(let s=0;s<9;s++){const i=this.#Bt(s,t);i.inactive||i.digit!=e||(i.cb("active"),this.#Rt(s,t).c())}}return s}#At(t){let s=!0;const i=new Map,e=this.#Et[t];for(let t=0;t<9;t++){const s=e.sprites[t];i.set(s.digit,(i.get(s.digit)||0)+1)}for(const[t,h]of i.entries())if(null==t)s=!1;else if(h>1){s=!1;for(let s=0;s<9;s++){const i=e.sprites[s];i.inactive||i.digit!=t||(i.cb("active"),e.c())}}return s}#J(t){t&&this.#yt(t.digit)}#yt(t){this.#Tt=t;for(const t of this.#z.sprites)t.activate(!0);this.#z.sprites[null!=t?t-1:9].activate(!1),this.#z.c()}}class m{#T;#et;#ot;#_;#It;#Lt;#Nt;#wt;static title="MEOWMORY";static color="sc";static sx=8;static type=3;static cn="MOLLY";static ct="THEY SAY I HAVE THE\nMEMORY OF A GOLDFISH...\n\n\nCAN YOU SHOW ME HOW\nTO REMEMBER THINGS??";static cr="SOMEONE SAID FISHIE?!\n\n\nYUM!!!";constructor(t,s){this.#T=t,this.#et=s;const i=t.renderer.horizontal?6:5,e=t.renderer.horizontal?5:6,h=Math.floor(Math.min((t.renderer.w-20)/i-16*(i-1)/i,(t.renderer.h-110)/e-16*(e-1)/e));this.#ot=new c(t,"c",100,i,e,h,16,16,t=>this.#mt(t)),this.#_=new r(t,!0);const a=this.#ot.sprites.slice();for(let t=0;t<i*e/2;t++){const s=Math.floor(Math.random()*a.length),i=a[s];a.splice(s,1);const e=Math.floor(Math.random()*a.length),h=a[e];a.splice(e,1),i.secret=t,h.secret=t}}u(){this.#ot.u(),this.#_.u()}d(){this.#ot.d(),this.#_.d()}#mt(t){t.open||(this.#Lt&&this.#Nt&&this.#Pt(),t.open=!0,t.d(this.#_,2*this.#ot.s/3,t.secret,t.secret<5?"tc":null),t.cb("active"),this.#It?(t.secret===this.#It.secret?(t.found=!0,t.activate(!1),this.#It.found=!0,this.#It.activate(!1),this.#ot.sprites.every(t=>t.found)&&this.#et()):(this.#Lt=this.#It,this.#Nt=t,this.#wt=this.#T.tt(1e3,()=>this.#Pt())),this.#It=!1):this.#It=t)}#Pt(){(this.#wt||{}).disabled=!0,this.#Lt.open=!1,this.#Lt.content.enabled=!1,this.#Lt.cb("primary"),this.#Nt.open=!1,this.#Nt.content.enabled=!1,this.#Nt.cb("primary"),this.#ot.c(),this.#T.text.c(),this.#_.c(),this.#Lt=null,this.#Nt=null}}class u{#T;#et;#Ut;#Dt;#Ht;#Yt;#rt;#at;#ot;#z;#Xt;#gt;#dt;static title="MEOWSTERPIECE";static color="wc";static sx=8;static type=3;static cn="CHA CHA";static ct="TODAY I DECIDED TO BE\nAN ARTIST!!\nHELP ME WITH THIS\nPAINT BY NUMBER!\n\n\nTHE CLUES WILL TELL YOU\nHOW MANY BLOCKS SHOULD\nBE PAINTED IN EACH ROW\nAND IN EACH COLUMN!";static cr="SURE SURE, ARTIST TODAY,\nSOMETHING ELSE TOMORROW!\n\n\nTYPICAL KITTY...";constructor(t,s){this.#T=t,this.#et=s,this.#Ut=[[0],[1,1],[2,2],[5],[2,1,2,1],[5,2],[3,1],[6,2],[1,5,1],[8],[2,4]],this.#Dt=[[1,2],[4,1,1],[3,6],[7],[3,6],[4,4],[1,3],[2],[3,1],[2,3]],this.#Ht=Math.max(...this.#Ut.map(t=>t.length)),this.#Yt=Math.max(...this.#Dt.map(t=>t.length)),this.#rt=this.#Dt.length+this.#Ht,this.#at=this.#Ut.length+this.#Yt;const i=Math.floor(Math.min((t.renderer.w-20)/this.#rt-2*(this.#rt-1)/this.#rt,(t.renderer.h-110)/this.#at-2*(this.#at-1)/this.#at));this.#ot=new c(t,"c",100,this.#rt,this.#at,i,2,2,t=>this.#mt(t));for(let s=0;s<this.#rt;s++)for(let e=0;e<this.#Yt;e++){const h=this.#ot.cellAt(s,e);s<this.#Ht||e<this.#Yt-this.#Dt[s-this.#Ht].length?h.hidden=!0:(h.w(t.text,this.#Dt[s-this.#Ht][e-(this.#Yt-this.#Dt[s-this.#Ht].length)],2*i/3,"highlight"),h.activate(!1))}for(let s=0;s<this.#rt;s++)for(let i=0;i<this.#Ht;i++){const e=this.#ot.cellAt(i,s);s<this.#Yt||i<this.#Ht-this.#Ut[s-this.#Yt].length?e.hidden=!0:(e.w(t.text,this.#Ut[s-this.#Yt][i-(this.#Ht-this.#Ut[s-this.#Yt].length)],2*this.#ot.s/3,"highlight"),e.activate(!1))}this.#z=new c(t,10,10,2,1,64,10,0,t=>this.#J(t)),this.#Xt=this.#z.sprites[0],this.#Xt.w(t.text,"O",30,"active"),this.#gt=this.#z.sprites[1],this.#gt.w(t.text,"X",30,"active"),this.#ut("mark"),this.#ot.c()}u(){(this.#T.input.keyPresses.KeyA||this.#T.input.keyPresses.ArrowLeft)&&this.#ut("mark"),(this.#T.input.keyPresses.KeyD||this.#T.input.keyPresses.ArrowRight)&&this.#ut("flag"),this.#ot.u(),this.#z.u()}d(){this.#ot.d(),this.#z.d()}#mt(t){switch((t.content||{}).enabled=!1,this.#dt){case"mark":"marked"!==t.state?(t.state="marked",t.cb("active")):(t.state=null,t.cb("primary"));break;case"flag":t.cb("primary"),"flagged"!==t.state?(t.state="flagged",t.w(this.#T.text,"X",2*this.#ot.s/3,"highlight")):t.state=null}this.#T.text.c(),this.#At()}#J(t){t===this.#gt?this.#ut("flag"):t===this.#Xt&&this.#ut("mark")}#ut(t){this.#dt=t,this.#Xt.activate("mark"!==this.#dt),this.#gt.activate("flag"!==this.#dt),this.#z.c()}#At(){let t=0;for(let s=this.#Ht;s<this.#rt;s++){for(let t=0;t<this.#Yt;t++)this.#ot.cellAt(s,t).cb("inactive");let i=0,e=0,h=0;for(let t=this.#Yt;t<this.#at;t++)"marked"===this.#ot.cellAt(s,t).state&&(i+=1),"marked"===this.#ot.cellAt(s,t).state&&t!==this.#at-1||((i>0||t===this.#at-1)&&e<this.#Dt[s-this.#Ht].length&&(i>this.#Dt[s-this.#Ht][e]?this.#ot.cellAt(s,e+(this.#Yt-this.#Dt[s-this.#Ht].length)).cb("highlight"):i===this.#Dt[s-this.#Ht][e]&&(this.#ot.cellAt(s,e+(this.#Yt-this.#Dt[s-this.#Ht].length)).cb("primary1"),h+=1),e+=1),i=0);h===this.#Dt[s-this.#Ht].length&&(t+=1)}for(let s=this.#Yt;s<this.#at;s++){for(let t=0;t<this.#Ht;t++)this.#ot.cellAt(t,s).cb("inactive");let i=0,e=0,h=0;for(let t=this.#Ht;t<this.#rt;t++)"marked"===this.#ot.cellAt(t,s).state&&(i+=1),"marked"===this.#ot.cellAt(t,s).state&&t!==this.#rt-1||((i>0||t===this.#rt-1)&&e<this.#Ut[s-this.#Yt].length&&(i>this.#Ut[s-this.#Yt][e]?this.#ot.cellAt(e+(this.#Ht-this.#Ut[s-this.#Yt].length),s).cb("highlight"):i===this.#Ut[s-this.#Yt][e]&&(this.#ot.cellAt(e+(this.#Ht-this.#Ut[s-this.#Yt].length),s).cb("primary1"),h+=1),e+=1),i=0);h===this.#Ut[s-this.#Yt].length&&(t+=1)}t===this.#rt-this.#Ht+(this.#at-this.#Yt)&&this.#et()}}class p{#T;#Gt;#ot;#z;#_;#zt;#_t;#Wt;#Kt;#Ft;#Vt;#$t;init(t){this.#T=t,this.#Gt=t.firstStart,t.firstStart=!1,this.#ot=new c(t,"c",100,6,15,128,0,0,null,"",2),this.#ot.disabled=!0,this.#z=new c(t,"c",132,3,7,128,64,64,t=>this.#J(t),"",1),this.#Gt?(this.#z.disabled=!0,this.#_t=-t.renderer.h,t.text.w("THIS IS A TRUE STORY\n\n\nTHE CATS DEPICTED HERE\nALL LIVE IN DUBLIN","c","c",32,"inactive",["typing","shake"]),t.tt(9e3,()=>{this.#Wt=!0,t.text.clear()})):t.text.w("HELP THE OTHER CATS\nIN THE BUILDING!!","c",10,32,"active",["typing","shake"]),this.#_=new r(t);const s=[g,m,l,d,u];for(let i=0;i<21;i++)if(!s[i]||0!=i&&this.#Gt)this.#z.sprites[i].activate(!1);else{this.#z.sprites[i].minigame=s[i];let e=s[i].sx,h=73,r=s[i].type;t.minigamesWon.has(s[i])&&(this.#z.sprites[i].activate(!1),e=39,h=39,r=1),this.#_.add(this.#z.sprites[i].x+e,this.#z.sprites[i].y+h,50,r,s[i].color)}this.#Kt=this.#_.add("c",t.renderer.h,900,1,"black");for(let s=0;s<this.#z.sprites.length;s++){const i=this.#z.sprites[s];t.minigamesWon.has(i.minigame)&&i.activate(!1)}}u(){if(this.#Gt)if(this.#_t<0)this.#_t+=3,this.#_t>=0&&(this.#_t=0,this.#T.shake(200)),this.#T.renderer.p=t.ortho(0,this.#T.renderer.w,this.#T.renderer.h+this.#_t,this.#_t);else if(this.#Wt&&!this.#Ft){if(this.#Kt.y-=3,this.#Kt.y<=this.#T.renderer.h/2-this.#Kt.size/2){this.#Ft=!0,this.#Kt.y=this.#T.renderer.h/2-this.#Kt.size/2;const t=this.#T.text.w("  A VOIDING\nYOUR PROBLEMS","c","c",48,null,["sine"]);this.#T.text.w("  A GAME BY\nATTILA HORVATH","c",t.y+180,36,"wc",["shake"]),this.#T.text.w("TAP TO BEGIN","c",t.y+280,36,"inactive",["typing","shake"],1200),this.#T.shake(500)}this.#Kt.x=this.#T.renderer.w/2-this.#Kt.size/2,this.#_.c()}else if(this.#Vt)this.#$t?this.#z.disabled=!1:this.#T.input.click()&&(this.#T.input.clickRead=!0,this.#Kt.hidden=!0,this.#_.c(),this.#T.text.clear(),this.#$t=!0,this.#T.text.w("LET'S START WITH THIS\nGENIUS ORANGE CAT!","c",10,32,"active",["typing","shake"]));else if(this.#T.input.click()){this.#T.input.clickRead=!0,this.#T.text.clear();const t=this.#T.text.w("SO, I HEARD THIS\nIS THE DOMAIN OF","c","c",28,"inactive",["typing","shake"]);this.#T.text.w("QUEEN KARA","c",t.y+60,32,"tc",["typing","sine"],4e3),this.#T.text.w("I HOPE SHE'LL ACCEPT ME\nIF I HELP THE OTHER CATS...","c",t.y+120,28,"inactive",["typing","shake"],6e3),this.#Vt=!0}if(this.#ot.u(),this.#_.u(),this.#zt)return this.#zt;this.#z.u()}d(){this.#ot.d(),this.#z.d(),this.#_.d()}#J(t){t&&(this.#zt=new o(t.minigame))}}const f=new class{#Z;#jt;#Qt;#_;#qt;#Zt;#Jt;#ts;constructor(){this.renderer=new i(()=>{if(!this.#Z){for(let t=0;t<128;t++){const t=Math.floor(15*Math.random());let s=null;t<5&&(s=["bc","oc","wc","tc","sc"][Math.floor(5*Math.random())]);const i=this.#Qt.add(Math.random()*this.renderer.w,Math.random()*this.renderer.h,16+100*Math.random(),t,s);i.a=.33,i.dx=-.5+Math.random(),i.dy=-.5+Math.random(),i.ds=.2*Math.random()-.1}this.#Zt=new p,this.#Zt.init(this),this.#Z=!0}}),this.input=new e(this),this.#jt=[],this.#Qt=new r(this,!0),this.text=new n(this),this.#_=new r(this),this.#qt=this.#_.add(0,0,26,0,"bc"),this.#qt.hidden=!0,this.minigamesWon=new Set,this.firstStart=!0}step(t){this.timestamp=t,this.#ss(t),this.#is(),this.#Jt&&(this.text.clear(),this.#Zt=this.#Jt,this.#Zt.init(this),this.#Jt=null)}tt(t,s,i){const e={start:this.timestamp??0,delay:t,onexpire:s,repeat:i};return this.#jt.push(e),e}shake(t){navigator.vibrate(t),this.#ts=!0,this.tt(t,()=>this.#ts=!1)}#ss(t){this.#ts?(this.renderer.v[6]=7*Math.random(),this.renderer.v[7]=7*Math.random()):(this.renderer.v[6]=0,this.renderer.v[7]=0),this.input.u(),this.input.mouse&&this.#qt.hidden&&(this.#qt.hidden=!1,this.#_.c()),this.input.moved&&(this.#qt.x=this.input.x-6,this.#qt.y=this.input.y-6,this.#_.c());for(const t of this.#Qt.sprites)t.x+=t.dx,t.y+=t.dy,t.size+=t.ds,t.x<0&&(t.dx=-t.dx,t.x=0),t.y<0&&(t.dy=-t.dy,t.y=0),t.x>this.renderer.w&&(t.dx=-t.dx,t.x=this.renderer.w),t.y>this.renderer.h&&(t.dy=-t.dy,t.y=this.renderer.h),t.size<16&&(t.ds=-t.ds,t.size=16),t.size>116&&(t.ds=-t.ds,t.size=116);this.#Qt.c(),this.#Qt.u(),this.#es(t),this.#Zt&&(this.#Jt=this.#Zt.u()),this.text.u(t),this.#_.u()}#es(t){for(const s of this.#jt)t>=s.start+s.delay&&!s.disabled&&(s.repeat?s.start=t:s.expired=!0,s.onexpire&&s.onexpire());this.#jt.some(t=>t.expired||t.disabled)&&(this.#jt=this.#jt.filter(t=>!t.expired&&!t.disabled))}#is(){this.renderer.clear();const s=this.renderer.p;this.renderer.p=t.ortho(0,this.renderer.w,this.renderer.h,0),this.#Qt.d(),this.renderer.p=s,this.#Zt&&this.#Zt.d(),this.renderer.p=t.ortho(0,this.renderer.w,this.renderer.h,0),this.text.d(),this.#_.d(),this.renderer.p=s}};requestAnimationFrame(function t(s){requestAnimationFrame(t),f.step(s)})}();
//# sourceMappingURL=bundle.js.map
