!function(){"use strict";class t extends Float32Array{static identity(){return new t([1,0,0,0,1,0,0,0,1])}static ortho(s,i,e,h){return new t([2/(i-s),0,0,0,2/(h-e),0,-(i+s)/(i-s),-(h+e)/(h-e),1])}}class s{#t;#s;#i;#e;#h;constructor(t,s,i){const e=this.#r(t,t.VERTEX_SHADER,s),h=this.#r(t,t.FRAGMENT_SHADER,i),r=t.createProgram(),n=t.attachShader.bind(t),a=t.bindAttribLocation.bind(t),o=t.getUniformLocation.bind(t);n(r,e),n(r,h),a(r,0,"vp"),a(r,1,"vertexColor"),a(r,2,"vt"),a(r,3,"sp"),a(r,4,"ss"),a(r,5,"st"),a(r,6,"sc"),t.linkProgram(r),this.#s=o(r,"v"),this.#i=o(r,"p"),this.#e=o(r,"tex"),this.#h=o(r,"is"),this.#t=r}use(t,s,i){t.useProgram(this.#t),this.setup(t,s,i)}setup(t,s,i){null!=this.#s&&t.uniformMatrix3fv(this.#s,!1,s),null!=this.#i&&t.uniformMatrix3fv(this.#i,!1,i),null!=this.#e&&t.uniform1i(this.#e,0),null!=this.#h&&t.uniform1f(this.#h,16)}#r(t,s,i){const e=t.createShader(s);return t.shaderSource(e,i),t.compileShader(e),e}}class i{#n;#a;#o;#c;#l;#d;#g;#m;constructor(s){this.#n=s,document.body.style.margin="0",document.body.style.padding="0",this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.canvas.style.width="100dvw",this.canvas.style.height="100dvh",this.canvas.style.cursor="none",this.canvas.style.touchAction="none",new ResizeObserver(()=>{this.w=this.canvas.clientWidth,this.h=this.canvas.clientHeight,this.canvas.width=this.w,this.canvas.height=this.h,this.horizontal=this.w>this.h,this.#a.viewport(0,0,this.w,this.h),this.p=t.ortho(0,this.w,this.h,0),this.#n()}).observe(this.canvas,{box:"content-box"}),document.body.appendChild(this.canvas),this.#a=this.canvas.getContext("webgl2"),this.#a.viewport(0,0,this.canvas.width,this.canvas.height),this.#a.clearColor(.68,.68,.94,1),this.#a.pixelStorei(this.#a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.#a.enable(this.#a.BLEND),this.#a.blendFunc(this.#a.ONE,this.#a.ONE_MINUS_SRC_ALPHA),this.quadBuffer=this.#u(),this.#o=new Map,this.#c=new Map,this.#l=[],this.v=t.identity(),this.p=t.ortho(0,0,this.canvas.width,this.canvas.height)}createShader(t,i,e){const h=this.#o.get(t);if(h)return h;const r=new s(this.#a,i,e);return this.#o.set(t,r),r}createVao(){const t=this.#a.createVertexArray();return this.#a.bindVertexArray(t),t}createBuffer(t,s){const i=this.#a.createBuffer();return this.updateBuffer(i,t,s),i}updateBuffer(t,s,i){this.useBuffer(t),this.#a.bufferData(this.#a.ARRAY_BUFFER,s,i?this.#a.DYNAMIC_DRAW:this.#a.STATIC_DRAW)}useBuffer(t){this.#a.bindBuffer(this.#a.ARRAY_BUFFER,t)}a(t,s,i,e,h){this.#a.vertexAttribPointer(t,s,this.#a.FLOAT,!1,i,e),this.#a.enableVertexAttribArray(t),null!=h&&this.#a.vertexAttribDivisor(t,h)}loadTexture(t,s){const i=`textures/${t}.png`,e=this.#c.get(`${i}_${s}`);if(e)return e;const h=this.#a.createTexture();this.#f(h,null,s);const r=this.#l.length,n=new Image;return n.src=i,n.onload=()=>this.#f(h,r,s),this.#c.set(`${i}_${s}`,h),this.#l[r]=n,h}clear(){this.#a.clear(this.#a.COLOR_BUFFER_BIT)}d(t,s,i,e,h){t!==this.#d?(t.use(this.#a,this.v,this.p),this.#d=t):this.#d.setup(this.#a,this.v,this.p),s!==this.#g&&(this.#a.bindVertexArray(s),this.#g=s),i!==this.#m&&(this.#a.activeTexture(this.#a.TEXTURE0),this.#a.bindTexture(this.#a.TEXTURE_2D,i),this.#m=i),null!=h?this.#a.drawArraysInstanced(this.#a.TRIANGLES,0,e,h):this.#a.drawArrays(this.#a.TRIANGLES,0,e)}#u(){return this.createBuffer(new Float32Array([0,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,1,1,1]),!1)}#f(t,s,i){const e=this.#a,h=e.TEXTURE0,r=e.TEXTURE_2D,n=e.texImage2D.bind(e),a=e.texParameteri.bind(e),o=e.RGBA,c=e.UNSIGNED_BYTE,l=i?e.LINEAR:e.NEAREST;e.activeTexture(h),e.bindTexture(r,t),null!=s?n(r,0,o,o,c,this.#l[s]):n(r,0,o,1,1,0,o,c,new Uint8Array([255,0,255,255])),a(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),a(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a(r,e.TEXTURE_MIN_FILTER,l),a(r,e.TEXTURE_MAG_FILTER,l)}}class e{#p;#w;#x;#A;#b;#E;constructor(t){this.#p={},this.#w={},t.renderer.canvas.addEventListener("pointermove",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY}),t.renderer.canvas.addEventListener("pointerdown",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#x=!0}),t.renderer.canvas.addEventListener("pointerup",t=>{this.mouse="mouse"===t.pointerType,this.x=t.offsetX,this.y=t.offsetY,this.#A=!0}),addEventListener("keydown",t=>{this.#p[t.code]=!0}),addEventListener("keyup",t=>{this.#w[t.code]=!0})}u(){this.x===this.#b&&this.y===this.#E||(this.#b=this.x,this.#E=this.y,this.moved=!0),this.press=!1,this.#x&&(this.press=!0,this.#x=!1),this.release=!1,this.#A&&(this.release=!0,this.#A=!1),this.keyPresses={};for(const[t,s]of Object.entries(this.#p))s&&(this.keyPresses[t]=!0,this.#p[t]=!1);this.keyReleases={};for(const[t,s]of Object.entries(this.#w))s&&(this.keyReleases[t]=!0,this.#w[t]=!1);this.clickRead=!1}click(){return!this.clickRead&&(this.mouse&&this.release||!this.mouse&&this.press)}}class h{constructor(t,s,i,e,h){this.x=t,this.y=s,this.s=i,this.type=e,this.enabled=!0,this.hidden=!1,this.a=1,this.cc(h)}attributes(){return[this.x,this.y,this.s,this.type,this.r,this.g,this.b,this.hidden?0:this.a]}cb(t){this.baseColor=t,this.cc(t)}cc(t){let s=[14277887,11382256,12749972,10905200,5724021,5526612,11759124,15132390,10719073,10066329,9480387,4627849,11913626,42747,5032432,16042720,15007908,15859849,16777215,16764144,0][t];null==s&&(s=16777215),this.r=((16711680&s)>>16)/255,this.g=((65280&s)>>8)/255,this.b=(255&s)/255}activate(t){this.inactive=!t,this.cc(t?this.baseColor||0:4)}w(t,s,i,e=3,h=null,r=null){(this.content||{}).enabled=!1,this.content=t.w(s.toString(),this.x+(this.s-i)/2,this.y+(this.s-i)/2,i,e,h,r)}d(t,s,i,e){(this.content||{}).enabled=!1,this.content=t.add(this.x+(this.s-s)/2,this.y+(this.s-s)/2,s,i,e)}}class r{#T;#k;#y;#B;#v;#R;constructor(t,s=!1,i="sprites"){this.#T=t;const e=t.renderer;this.#k=e.createShader("sprite","#version 300 es\nuniform mat3 v;uniform mat3 p;uniform float is;uniform sampler2D tex;in vec2 vp;in vec2 vt;in vec2 sp;in float ss;in float st;in vec4 sc;out vec2 tc;out vec4 tint;void main(){vec2 texOffset=vec2(is/float(textureSize(tex,0)),is/float(textureSize(tex,0).y));tc=vec2(texOffset.x,0.0)*st+vt*texOffset;tint=sc;tint.rgb*=tint.a;gl_Position=vec4(p*v*vec3(vp*ss+sp,1.0),1.0);}","#version 300 es\nprecision highp float;uniform sampler2D tex;in vec2 tc;in vec4 tint;out vec4 fc;void main(){fc=texture(tex,tc)*tint;}"),this.#y=e.createVao(),e.useBuffer(e.quadBuffer),e.a(0,2,16,0),e.a(2,2,16,8),this.#B=e.createBuffer(new Float32Array,!0),e.a(3,2,32,0,1),e.a(4,1,32,8,1),e.a(5,1,32,12,1),e.a(6,4,32,16,1),this.#v=e.loadTexture(i,s),this.sprites=[],this.c()}add(t,s,i,e,r){"c"===t&&(t=this.#T.renderer.w/2-i/2),"c"===s&&(s=this.#T.renderer.h/2-i/2);const n=new h(t,s,i,e,r);return this.sprites.push(n),this.c(),n}c(){this.#R=!0}u(){this.#R&&(this.sprites=this.sprites.filter(t=>t.enabled),this.#T.renderer.updateBuffer(this.#B,new Float32Array(this.sprites.map(t=>t.attributes()).flat()),!0),this.#R=!1)}d(){this.#T.renderer.d(this.#k,this.#y,this.#v,6,this.sprites.length)}}class n{constructor(t,s,i,e,h,r,n){this.text=t,this.x=s,this.y=i,this.s=e,this.color=h,this.animations=r??[],this.delay=n??0,this.sprites=[],this.enabled=!0,this.time=0,this.begin=null}cc(t){for(const s of this.sprites)s.cc(t)}u(t){let s=!1;for(const i of this.animations)switch(i){case"sine":for(let s=0;s<this.sprites.length;s++){const i=this.sprites[s];i.y=i.baseY+10*Math.sin(s+t/200)}s=!0;break;case"shake":if(this.time+=1,7===this.time){this.time=0;for(let t=0;t<this.sprites.length;t++){const s=this.sprites[t];s.x=s.baseX+5*Math.random(),s.y=s.baseY+5*Math.random()}}s=!0;break;case"typing":this.begin||(this.begin=t);for(let s=0;s<this.sprites.length;s++){this.sprites[s].hidden=(t-this.begin-this.delay)/150<s}s=!0}return s}}class a extends r{#T;#S;constructor(t){super(t,!1,"font"),this.#T=t,this.#S=[]}w(t,s,i,e,h=3,r=null,a=null){"c"===s&&(s=Math.floor(this.#T.renderer.w/2-Math.max(...t.split("\n").map(t=>t.length))*e/2)),"c"===i&&(i=Math.floor(this.#T.renderer.h/2-t.split("\n").length*e/2));const o=new n(t,s,i,e,h,r,a);let c=s,l=i;for(const i of t){let t;if("\n"!==i){if(i>="A"&&i<="Z"?t=i.charCodeAt(0)-"A".charCodeAt(0):i>="0"&&i<="9"?t=26+i.charCodeAt(0)-"0".charCodeAt(0):"?"===i?t=36:"!"===i?t=37:","===i?t=38:"."===i?t=39:"'"===i&&(t=40),null!=t){const s=this.add(c,l,e,t,h);s.baseX=c,s.baseY=l,o.sprites.push(s)}c+=e}else l+=e,c=s}return this.#S.push(o),this.c(),o}clear(){for(const t of this.#S)for(const s of t.sprites)s.enabled=!1;this.#S=[],this.c()}u(t){for(const t of this.#S.filter(t=>!t.enabled))for(const s of t.sprites)s.enabled=!1;this.#S=this.#S.filter(t=>t.enabled);for(const s of this.#S)s.u(t)&&this.c();super.u()}}class o extends r{#T;#O;#M;#C;#L;#I;constructor(t,s,i,e,h,r,n,a,o,c=0,l=0){super(t,!1,"cells"),this.#T=t,"c"===s&&(s=t.renderer.w/2-e*(r+(n??0)*(e-1)/e)/2),"c"===i&&(i=t.renderer.h/2-h*(r+(a??0)*(h-1)/h)/2),this.x=s,this.y=i,this.w=e,this.h=h,this.s=r,this.#O=n??0,this.#M=a??0,this.#C=o,this.color=c;for(let t=0;t<h;t++)for(let h=0;h<e;h++){const e=this.add(s+h*this.#N,i+t*this.#H,r,l,c);e.cc(c),e.grid=this,e.gridX=h,e.gridY=t}}u(t=!1){if(!this.disabled){if(this.#T.input.moved){let t=this.#P(this.#T.input.x,this.#T.input.y);t?.inactive&&(t=null),t===this.#L||this.#I||this.#C&&this.#T.input.mouse&&(this.#L?.inactive||this.#L?.cc(this.#L?.baseColor||this.color),t?.cc(2),this.c()),this.#L=t}this.#T.input.press&&!t&&(this.#I=this.#L,this.#C&&this.#T.input.mouse&&(this.#I?.cc(3),this.c())),this.#T.input.click()&&!t&&(this.#C&&(this.#I?.cc(this.#I?.baseColor||this.color),this.#L&&this.#L===this.#I&&(this.#T.input.clickRead=!0,this.#C(this.#I)),this.c()),this.#I=null)}return super.u(),null!=this.#L}cellAt(t,s){if(t>=0&&t<this.w&&s>=0&&s<this.h)return this.sprites[this.w*s+t]}#P(t,s){const i=this.#Y(t,s);if(i)return this.cellAt(i[0],i[1])}#Y(t,s){const i=t-this.x,e=s-this.y,h=Math.trunc(i/this.#N),r=Math.trunc(e/this.#H);if(i>=0&&e>=0&&i-h*this.#N<this.s&&e-r*this.#H<this.s&&h>=0&&h<this.w&&r>=0&&r<this.h)return[h,r]}get#N(){return this.s+this.#O}get#H(){return this.s+this.#M}}class c{#U;#T;#D;#X;#W;#G;#_;#z;#K;#F;#V;#$;#j;#Q;#q;#J;#Z;#tt;constructor(t){this.#U=t}init(t){this.#T=t,this.#X=new o(t,t.renderer.w-74,10,1,1,64,0,0,t=>this.#st(t)),this.#V=this.#X.sprites[0],this.#V=this.#X.sprites[0],this.#V.w(t.text,"X",32,3),this.#W=new r(t);const[s,i,e,h,n,a,c]=this.#U.meta;this.#G=this.#W.add("c",100,64,1,i),this.#_=this.#W.add(this.#G.x-12,this.#G.y+60,24,0,i),this.#z=this.#W.add(this.#G.x+46,this.#G.y+60,24,0,i),this.#K=t.text.w(n,"c",10,24,i,["sine"]),this.#F=t.text.w(a,"c",this.#G.y+100,32,i,["typing","shake"])}u(){const[t,s,i,e,h,r,n]=this.#U.meta;if(this.#$)return new p(this.#T);this.#X.u(),!this.#j&&this.#T.input.click()?(this.#T.input.clickRead=!0,this.#G.cc(5),this.#_.cc(5),this.#z.cc(5),this.#W.c(),this.#K.enabled=!1,this.#F.enabled=!1,this.#K=this.#T.text.w("VICKI","c",10,24,5,["sine"]),this.#F=this.#T.text.w(n,"c",this.#G.y+100,32,5,["typing","shake"]),this.#j=!0):!this.#Q&&this.#T.input.click()&&(this.#T.input.clickRead=!0,this.#G.enabled=!1,this.#_.enabled=!1,this.#z.enabled=!1,this.#K.enabled=!1,this.#F.enabled=!1,this.#W.c(),this.#T.text.w(t,"c",10,48,4,["sine"]),this.#it(),this.#Q=!0),!this.#Q||this.#q||this.#J||this.#D.u(),this.#W.u(),this.#q&&this.#T.input.click()&&(this.#$=!0),this.#J&&this.#T.input.click()&&this.#it()}d(){this.#Q&&!this.#$&&this.#D.d(),this.#W.d(),this.#X.d()}#it(){this.#q=!1,this.#J=!1,(this.#Z||{}).enabled=!1,(this.#tt||{}).enabled=!1,this.#T.text.clear(),this.#D=new this.#U(this.#T,()=>this.#et(),()=>this.#ht()),this.#V=this.#X.sprites[0],this.#V.w(this.#T.text,"X",32,3)}#et(){this.#q=!0,this.#T.minigamesWon.add(this.#U);const t=["CONGRATS!!","WELL DONE!!","GOOD JOB!!","PAWSOME!!","AMEOWZING!!"],s=this.#T.text.w(t[Math.floor(Math.random()*t.length)],"c","c",48,2,["sine"]);this.#T.text.w("NOW GO HELP THE OTHER CATS!","c",s.y+75,32,3,["typing","shake"],1200)}#ht(){this.#J=!0;const t=["OOPS!!","BETTER LUCK NEXT TIME!!","OH WELL!!"];this.#Z=this.#T.text.w(t[Math.floor(Math.random()*t.length)],"c","c",48,2,["sine"]),this.#tt=this.#T.text.w("LET'S TRY AGAIN!","c",this.#Z.y+75,32,3,["typing","shake"],1200)}#st(t){t===this.#V&&(this.#$=!0)}}class l{#T;#rt;#nt;#at;#ot;#ct;#lt;#dt;#X;#gt;#mt;#ut;#Q;static meta=["MEOWSWEEPER",8,73,2,"QUEEN KARA THE 3RD","YOU, NEW CAT!!\nI NEED YOU TO SCRATCH MY BACK\nIMMEDIATELY BUT ONLY WHERE\nI LIKE IT!\n\n\nSINCE YOU'RE NEW I WILL TELL\nYOU HOW MANY DANGER ZONES\nARE AROUND WHERE YOU'RE\nSCRATCHING!","OOOH, THE QUEEN HERSELF!!\n\n\nI NEED TO MAKE A GOOD\nFIRST IMPRESSION!"];constructor(t,s,i){this.#T=t,this.#rt=s,this.#nt=i,this.#at=t.renderer.horizontal?20:10,this.#ot=t.renderer.horizontal?10:20,this.#ct=10,this.#lt=26;const e=Math.floor(Math.min((t.renderer.w-20)/this.#at-4*(this.#at-1)/this.#at,(t.renderer.h-110)/this.#ot-4*(this.#ot-1)/this.#ot));this.#dt=new o(t,"c",100,this.#at,this.#ot,e,4,4,t=>this.#ft(t)),this.#X=new o(t,10,10,2,1,64,10,0,t=>this.#st(t)),this.#gt=this.#X.sprites[0],this.#gt.w(t.text,"O",30,3),this.#mt=this.#X.sprites[1],this.#mt.w(t.text,"X",30,3),this.#pt("dig")}u(){(this.#T.input.keyPresses.KeyA||this.#T.input.keyPresses.ArrowLeft)&&this.#pt("dig"),(this.#T.input.keyPresses.KeyD||this.#T.input.keyPresses.ArrowRight)&&this.#pt("flag"),this.#dt.u(),this.#X.u()}d(){this.#dt.d(),this.#X.d()}#ft(t){switch(this.#ut){case"dig":this.#Q||this.#wt(t),this.#xt(t.gridX,t.gridY),t.mine&&(this.#dt.disabled=!0,this.#T.tt(2e3,()=>this.#nt()));break;case"flag":t.flagged?(t.flagged=!1,t.content.enabled=!1,this.#T.text.c()):(t.flagged=!0,t.w(this.#T.text,"X",this.#lt,2))}}#wt(t){const s=this.#dt.sprites.filter(s=>s!==t&&(Math.abs(s.gridX-t.gridX)>1||Math.abs(s.gridY-t.gridY)>1));for(let t=0;t<this.#ct;t++){const t=Math.floor(Math.random()*s.length),i=s[t];s.splice(t,1),i.mine=!0}for(let t=0;t<this.#dt.h;t++)for(let s=0;s<this.#dt.w;s++){let i=this.#dt.cellAt(s,t);if(!i.mine){i.mines=0;for(let e=-1;e<=1;e++)for(let h=-1;h<=1;h++)this.#dt.cellAt(s+h,t+e)?.mine&&(i.mines+=1)}}this.#Q=!0}#xt(t,s){this.#T.shake(200);const i=this.#dt.cellAt(t,s);if(i?.flagged&&(i.flagged=!1,i.content.enabled=!1),i?.enabled&&!i?.opened)if(i.opened=!0,i.activate(!1),0===i.mines)i.hidden=!0,this.#xt(t,s-1),this.#xt(t,s+1),this.#xt(t-1,s),this.#xt(t+1,s);else if(i.mine)for(const t of this.#dt.sprites.filter(t=>t.mine))t.activate(!1),t.w(this.#T.text,"X",this.#lt,19);else i.w(this.#T.text,i.mines,this.#lt,i.mines-1+10);this.#dt.sprites.filter(t=>!t.opened).every(t=>t.mine)&&this.#rt()}#st(t){t===this.#mt?this.#pt("flag"):t===this.#gt&&this.#pt("dig")}#pt(t){this.#ut=t,this.#gt.activate("dig"!==this.#ut),this.#mt.activate("flag"!==this.#ut),this.#X.c()}}class d{#T;#rt;#nt;#dt;#W;#At;#bt;static meta=["PAW PAW TOE",6,73,2,"ORANGE CAT, THE USELESS BOYFRIEND","BET YOU CAN'T BEAT ME\nIN PAW PAW TOE!\n\n\nI'M THE SMARTEST\nORANGE CAT EVER!!!","WELL, THAT'S\nNOT SAYING MUCH...\n\n\nLET'S SEE!"];constructor(t,s,i){this.#T=t,this.#rt=s,this.#nt=i,this.#dt=new o(t,"c","c",3,3,96,20,20,t=>this.#ft(t)),this.#W=new r(t)}u(){this.#dt.u(),this.#W.u()}d(){this.#dt.d(),this.#W.d()}#ft(t){t.symbol||(this.#Et(t,"X"),this.#dt.disabled=!0,this.#At=this.#T.tt(1e3,()=>{if(!this.#bt){const t=this.#dt.sprites.filter(t=>!t.symbol);t.length>0&&(this.#Et(t[Math.floor(Math.random()*t.length)],"O"),this.#dt.disabled=!1,this.#dt.c())}}))}#Et(t,s){this.#bt||(this.#T.shake(200),t.symbol=s,t.activate(!1),t.d(this.#W,64,0,"X"===s?5:6),this.#Tt())}#Tt(){for(let t=0;t<3;t++){const s=new Map;for(let i=0;i<3;i++){const e=this.#dt.cellAt(i,t);s.set(e.symbol,(s.get(e.symbol)||0)+1)}if(3===s.get("X"))return this.#et("X");if(3===s.get("O"))return this.#et("O")}for(let t=0;t<3;t++){const s=new Map;for(let i=0;i<3;i++){const e=this.#dt.cellAt(t,i);s.set(e.symbol,(s.get(e.symbol)||0)+1)}if(3===s.get("X"))return this.#et("X");if(3===s.get("O"))return this.#et("O")}return"X"===this.#dt.cellAt(0,0).symbol&&"X"===this.#dt.cellAt(1,1).symbol&&"X"===this.#dt.cellAt(2,2).symbol?this.#et("X"):"O"===this.#dt.cellAt(0,0).symbol&&"O"===this.#dt.cellAt(1,1).symbol&&"O"===this.#dt.cellAt(2,2).symbol?this.#et("O"):"X"===this.#dt.cellAt(2,0).symbol&&"X"===this.#dt.cellAt(1,1).symbol&&"X"===this.#dt.cellAt(0,2).symbol?this.#et("X"):"O"===this.#dt.cellAt(2,0).symbol&&"O"===this.#dt.cellAt(1,1).symbol&&"O"===this.#dt.cellAt(0,2).symbol?this.#et("O"):void 0}#et(t){this.#bt=!0,this.#dt.disabled=!0,(this.#At||{}).disabled=!0,"X"===t?this.#rt():"O"===t&&(this.#dt.disabled=!0,this.#T.tt(2e3,()=>this.#nt()))}}class g{#T;#rt;#W;#kt;#yt;#X;#Bt;static meta=["SUDOCAT",5,73,4,"KUMBA","I NEED ALL MY TREATS AND\nTOYS NEATLY ORGANISED!!\n\n\nTHERE SHOULD BE ONLY ONE\nTYPE IN EACH ROW, EACH\nCOLUMN AND IN EACH BOX!!","KITTY MUST HAVE OCD..."];constructor(t,s){this.#T=t,this.#rt=s,this.#W=new r(t,!0),this.#kt=[];const i=Math.floor(Math.min((t.renderer.w-20)/3-32/3,(t.renderer.h-200)/3-32/3));this.#yt=Math.floor(Math.min((i-0)/3-10/3,(i-0)/3-10/3));const e=t.renderer.w/2-3*(i+32/3)/2;for(let s=0;s<3;s++)for(let h=0;h<3;h++){const r=new o(t,e+h*(i+16),100+s*(i+16),3,3,this.#yt,5,5,t=>this.#ft(t));this.#kt.push(r)}this.#X=new o(t,"c",t.renderer.h-74,10,1,64,10,0,t=>this.#st(t));for(let t=1;t<=10;t++){const s=this.#X.sprites[t-1];s.d(this.#W,128/3,t+5),s.digit=t<=9?t:null}this.#vt(),this.#Rt(1)}u(){for(let t=1;t<=9;t++)this.#T.input.keyPresses[`Digit${t}`]&&this.#Rt(t);(this.#T.input.keyPresses.KeyA||this.#T.input.keyPresses.ArrowLeft)&&this.#Bt>1&&this.#Rt(this.#Bt-1),(this.#T.input.keyPresses.KeyD||this.#T.input.keyPresses.ArrowRight)&&this.#Bt<9&&this.#Rt(this.#Bt+1),(this.#T.input.keyPresses.KeyX||this.#T.input.keyPresses.Digit0)&&this.#Rt(null),this.#W.u();for(const t of this.#kt)t.u();this.#X.u()}d(){for(const t of this.#kt)t.d();this.#X.d(),this.#W.d()}#St(t,s){return this.#kt[3*Math.floor(s/3)+Math.floor(t/3)]}#Ot(t,s){return this.#St(t,s).cellAt(t%3,s%3)}#vt(){const t=[[6,8,0,1,0,0,0,9,0,0,3,4,5,0,8,0,2,0,2,1,0,0,6,0,3,0,0,5,0,0,4,0,7,0,0,9,3,4,2,9,0,0,0,0,6,0,0,7,0,8,0,5,0,0,9,2,0,8,0,0,0,5,3,0,0,3,2,0,0,9,1,8,0,0,0,3,0,0,0,6,7]],s=t[Math.floor(Math.random()*t.length)];for(let t=0;t<9;t++)for(let i=0;i<9;i++){const e=s[9*t+i];if(0!==e){const s=this.#Ot(i,t);s.activate(!1),s.digit=e,s.d(this.#W,2*this.#yt/3,e+5)}}}#ft(t){t.digit=this.#Bt,(t.content||{}).enabled=!1,this.#Bt&&t.d(this.#W,2*this.#yt/3,this.#Bt+5),this.#Mt()&&(this.#T.shake(200),this.#rt()),this.#T.text.c(),this.#W.c()}#Mt(){let t=!0;this.#Ct();for(let s=0;s<9;s++)t&=this.#Lt(s),t&=this.#It(s),t&=this.#Tt(s);return t}#Ct(){for(let t=0;t<9;t++)for(let s=0;s<9;s++){const i=this.#Ot(s,t);i.inactive||i.cb(0)}for(let t=0;t<9;t++)this.#kt[t].c()}#Lt(t){let s=!0;const i=new Map;for(let s=0;s<9;s++){const e=this.#Ot(t,s);i.set(e.digit,(i.get(e.digit)||0)+1)}for(const[e,h]of i.entries())if(null==e)s=!1;else if(h>1){s=!1;for(let s=0;s<9;s++){const i=this.#Ot(t,s);i.inactive||i.digit!=e||(i.cb(3),this.#St(t,s).c())}}return s}#It(t){let s=!0;const i=new Map;for(let s=0;s<9;s++){const e=this.#Ot(s,t);i.set(e.digit,(i.get(e.digit)||0)+1)}for(const[e,h]of i.entries())if(null==e)s=!1;else if(h>1){s=!1;for(let s=0;s<9;s++){const i=this.#Ot(s,t);i.inactive||i.digit!=e||(i.cb(3),this.#St(s,t).c())}}return s}#Tt(t){let s=!0;const i=new Map,e=this.#kt[t];for(let t=0;t<9;t++){const s=e.sprites[t];i.set(s.digit,(i.get(s.digit)||0)+1)}for(const[t,h]of i.entries())if(null==t)s=!1;else if(h>1){s=!1;for(let s=0;s<9;s++){const i=e.sprites[s];i.inactive||i.digit!=t||(i.cb(3),e.c())}}return s}#st(t){t&&this.#Rt(t.digit)}#Rt(t){this.#Bt=t;for(const t of this.#X.sprites)t.activate(!0);this.#X.sprites[null!=t?t-1:9].activate(!1),this.#X.c()}}class m{#T;#rt;#dt;#W;#Nt;#Ht;#Pt;#At;static meta=["MEOWMORY",9,8,3,"MOLLY","THEY SAY I HAVE THE\nMEMORY OF A GOLDFISH...\n\n\nCAN YOU SHOW ME HOW\nTO REMEMBER THINGS??","SOMEONE SAID FISHIE?!\n\n\nYUM!!!"];constructor(t,s){this.#T=t,this.#rt=s;const i=t.renderer.horizontal?6:5,e=t.renderer.horizontal?5:6,h=Math.floor(Math.min((t.renderer.w-20)/i-16*(i-1)/i,(t.renderer.h-110)/e-16*(e-1)/e));this.#dt=new o(t,"c",100,i,e,h,16,16,t=>this.#ft(t)),this.#W=new r(t,!0);const n=this.#dt.sprites.slice();for(let t=0;t<i*e/2;t++){const s=Math.floor(Math.random()*n.length),i=n[s];n.splice(s,1);const e=Math.floor(Math.random()*n.length),h=n[e];n.splice(e,1),i.secret=t,h.secret=t}}u(){this.#dt.u(),this.#W.u()}d(){this.#dt.d(),this.#W.d()}#ft(t){t.open||(this.#Ht&&this.#Pt&&this.#Yt(),t.open=!0,t.d(this.#W,2*this.#dt.s/3,t.secret,t.secret<5?8:null),t.cb(3),this.#Nt?(t.secret===this.#Nt.secret?(this.#T.shake(200),t.found=!0,t.activate(!1),this.#Nt.found=!0,this.#Nt.activate(!1),this.#dt.sprites.every(t=>t.found)&&this.#rt()):(this.#Ht=this.#Nt,this.#Pt=t,this.#At=this.#T.tt(1e3,()=>this.#Yt())),this.#Nt=!1):this.#Nt=t)}#Yt(){(this.#At||{}).disabled=!0,this.#Ht.open=!1,this.#Ht.content.enabled=!1,this.#Ht.cb(0),this.#Pt.open=!1,this.#Pt.content.enabled=!1,this.#Pt.cb(0),this.#dt.c(),this.#T.text.c(),this.#W.c(),this.#Ht=null,this.#Pt=null}}class u{#T;#rt;#kt;#Ut;static meta=["MEOWJONG",9,73,4,"PABLO","HOLA!! SOY PABLO!\n\n\nLET'S PLAY MEOWJONG!\nJUST MATCH THE SAME TILES\nBUT ONLY WHEN THEY'RE\nFREE TO MOVE LEFT OR RIGHT.","OH, SI SENOR?!"];constructor(t,s){this.#T=t,this.#rt=s;const i=t.renderer.horizontal?12:8,e=t.renderer.horizontal?8:12,h=Math.floor(Math.min((t.renderer.w-20)/i,(t.renderer.h-110)/e)),n=Math.ceil(h/16);this.#kt=[];const a=new o(t,"c",100,i,e,h,0,0,t=>this.#ft(t),12);a.spriteBatch=new r(t,!0);for(let[s,i]of[[0,1],[1,1],[0,2],[0,5],[0,6],[1,6],[10,1],[11,1],[11,2],[11,5],[10,6],[11,6]]){if(!t.renderer.horizontal){let t=s;s=i,i=t}a.cellAt(s,i).activate(!1),a.cellAt(s,i).hidden=!0}this.#kt.push(a);const c=new o(t,a.x+((t.renderer.horizontal?3:1)*h-n),a.y+((t.renderer.horizontal?1:3)*h-n),6,6,h,0,0,t=>this.#ft(t),13);c.spriteBatch=new r(t,!0);const l=new o(t,c.x+(h-n),c.y+(h-n),4,4,h,0,0,t=>this.#ft(t),14);l.spriteBatch=new r(t,!0);const d=new o(t,l.x+(h-n),l.y+(h-n),2,2,h,0,0,t=>this.#ft(t),15);d.spriteBatch=new r(t,!0),this.#kt.push(c),this.#kt.push(l),this.#kt.push(d);const g=[];for(let t=0;t<15;t++)for(let s=0;s<4;s++)if(t<5)for(let s=5;s<=9;s++)g.push([t,s]);else g.push([t,null]);for(let t of this.#kt)for(let s of t.sprites)if(!s.inactive){const i=Math.floor(Math.random()*g.length),[e,r]=g[i];g.splice(i,1),s.symbol=`${e}_${r}`,s.d(t.spriteBatch,2*h/3,e,r)}}u(){let t=!1;for(let s=this.#kt.length-1;s>=0;s--)t=this.#kt[s].u(t),this.#kt[s].spriteBatch.u()}d(){for(const t of this.#kt)t.d(),t.spriteBatch.d()}#ft(t){const s=t.grid.cellAt(t.gridX-1,t.gridY),i=t.grid.cellAt(t.gridX+1,t.gridY),e=!s||s.inactive||!i||i.inactive;!this.#Ut&&e?(this.#Ut=t,t.cb(3)):t===this.#Ut?(t.cb(t.grid.color),this.#Ut=null):this.#Ut&&e&&this.#Ut.symbol===t.symbol&&(this.#T.shake(200),this.#Ut.activate(!1),this.#Ut.hidden=!0,this.#Ut.content.enabled=!1,t.activate(!1),t.hidden=!0,t.content.enabled=!1,this.#Ut=null,this.#Dt());for(const t of this.#kt)t.c(),t.spriteBatch.c()}#Dt(){for(let t of this.#kt)for(let s of t.sprites)if(!s.inactive)return;this.#rt()}}class f{#T;#rt;#Xt;#Wt;#Gt;#_t;#at;#ot;#dt;#X;#zt;#mt;#ut;static meta=["MEOWSTERPIECE",7,8,3,"CHA CHA","TODAY I DECIDED TO BE\nAN ARTIST!!\nHELP ME WITH THIS\nPAINT BY NUMBER!\n\n\nTHE CLUES WILL TELL YOU\nHOW MANY BLOCKS SHOULD\nBE PAINTED IN EACH ROW\nAND IN EACH COLUMN!","SURE SURE, ARTIST TODAY,\nSOMETHING ELSE TOMORROW!\n\n\nTYPICAL KITTY..."];constructor(t,s){this.#T=t,this.#rt=s,this.#Xt=[[0],[1,1],[2,2],[5],[2,1,2,1],[5,2],[3,1],[6,2],[1,5,1],[8],[2,4]],this.#Wt=[[1,2],[4,1,1],[3,6],[7],[3,6],[4,4],[1,3],[2],[3,1],[2,3]],this.#Gt=Math.max(...this.#Xt.map(t=>t.length)),this.#_t=Math.max(...this.#Wt.map(t=>t.length)),this.#at=this.#Wt.length+this.#Gt,this.#ot=this.#Xt.length+this.#_t;const i=Math.floor(Math.min((t.renderer.w-20)/this.#at-2*(this.#at-1)/this.#at,(t.renderer.h-110)/this.#ot-2*(this.#ot-1)/this.#ot));this.#dt=new o(t,"c",100,this.#at,this.#ot,i,2,2,t=>this.#ft(t));for(let s=0;s<this.#at;s++)for(let e=0;e<this.#_t;e++){const h=this.#dt.cellAt(s,e);s<this.#Gt||e<this.#_t-this.#Wt[s-this.#Gt].length?h.hidden=!0:(h.w(t.text,this.#Wt[s-this.#Gt][e-(this.#_t-this.#Wt[s-this.#Gt].length)],2*i/3,2),h.activate(!1))}for(let s=0;s<this.#at;s++)for(let i=0;i<this.#Gt;i++){const e=this.#dt.cellAt(i,s);s<this.#_t||i<this.#Gt-this.#Xt[s-this.#_t].length?e.hidden=!0:(e.w(t.text,this.#Xt[s-this.#_t][i-(this.#Gt-this.#Xt[s-this.#_t].length)],2*this.#dt.s/3,2),e.activate(!1))}this.#X=new o(t,10,10,2,1,64,10,0,t=>this.#st(t)),this.#zt=this.#X.sprites[0],this.#zt.w(t.text,"O",30,3),this.#mt=this.#X.sprites[1],this.#mt.w(t.text,"X",30,3),this.#pt("mark"),this.#dt.c()}u(){(this.#T.input.keyPresses.KeyA||this.#T.input.keyPresses.ArrowLeft)&&this.#pt("mark"),(this.#T.input.keyPresses.KeyD||this.#T.input.keyPresses.ArrowRight)&&this.#pt("flag"),this.#dt.u(),this.#X.u()}d(){this.#dt.d(),this.#X.d()}#ft(t){switch((t.content||{}).enabled=!1,this.#ut){case"mark":"marked"!==t.state?(t.state="marked",t.cb(3)):(t.state=null,t.cb(0));break;case"flag":t.cb(0),"flagged"!==t.state?(t.state="flagged",t.w(this.#T.text,"X",2*this.#dt.s/3,2)):t.state=null}this.#T.text.c(),this.#Tt()}#st(t){t===this.#mt?this.#pt("flag"):t===this.#zt&&this.#pt("mark")}#pt(t){this.#ut=t,this.#zt.activate("mark"!==this.#ut),this.#mt.activate("flag"!==this.#ut),this.#X.c()}#Tt(){let t=0;for(let s=this.#Gt;s<this.#at;s++){for(let t=0;t<this.#_t;t++)this.#dt.cellAt(s,t).cb(4);let i=0,e=0,h=0;for(let t=this.#_t;t<this.#ot;t++)"marked"===this.#dt.cellAt(s,t).state&&(i+=1),"marked"===this.#dt.cellAt(s,t).state&&t!==this.#ot-1||((i>0||t===this.#ot-1)&&e<this.#Wt[s-this.#Gt].length&&(i>this.#Wt[s-this.#Gt][e]?this.#dt.cellAt(s,e+(this.#_t-this.#Wt[s-this.#Gt].length)).cb(2):i===this.#Wt[s-this.#Gt][e]&&(this.#dt.cellAt(s,e+(this.#_t-this.#Wt[s-this.#Gt].length)).cb(10),h+=1),e+=1),i=0);h===this.#Wt[s-this.#Gt].length&&(t+=1)}for(let s=this.#_t;s<this.#ot;s++){for(let t=0;t<this.#Gt;t++)this.#dt.cellAt(t,s).cb(4);let i=0,e=0,h=0;for(let t=this.#Gt;t<this.#at;t++)"marked"===this.#dt.cellAt(t,s).state&&(i+=1),"marked"===this.#dt.cellAt(t,s).state&&t!==this.#at-1||((i>0||t===this.#at-1)&&e<this.#Xt[s-this.#_t].length&&(i>this.#Xt[s-this.#_t][e]?this.#dt.cellAt(e+(this.#Gt-this.#Xt[s-this.#_t].length),s).cb(2):i===this.#Xt[s-this.#_t][e]&&(this.#dt.cellAt(e+(this.#Gt-this.#Xt[s-this.#_t].length),s).cb(10),h+=1),e+=1),i=0);h===this.#Xt[s-this.#_t].length&&(t+=1)}t===this.#at-this.#Gt+(this.#ot-this.#_t)&&(this.#T.shake(200),this.#rt())}}class p{#T;#Kt;#dt;#X;#W;#Ft;#Vt;#$t;#jt;#Qt;#qt;#Jt;init(t){this.#T=t,this.#Kt=t.firstStart,t.firstStart=!1,this.#dt=new o(t,"c",100,6,15,128,0,0,null,"",2),this.#dt.disabled=!0,this.#X=new o(t,"c",132,3,7,128,64,64,t=>this.#st(t),"",1),this.#Kt?(this.#X.disabled=!0,this.#Vt=-t.renderer.h,t.text.w("THIS IS A TRUE STORY\n\n\nTHE CATS DEPICTED HERE\nALL LIVE IN DUBLIN","c","c",32,4,["typing","shake"]),t.tt(9e3,()=>{this.#$t=!0,t.text.clear()})):t.text.w("HELP THE OTHER CATS\nIN THE BUILDING!!","c",10,32,3,["typing","shake"]),this.#W=new r(t);const s=[d,m,u,g,f,l];for(let i=0;i<21;i++)if(!s[i]||0!=i&&this.#Kt)this.#X.sprites[i].activate(!1);else{let[e,h,r,n,...a]=s[i].meta;this.#X.sprites[i].minigameClass=s[i];let o=73;t.minigamesWon.has(s[i])&&(this.#X.sprites[i].activate(!1),r=39,o=39,n=1),this.#W.add(this.#X.sprites[i].x+r,this.#X.sprites[i].y+o,50,n,h)}this.#jt=this.#W.add("c",t.renderer.h,900,1,20);for(let s=0;s<this.#X.sprites.length;s++){const i=this.#X.sprites[s];t.minigamesWon.has(i.minigameClass)&&i.activate(!1)}}u(){if(this.#Kt)if(this.#Vt<0)this.#Vt+=3,this.#Vt>=0&&(this.#Vt=0,this.#T.shake(200)),this.#T.renderer.p=t.ortho(0,this.#T.renderer.w,this.#T.renderer.h+this.#Vt,this.#Vt);else if(this.#$t&&!this.#Qt){if(this.#jt.y-=3,this.#jt.y<=this.#T.renderer.h/2-this.#jt.s/2){this.#Qt=!0,this.#jt.y=this.#T.renderer.h/2-this.#jt.s/2;const t=this.#T.text.w("  A VOIDING\nYOUR PROBLEMS","c","c",48,null,["sine"]);this.#T.text.w("  A GAME BY\nATTILA HORVATH","c",t.y+180,36,7,["shake"]),this.#T.text.w("TAP TO BEGIN","c",t.y+280,36,4,["typing","shake"],1200),this.#T.shake(500)}this.#jt.x=this.#T.renderer.w/2-this.#jt.s/2,this.#W.c()}else if(this.#qt)this.#Jt?this.#X.disabled=!1:this.#T.input.click()&&(this.#T.input.clickRead=!0,this.#jt.hidden=!0,this.#W.c(),this.#T.text.clear(),this.#Jt=!0,this.#T.text.w("LET'S START WITH THIS\nGENIUS ORANGE CAT HERE!","c",10,32,3,["typing","shake"]));else if(this.#T.input.click()){this.#T.input.clickRead=!0,this.#T.text.clear();const t=this.#T.text.w("SO, I HEARD THIS\nIS THE DOMAIN OF","c","c",28,4,["typing","shake"]);this.#T.text.w("QUEEN KARA","c",t.y+60,32,8,["typing","sine"],4e3),this.#T.text.w("I HOPE SHE'LL ACCEPT ME\nIF I HELP THE OTHER CATS...","c",t.y+120,28,4,["typing","shake"],6e3),this.#qt=!0}if(this.#dt.u(),this.#W.u(),this.#Ft)return this.#Ft;this.#X.u()}d(){this.#dt.d(),this.#X.d(),this.#W.d()}#st(t){t&&(this.#Ft=new c(t.minigameClass))}}const w=new class{#Q;#Zt;#ts;#W;#ss;#is;#es;#hs;constructor(){this.renderer=new i(()=>{if(!this.#Q){for(let t=0;t<128;t++){const t=Math.floor(15*Math.random());let s=null;t<5&&(s=5+Math.floor(5*Math.random()));const i=this.#ts.add(Math.random()*this.renderer.w,Math.random()*this.renderer.h,16+100*Math.random(),t,s);i.a=.33,i.dx=-.5+Math.random(),i.dy=-.5+Math.random(),i.ds=.2*Math.random()-.1}this.#is=new c(u),this.#is.init(this),this.#Q=!0}}),this.input=new e(this),this.#Zt=[],this.#ts=new r(this,!0),this.text=new a(this),this.#W=new r(this),this.#ss=this.#W.add(0,0,26,0,5),this.#ss.hidden=!0,this.minigamesWon=new Set}step(t){this.timestamp=t,this.#rs(t),this.#ns(),this.#es&&(this.text.clear(),this.#is=this.#es,this.#is.init(this),this.#es=null)}tt(t,s,i){const e={start:this.timestamp??0,delay:t,onexpire:s,repeat:i};return this.#Zt.push(e),e}shake(t){navigator.vibrate(t),this.#hs=!0,this.tt(t,()=>this.#hs=!1)}#rs(t){this.#hs?(this.renderer.v[6]=7*Math.random(),this.renderer.v[7]=7*Math.random()):(this.renderer.v[6]=0,this.renderer.v[7]=0),this.input.u(),this.input.mouse&&this.#ss.hidden&&(this.#ss.hidden=!1,this.#W.c()),this.input.moved&&(this.#ss.x=this.input.x-6,this.#ss.y=this.input.y-6,this.#W.c());for(const t of this.#ts.sprites)t.x+=t.dx,t.y+=t.dy,t.s+=t.ds,t.x<0&&(t.dx=-t.dx,t.x=0),t.y<0&&(t.dy=-t.dy,t.y=0),t.x>this.renderer.w&&(t.dx=-t.dx,t.x=this.renderer.w),t.y>this.renderer.h&&(t.dy=-t.dy,t.y=this.renderer.h),t.s<16&&(t.ds=-t.ds,t.s=16),t.s>116&&(t.ds=-t.ds,t.s=116);this.#ts.c(),this.#ts.u(),this.#as(t),this.#is&&(this.#es=this.#is.u()),this.text.u(t),this.#W.u()}#as(t){for(const s of this.#Zt)t>=s.start+s.delay&&!s.disabled&&(s.repeat?s.start=t:s.expired=!0,s.onexpire&&s.onexpire());this.#Zt.some(t=>t.expired||t.disabled)&&(this.#Zt=this.#Zt.filter(t=>!t.expired&&!t.disabled))}#ns(){this.renderer.clear();const s=this.renderer.p;this.renderer.p=t.ortho(0,this.renderer.w,this.renderer.h,0),this.#ts.d(),this.renderer.p=s,this.#is&&this.#is.d(),this.renderer.p=t.ortho(0,this.renderer.w,this.renderer.h,0),this.text.d(),this.#W.d(),this.renderer.p=s}};requestAnimationFrame(function t(s){requestAnimationFrame(t),w.step(s)})}();
//# sourceMappingURL=bundle.js.map
